<!DOCTYPE html>
<html lang="en">
 <head> 
  <meta charset="UTF-8" /> 
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
  <meta name="generator" content="Asciidoctor 1.5.4" /> 
  <meta name="author" content="Matthias Zimmermann, Daniel Wiehl, Judith Gull, Matthias Villiger" /> 
  <title>Eclipse Scout: Architecture</title> 
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700" /> 
  <style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css" /> 
  <style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style> 
 </head> 
 <body class="book toc2 toc-left"> 
  <div id="header"> 
   <h1>Eclipse Scout: Architecture</h1> 
   <div class="details"> 
    <span id="author" class="author">Matthias Zimmermann, Daniel Wiehl, Judith Gull, Matthias Villiger</span>
    <br /> 
    <span id="email" class="email"><a href="mailto:scout-dev@eclipse.org">scout-dev@eclipse.org</a></span>
    <br /> 
    <span id="revnumber">version 5.2.0-SNAPSHOT</span> 
   </div> 
   <div id="toc" class="toc2"> 
    <div id="toctitle">
     Table of Contents
    </div> 
    <ul class="sectlevel0"> 
     <li><a href="#scout-platform">Scout Platform</a> 
      <ul class="sectlevel1"> 
       <li><a href="#application-lifecycle">1. Application Lifecycle</a> 
        <ul class="sectlevel2"> 
         <li><a href="#platform-listener">1.1. Platform Listener</a></li> 
        </ul> </li> 
       <li><a href="#class-inventory">2. Class Inventory</a> 
        <ul class="sectlevel2"> 
         <li><a href="#scout-xml">2.1. scout.xml</a></li> 
        </ul> </li> 
       <li><a href="#bean-manager">3. Bean Manager</a> 
        <ul class="sectlevel2"> 
         <li><a href="#bean-registration">3.1. Bean registration</a></li> 
         <li><a href="#bean-scopes">3.2. Bean Scopes</a></li> 
         <li><a href="#bean-creation">3.3. Bean Creation</a></li> 
         <li><a href="#bean-retrieval">3.4. Bean Retrieval</a></li> 
         <li><a href="#bean-decoration">3.5. Bean Decoration</a></li> 
        </ul> </li> 
       <li><a href="#configuration-management">4. Configuration Management</a></li> 
       <li><a href="#testing">5. Testing</a></li> 
      </ul> </li> 
     <li><a href="#exception-handling">Exception Handling</a> 
      <ul class="sectlevel1"> 
       <li><a href="#platformexception">6. PlatformException</a> 
        <ul class="sectlevel2"> 
         <li><a href="#processingexception">6.1. ProcessingException</a></li> 
         <li><a href="#assertionexception">6.2. AssertionException</a></li> 
         <li><a href="#threadinterruptedexception">6.3. ThreadInterruptedException</a></li> 
         <li><a href="#futurecancelledexception">6.4. FutureCancelledException</a></li> 
         <li><a href="#timedoutexception">6.5. TimedOutException</a></li> 
         <li><a href="#transactionrequiredexception">6.6. TransactionRequiredException</a></li> 
        </ul> </li> 
       <li><a href="#exceptionhandler">7. ExceptionHandler</a></li> 
       <li><a href="#exception-translator">8. Exception Translator</a> 
        <ul class="sectlevel2"> 
         <li><a href="#defaultexceptiontranslator">8.1. DefaultExceptionTranslator</a></li> 
         <li><a href="#defaultruntimeexceptiontranslator">8.2. DefaultRuntimeExceptionTranslator</a></li> 
         <li><a href="#platformexceptiontranslator">8.3. PlatformExceptionTranslator</a></li> 
         <li><a href="#nullexceptiontranslator">8.4. NullExceptionTranslator</a></li> 
        </ul> </li> 
       <li><a href="#exception-logging">9. Exception Logging</a></li> 
      </ul> </li> 
     <li><a href="#jobmanager">JobManager</a> 
      <ul class="sectlevel1"> 
       <li><a href="#functionality">10. Functionality</a></li> 
       <li><a href="#job">11. Job</a></li> 
       <li><a href="#scheduling-a-job">12. Scheduling a Job</a></li> 
       <li><a href="#jobinput">13. JobInput</a> 
        <ul class="sectlevel2"> 
         <li><a href="#jobinput-withname">13.1. JobInput.withName</a></li> 
         <li><a href="#jobinput-withruncontext">13.2. JobInput.withRunContext</a></li> 
         <li><a href="#jobinput-withexecutiontrigger">13.3. JobInput.withExecutionTrigger</a></li> 
         <li><a href="#jobinput-withexecutionsemaphore">13.4. JobInput.withExecutionSemaphore</a></li> 
         <li><a href="#jobinput-withexecutionhint">13.5. JobInput.withExecutionHint</a></li> 
         <li><a href="#jobinput-withexceptionhandling">13.6. JobInput.withExceptionHandling</a></li> 
         <li><a href="#jobinput-withthreadname">13.7. JobInput.withThreadName</a></li> 
         <li><a href="#jobinput-withexpirationtime">13.8. JobInput.withExpirationTime</a></li> 
        </ul> </li> 
       <li><a href="#ifuture">14. IFuture</a></li> 
       <li><a href="#job-states">15. Job states</a></li> 
       <li><a href="#future-filter">16. Future filter</a></li> 
       <li><a href="#event-filter">17. Event filter</a></li> 
       <li><a href="#job-cancellation">18. Job cancellation</a></li> 
       <li><a href="#subscribe-for-job-lifecycle-events">19. Subscribe for job lifecycle events</a></li> 
       <li><a href="#awaiting-job-completion">20. Awaiting job completion</a> 
        <ul class="sectlevel2"> 
         <li><a href="#difference-between-done-and-finished-state">20.1. Difference between 'done' and 'finished' state</a></li> 
         <li><a href="#awaiting-a-single-future-s-done-state">20.2. Awaiting a single future&#x2019;s 'done' state</a></li> 
         <li><a href="#awaiting-a-single-future-s-finished-state">20.3. Awaiting a single future&#x2019;s 'finished' state</a></li> 
         <li><a href="#awaiting-multiple-future-s-done-state">20.4. Awaiting multiple future&#x2019;s 'done' state</a></li> 
         <li><a href="#awaiting-multiple-future-s-finished-state">20.5. Awaiting multiple future&#x2019;s 'finished' state</a></li> 
        </ul> </li> 
       <li><a href="#uncaught-job-exceptions">21. Uncaught job exceptions</a></li> 
       <li><a href="#blocking-condition">22. Blocking condition</a> 
        <ul class="sectlevel2"> 
         <li><a href="#example-of-a-blocking-condition">22.1. Example of a blocking condition</a></li> 
        </ul> </li> 
       <li><a href="#executionsemaphore">23. ExecutionSemaphore</a></li> 
       <li><a href="#executiontrigger">24. ExecutionTrigger</a> 
        <ul class="sectlevel2"> 
         <li><a href="#misfiring">24.1. Misfiring</a></li> 
        </ul> </li> 
       <li><a href="#stopping-the-platform">25. Stopping the platform</a></li> 
       <li><a href="#modeljobs">26. ModelJobs</a></li> 
       <li><a href="#configuration">27. Configuration</a></li> 
       <li><a href="#extending-job-manager">28. Extending job manager</a></li> 
       <li><a href="#scheduling-examples">29. Scheduling examples</a></li> 
      </ul> </li> 
     <li><a href="#runcontext">RunContext</a> 
      <ul class="sectlevel1"> 
       <li><a href="#factory-methods-to-create-a-runcontext">30. Factory methods to create a RunContext</a></li> 
       <li><a href="#properties-of-a-runcontext">31. Properties of a RunContext</a></li> 
       <li><a href="#properties-of-a-serverruncontext">32. Properties of a ServerRunContext</a></li> 
       <li><a href="#properties-of-a-clientruncontext">33. Properties of a ClientRunContext</a></li> 
      </ul> </li> 
     <li><a href="#runmonitor">RunMonitor</a></li> 
     <li><a href="#secure-output">Secure Output</a> 
      <ul class="sectlevel1"> 
       <li><a href="#encoding-by-default">34. Encoding by Default</a></li> 
       <li><a href="#html-enabled">35. Html Enabled</a> 
        <ul class="sectlevel2"> 
         <li><a href="#css-class-and-other-model-properties">35.1. CSS Class and Other Model Properties</a></li> 
         <li><a href="#html-builder">35.2. HTML Builder</a></li> 
         <li><a href="#styling-in-the-ui-layer">35.3. Styling in the UI-Layer</a></li> 
         <li><a href="#manual-encoding">35.4. Manual Encoding</a></li> 
         <li><a href="#using-a-white-list-filter">35.5. Using a White-List Filter</a></li> 
        </ul> </li> 
      </ul> </li> 
     <li><a href="#client-notifications">Client Notifications</a> 
      <ul class="sectlevel1"> 
       <li><a href="#examples-2">36. Examples</a></li> 
       <li><a href="#data-flow">37. Data Flow</a></li> 
       <li><a href="#push-technology">38. Push Technology</a></li> 
       <li><a href="#components">39. Components</a> 
        <ul class="sectlevel2"> 
         <li><a href="#multiple-server-nodes">39.1. Multiple Server Nodes</a></li> 
        </ul> </li> 
       <li><a href="#publishing">40. Publishing</a> 
        <ul class="sectlevel2"> 
         <li><a href="#clientnotificationaddress">40.1. ClientNotificationAddress</a></li> 
         <li><a href="#transactional-vs-non-transactional">40.2. Transactional vs. Non-transactional</a></li> 
         <li><a href="#distributing-to-all-cluster-nodes">40.3. Distributing to all Cluster Nodes</a></li> 
         <li><a href="#coalescing-notifications">40.4. Coalescing Notifications</a></li> 
        </ul> </li> 
       <li><a href="#handling">41. Handling</a> 
        <ul class="sectlevel2"> 
         <li><a href="#creating-a-client-notification-handler">41.1. Creating a Client Notification Handler</a></li> 
         <li><a href="#handling-notifications-temporarily">41.2. Handling Notifications Temporarily</a></li> 
         <li><a href="#asynchronous-dispatching">41.3. Asynchronous Dispatching</a></li> 
         <li><a href="#updating-scout-model">41.4. Updating Scout Model</a></li> 
        </ul> </li> 
      </ul> </li> 
     <li><a href="#webservices-with-jax-ws">Webservices with JAX-WS</a> 
      <ul class="sectlevel1"> 
       <li><a href="#functionality-2">42. Functionality</a></li> 
       <li><a href="#jax-ws-implementor-and-deployment">43. JAX-WS implementor and deployment</a> 
        <ul class="sectlevel2"> 
         <li><a href="#jax-ws-version-and-implementor">43.1. JAX-WS version and implementor</a></li> 
         <li><a href="#running-jax-ws-in-a-servlet-container">43.2. Running JAX-WS in a servlet container</a></li> 
         <li><a href="#running-jax-ws-in-a-ee-container">43.3. Running JAX-WS in a EE container</a></li> 
         <li><a href="#jaxws.implementor.configuration">43.4. Configure JAX-WS implementor</a></li> 
        </ul> </li> 
       <li><a href="#jaxws.modularization">44. Modularization</a></li> 
       <li><a href="#build-webservice-stubs-and-artifacts">45. Build webservice stubs and artifacts</a> 
        <ul class="sectlevel2"> 
         <li><a href="#jaxws.stub.generation">45.1. Configure webservice stub generation via wsimport</a></li> 
         <li><a href="#customize-wsdl-components-and-xsd-schema-elements-via-binding-files">45.2. Customize WSDL components and XSD schema elements via binding files</a></li> 
         <li><a href="#annotation-processing-tool-apt">45.3. Annotation Processing Tool (APT)</a></li> 
         <li><a href="#generate_artifacts_from_console">45.4. Build webservice stubs and APT artifacts from console</a></li> 
         <li><a href="#generate_artifacts_from_eclipse">45.5. Build webservice stubs and APT artifacts from within Eclipse IDE</a></li> 
         <li><a href="#exclude-derived-resources-from-version-control">45.6. Exclude derived resources from version control</a></li> 
         <li><a href="#jaxwsannotationprocessor">45.7. JaxWsAnnotationProcessor</a></li> 
        </ul> </li> 
       <li><a href="#provide-a-webservice">46. Provide a webservice</a> 
        <ul class="sectlevel2"> 
         <li><a href="#WebServiceEntryPoint">46.1. The concept of an Entry Point</a></li> 
         <li><a href="#generate-an-entry-point-as-an-endpoint-interface">46.2. Generate an Entry Point as an endpoint interface</a></li> 
         <li><a href="#instrument-the-entry-point-generation">46.3. Instrument the Entry Point generation</a></li> 
         <li><a href="#example.entrypoint.definition">46.4. Example of an Entry Point definition</a></li> 
         <li><a href="#jaxws.provider.handlerChain">46.5. Configure JAX-WS Handlers</a></li> 
         <li><a href="#jaxws.provider.statepropagation">46.6. Propagate state among Handlers and port type</a></li> 
         <li><a href="#registration-of-webservice-endpoints">46.7. Registration of webservice endpoints</a></li> 
        </ul> </li> 
       <li><a href="#consume-a-webservice">47. Consume a webservice</a> 
        <ul class="sectlevel2"> 
         <li><a href="#invoke-a-webservice">47.1. Invoke a webservice</a></li> 
         <li><a href="#cancel-a-webservice-request">47.2. Cancel a webservice request</a></li> 
         <li><a href="#get-information-about-the-last-web-request">47.3. Get information about the last web request</a></li> 
         <li><a href="#propagate-state-to-handlers">47.4. Propagate state to Handlers</a></li> 
         <li><a href="#install-handlers-and-provide-credentials-for-authentication">47.5. Install handlers and provide credentials for authentication</a></li> 
         <li><a href="#jaxws.consumer.configuration">47.6. Default configuration of WS-Clients</a></li> 
        </ul> </li> 
       <li><a href="#jaxws.xmladapters">48. XML adapters to work with java.util.Date and java.util.Calendar</a></li> 
       <li><a href="#jax-ws-appendix">49. JAX-WS Appendix</a> 
        <ul class="sectlevel2"> 
         <li><a href="#PingWebService.wsdl">49.1. PingWebService.wsdl</a></li> 
         <li><a href="#PingWebServicePortType.java">49.2. PingWebServicePortType.java</a></li> 
         <li><a href="#PingWebServicePortTypeEntryPoint.java">49.3. PingWebServicePortTypeEntryPoint.java</a></li> 
         <li><a href="#PingWebServicePortTypeBean.java">49.4. PingWebServicePortTypeBean.java</a></li> 
         <li><a href="#settings_org.eclipse.jdt.core.prefs">49.5. .settings/org.eclipse.jdt.core.prefs file to enable APT in Eclipse IDE</a></li> 
         <li><a href="#settings_org.eclipse.jdt.apt.core.prefs">49.6. .settings/org.eclipse.jdt.apt.core.prefs file to enable APT in Eclipse IDE</a></li> 
         <li><a href="#factorypath">49.7. .factorypath file to enable APT in Eclipse IDE</a></li> 
         <li><a href="#IAuthenticationMethod">49.8. Authentication Method</a></li> 
         <li><a href="#ICredentialVerifier">49.9. Credential Verifier</a></li> 
        </ul> </li> 
       <li><a href="#apx-cclicence">Appendix A: Licence and Copyright</a> 
        <ul class="sectlevel2"> 
         <li><a href="#licence-summary">A.1. Licence Summary</a></li> 
         <li><a href="#sec-contributing_individuals">A.2. Contributing Individuals</a></li> 
         <li><a href="#full-licence-text">A.3. Full Licence Text</a></li> 
        </ul> </li> 
      </ul> </li> 
    </ul> 
   </div> 
  </div> 
  <div id="content"> 
   <div id="preamble"> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>!!! WORK IN PROGRESS !!!</p> 
     </div> 
     <div class="paragraph"> 
      <p>Scout Architecture and Concepts are described here.</p> 
     </div> 
    </div> 
   </div> 
   <h1 id="scout-platform" class="sect0"><a class="anchor" href="#scout-platform"></a>Scout Platform</h1> 
   <div class="openblock partintro"> 
    <div class="content"> 
     <div class="paragraph"> 
      <p>Scout contains a platform which provides basic functionality required by many software applications. The following list gives some examples for which tasks the platform is responsible for:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Application Lifecycle Management</p> </li> 
       <li> <p>Object Instance Management (Bean Management)</p> </li> 
       <li> <p>Configuration Management</p> </li> 
       <li> <p>Application Inventory</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="application-lifecycle"><a class="anchor" href="#application-lifecycle"></a>1. Application Lifecycle</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>The lifecycle of a Scout application is controlled by implementations of <code>org.eclipse.scout.rt.platform.IPlatform</code>. This interface contains methods to start and stop the application and to retrieve the <a href="#bean-manager">Bean Manager</a> associated with this application. The class <code>org.eclipse.scout.rt.platform.Platform</code> provides access to the current platform instance. On first access the platform is automatically created and started.</p> 
     </div> 
     <div class="imageblock"> 
      <div class="content"> 
       <img src="images/platformStates.png" alt="platformStates" /> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>During its startup, the platform transitions through several states. Depending on the state of the platform some components may already be initialized and ready to use while others are not available yet.</p> 
     </div> 
     <div class="paragraph"> 
      <p>See enum <code>org.eclipse.scout.rt.platform.IPlatform.State</code> for a description of each state and what may be used in a certain state.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="platform-listener"><a class="anchor" href="#platform-listener"></a>1.1. Platform Listener</h3> 
      <div class="paragraph"> 
       <p>To participate in the application startup or shutdown a platform listener can be created. For this a class implementing <code>org.eclipse.scout.rt.platform.IPlatformListener</code> must be created. The listener is automatically a bean and must therefore not be registered anywhere. See <a href="#bean-manager">Bean Manager</a> to learn more about bean management in Scout and how the listener becomes a bean. As soon as the state of the platform changes the listener will be notified.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 1. A listener that will do some work as soon as the platform has been started.
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">MyListener</span> <span class="directive">implements</span> IPlatformListener {
  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> stateChanged(PlatformEvent event) {
    <span class="keyword">if</span> (event.getState() == IPlatform.State.PlatformStarted) {
      <span class="comment">// do some work as soon as the platform has been started completely</span>
    }
  }
}</code></pre> 
       </div> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> As platform listeners may run as part of the startup or shutdown not the full Scout platform may be available. Depending on the state some tasks cannot be performed or some platform models are not available yet! </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="class-inventory"><a class="anchor" href="#class-inventory"></a>2. Class Inventory</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Scout applications use an inventory containing the classes available together with some meta data about them. This allows finding classes available on the classpath by certain criteria:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p>All subclasses of a certain base class (also known as type hierarchy)</p> </li> 
       <li> <p>All classes having a specific annotation.</p> </li> 
      </ul> 
     </div> 
     <div class="paragraph"> 
      <p>This class inventory can be accessed as described in listing <a href="#lst-ClassInventory">Listing 2</a>.</p> 
     </div> 
     <div id="lst-ClassInventory" class="listingblock"> 
      <div class="title">
       Listing 2. Access the Scout class inventory.
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">IClassInventory classInventory = ClassInventory.get();

<span class="comment">// get all classes below IService</span>
<span class="predefined-type">Set</span>&lt;IClassInfo&gt; services = classInventory.getAllKnownSubClasses(IService.class);

<span class="comment">// get all classes having a Bean annotation (directly on them self).</span>
<span class="predefined-type">Set</span>&lt;IClassInfo&gt; classesHavingBeanAnnot = classInventory.getKnownAnnotatedTypes(Bean.class);</code></pre> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="scout-xml"><a class="anchor" href="#scout-xml"></a>2.1. scout.xml</h3> 
      <div class="paragraph"> 
       <p>In its static initializer, the <code>ClassInventory</code> collects classes in projects containing a resource called META-INF/scout.xml.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Scanning all classes would be unnecessarily slow and consume too much memory. The file <code>scout.xml</code> is just an empty xml file. Scout itself also includes <code>scout.xml</code> files in all its projects.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The format XML was chosen to allow adding exclusions in large projects, but this feature is not implemented right now.</p> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> It is recommended to add an emtpy <code>scout.xml</code> file into the META-INF folder of your projects, such that the classes are available in the 'ClassInventory'. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>Scout uses Jandex <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup> to build the class inventory. The meta data to find classes can be pre-computed during build time into an index file describing the contents of the jar file. See the jandex project for details.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="bean-manager"><a class="anchor" href="#bean-manager"></a>3. Bean Manager</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>The Scout bean manager is a dynamic registry for beans. Beans are normal Java classes usually having some meta data describing the characteristics of the class.</p> 
     </div> 
     <div class="paragraph"> 
      <p>The bean manager can be changed at any time. This means beans can be registered or unregistered while the application is running. For this the bean manager contains methods to register and unregister beans. Furthermore methods to retrieve beans are provided.</p> 
     </div> 
     <div class="paragraph"> 
      <p>The next sections describe how beans are registered, the different meta data of beans, how instances are created, how they can be retrieved and finally how the bean decoration works.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="bean-registration"><a class="anchor" href="#bean-registration"></a>3.1. Bean registration</h3> 
      <div class="paragraph"> 
       <p>Usually beans are registered during application startup. The application startup can be intercepted using platform listeners as described in section <a href="#platform-listener">Platform Listener</a>.</p> 
      </div> 
      <div id="lst-RegisterBeansListener" class="listingblock"> 
       <div class="title">
        Listing 3. A listener that registers a bean (direct class or with meta data).
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">RegisterBeansListener</span> <span class="directive">implements</span> IPlatformListener {
  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> stateChanged(PlatformEvent event) {
    <span class="keyword">if</span> (event.getState() == IPlatform.State.BeanManagerPrepared) {
      <span class="comment">// register the class directly</span>
      BEANS.getBeanManager().registerClass(BeanSingletonClass.class);

      <span class="comment">// Or register with meta information</span>
      BeanMetaData beanData = <span class="keyword">new</span> BeanMetaData(BeanClass.class).withApplicationScoped(<span class="predefined-constant">true</span>);
      BEANS.getBeanManager().registerBean(beanData);
    }
  }
}</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>There is also a predefined bean registration built into the Scout runtime. This automatically registers all classes having an <code>org.eclipse.scout.rt.platform.@Bean</code> annotation. Therefore it is usually sufficient to only annotate a class with <code>@Bean</code> to have it available in the bean manager as shown in listing <a href="#lst-NormalBeanClass">Listing 4</a>.</p> 
      </div> 
      <div id="lst-NormalBeanClass" class="listingblock"> 
       <div class="title">
        Listing 4. An normal bean
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">BeanClass</span> {
}</code></pre> 
       </div> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> As the <code>@Bean</code> annotation is an <code>java.lang.annotation.@Inherited</code> annotation, this automatically registers all child classes too. This means that also interfaces may be <code>@Bean</code> annotated making all implementations automatically available in the bean manager! Furthermore other annotations may be <code>@Bean</code> annotated making all classes holding these annotations automatically to beans as well. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> If you inherit a <code>@Bean</code> annotation from one of you super types but don&#x2019;t want to be automatically registered into the bean manger you can use the <code>org.eclipse.scout.rt.platform.@IgnoreBean</code> annotation. Those classes will then be skipped. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="sect3"> 
       <h4 id="tunneltoserver"><a class="anchor" href="#tunneltoserver"></a>3.1.1. @TunnelToServer</h4> 
       <div class="paragraph"> 
        <p>There is a built in annotation <code>org.eclipse.scout.rt.shared.@TunnelToServer</code>. Interfaces marked with this annotation are called on the server. The server itself ignores this annotation.</p> 
       </div> 
       <div class="paragraph"> 
        <p>To achieve this a bean is registered on client side for each of those interfaces. Because the platform cannot directly create an instance for these beans a specific producer is registered which creates a proxy that delegates the call to the server. Please note that this annotation is not inherited. Therefore if an interface extends a tunnel-to-server interface and the new methods of this interface should be called on the server as well the new child interface has to repeat the annotation!</p> 
       </div> 
       <div class="paragraph"> 
        <p>The proxy is created only once for a specific interface bean.</p> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="bean-scopes"><a class="anchor" href="#bean-scopes"></a>3.2. Bean Scopes</h3> 
      <div class="paragraph"> 
       <p>The most important meta data of a bean is the scope. It describes how many instances of a bean can exist in a single application. There are two different possibilities:</p> 
      </div> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Unlimited instances: Each bean retrieval results in a new instance of the bean. This is the default.</p> </li> 
        <li> <p>Only one instance: There can only be one instance by Scout platform. From an application point of view this can be seen as singleton. The instance is created on first use and each subsequent retrieval of the bean results in this same cached instance.</p> </li> 
       </ul> 
      </div> 
      <div class="paragraph"> 
       <p>As like all bean meta data this characteristic can be provided in two different ways:</p> 
      </div> 
      <div class="olist arabic"> 
       <ol class="arabic"> 
        <li> <p>With a Java annotation on the bean class as shown in the listing <a href="#lst-BeanClass">Listing 5</a>.</p> </li> 
        <li> <p>With bean meta data as shown in listing <a href="#lst-RegisterBeansListener">Listing 3</a>.</p> </li> 
       </ol> 
      </div> 
      <div id="lst-BeanClass" class="listingblock"> 
       <div class="title">
        Listing 5. An application scoped bean using annotations
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">BeanSingletonClass</span> {
}</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>So the Java annotation <code>org.eclipse.scout.rt.platform.@ApplicationScoped</code> describes a bean having singleton characteristics.</p> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> Also <code>@ApplicationScoped</code> is an <code>@Inherited</code> annotation. Therefore all child classes automatically inherit this characteristic like with the <code>@Bean</code> annotation. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="bean-creation"><a class="anchor" href="#bean-creation"></a>3.3. Bean Creation</h3> 
      <div class="paragraph"> 
       <p>It is not only possible to influence the number of instances to be created as learned before. It is also possible to create beans eagerly, execute methods after creation (like constructors) or to delegate the bean creation completely. These topics are described in the next sections.</p> 
      </div> 
      <div class="sect3"> 
       <h4 id="eager-beans"><a class="anchor" href="#eager-beans"></a>3.3.1. Eager Beans</h4> 
       <div class="paragraph"> 
        <p>By default beans are created on each request. An exception are the beans marked to be application scoped (as shown in section <a href="#bean-scopes">Bean Scopes</a>). Those beans are only created on first request (lazy). This means if a bean is never requested while the application is running, there will never be an instance of this class.</p> 
       </div> 
       <div class="paragraph"> 
        <p>But sometimes it is necessary to create beans already at the application startup (eager). This can be done by marking the bean as <code>org.eclipse.scout.rt.platform.@CreateImmediately</code>. All classes holding this annotation must also be marked as <code>@ApplicationScoped</code>! These beans will then be created as part of the application startup.</p> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="constructors"><a class="anchor" href="#constructors"></a>3.3.2. Constructors</h4> 
       <div class="paragraph"> 
        <p>Beans must have empty constructors so that the bean manager can create instances. But furthermore it is possible to mark methods with the <code>javax.annotation.@PostConstruct</code> annotation. Those methods must have no parameters and will be called after the instance have been created.</p> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="bean-producers"><a class="anchor" href="#bean-producers"></a>3.3.3. Bean Producers</h4> 
       <div class="paragraph"> 
        <p>By default all scout beans use a predefined mechanism to create instances as learned in the sections before. This mechanism can be modified for each bean to implement custom bean instance creation logic. For this the bean must be annotated with a producer as shown in listing <a href="#lst-BeanProducer">Listing 6</a>.</p> 
       </div> 
       <div id="lst-BeanProducer" class="listingblock"> 
        <div class="title">
         Listing 6. A bean with custom instanciation logic
        </div> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="annotation">@BeanProducer</span>(MyCustomProducer.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">BeanWithCustomProducer</span> {
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">MyCustomProducer</span>&lt;T&gt; <span class="directive">implements</span> IBeanInstanceProducer&lt;T&gt; {
  <span class="annotation">@Override</span>
  <span class="directive">public</span> T produce(IBean&lt;T&gt; bean) {
    <span class="comment">// create instance of bean</span>
    <span class="keyword">return</span> <span class="predefined-constant">null</span>;
  }
}</code></pre> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="bean-retrieval"><a class="anchor" href="#bean-retrieval"></a>3.4. Bean Retrieval</h3> 
      <div class="paragraph"> 
       <p>To retrieve a bean the class <code>org.eclipse.scout.rt.platform.BEANS</code> should be used. This class provides (amongst others) the following methods:</p> 
      </div> 
      <div id="lst-BeanRetrieval" class="listingblock"> 
       <div class="title">
        Listing 7. How to get beans.
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">BeanSingletonClass bean = BEANS.get(BeanSingletonClass.class);
BeanClass beanOrNull = BEANS.opt(BeanClass.class);
<span class="predefined-type">List</span>&lt;BeanWithCustomProducer&gt; all = BEANS.all(BeanWithCustomProducer.class);</code></pre> 
       </div> 
      </div> 
      <div class="ulist"> 
       <ul> 
        <li> <p>The <code>get()</code> method throws an exception if there is not a single bean result. So if no bean can be found or if multiple equivalent bean candidates are available this method fails!</p> </li> 
        <li> <p>The <code>opt()</code> method requires a single or no bean result. It fails if multiple equivalent bean candidates are available and returns <code>null</code> if no one can be found.</p> </li> 
        <li> <p>The <code>all()</code> method returns all beans in the correct order. The list may also contain no beans at all.</p> </li> 
       </ul> 
      </div> 
      <div class="paragraph"> 
       <p>There are now two more annotations that have an effect on which beans are returned if multiple beans match a certain class. Consider the following example bean hierarchy:</p> 
      </div> 
      <div id="img-beanHierarchy" class="imageblock"> 
       <div class="content"> 
        <img src="images/beanHierarchy.png" alt="beanHierarchy" /> 
       </div> 
       <div class="title">
        Figure 1. A sample bean hierarchy.
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>In this situation 4 bean candidates are available: MyServiceImpl, MyServiceMod, MySpecialVersion and AnotherVersion. But which one is returned by <code>BEANS.get(IMyService.class)</code>? Or by <code>BEANS.get(MySpecialVersion.class)</code>? This can be influenced with the <code>org.eclipse.scout.rt.platform.@Order</code> and <code>org.eclipse.scout.rt.platform.@Replace</code> annotations. The next sections describe the idea behind these annotations and gives some examples.</p> 
      </div> 
      <div class="sect3"> 
       <h4 id="order"><a class="anchor" href="#order"></a>3.4.1. @Order</h4> 
       <div class="paragraph"> 
        <p>This annotation works exactly the same as in the Scout user interface where it brings classes into an order. It allows to assign a <code>double</code> value to a class. All beans of a certain type are sorted according to this value in ascending order. This means a low order value is equivalent with a low position in a list (come first).</p> 
       </div> 
       <div class="paragraph"> 
        <p>Please note that the <code>@Order</code> annotation is not inherited so that each bean must declare its own value where it fits in.</p> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody>
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> The <code>@Order</code> annotation value may be inherited in case it replaces. See the next section for details. </td> 
          </tr> 
         </tbody>
        </table> 
       </div> 
       <div class="paragraph"> 
        <p>If a bean does not declare an order value, the default of <code>5000</code> is used. Scout itself uses orders from <code>4001</code> to <code>5999</code>. So for user applications the value <code>4000</code> and below can be used to declare more important beans. For testing bean mocks the value <code>-10'000</code> can be used which then usually comes before each normal Scout or application bean.</p> 
       </div> 
       <div class="imageblock"> 
        <div class="content"> 
         <img src="images/defaultOrders.png" alt="defaultOrders" /> 
        </div> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="replace"><a class="anchor" href="#replace"></a>3.4.2. @Replace</h4> 
       <div class="paragraph"> 
        <p>The <code>@Replace</code> annotation can be set to beans having another bean as super class. This means that the original bean (the super class) is no longer available in the Scout bean manager and only the new child class is returned.</p> 
       </div> 
       <div class="paragraph"> 
        <p>If the replacing bean (the child class) has no own <code>@Order</code> annotation defined but the replaced bean (the super class) has an <code>@Order</code> value, this order is inherited to the child. This is the only special case in which the <code>@Order</code> annotation value is inherited!</p> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="examples"><a class="anchor" href="#examples"></a>3.4.3. Examples</h4> 
       <div class="paragraph"> 
        <p>The next examples use the bean situation as shown in figure <a href="#img-beanHierarchy">Figure 1</a>. In this situation the bean manager actually contains 3 beans:</p> 
       </div> 
       <div class="olist arabic"> 
        <ol class="arabic"> 
         <li> <p><code>AnotherVersion</code> with <code>@Order</code> of 4000. This bean has no own order and would therefore get the default order of 5000. But because it is replacing another bean it inherits its order.</p> </li> 
         <li> <p><code>MyServiceMod</code> with <code>@Order</code> of 4500. This bean declares its own order.</p> </li> 
         <li> <p><code>MyServiceImpl</code> with <code>@Order</code> of 5000. This bean gets the default order of 5000 because it does not declare an order.</p> </li> 
        </ol> 
       </div> 
       <div class="paragraph"> 
        <p>The bean <code>MySpecialVersion</code> is not part of the bean manager because it has been replaced by <code>AnotherVersion</code>.</p> 
       </div> 
       <div class="ulist"> 
        <ul> 
         <li> <p><code>BEANS.get(IMyService.class)</code>: Returns <code>AnotherVersion</code> instance. The result cannot be an exact match because the requested type is an interface. Therefore of all candidates there is one single candidate with lowest order (comes first).</p> </li> 
         <li> <p><code>BEANS.get(MyServiceImpl.class)</code>: Returns <code>MyServiceImpl</code> because there is an exact match available.</p> </li> 
         <li> <p><code>BEANS.get(MySpecialVersion.class)</code>: Returns <code>AnotherVersion</code>. The result cannot be an exact match because there is no exact bean with this class in the bean manager (<code>MySpecialVersion</code> has been replaced). Therefore only <code>AnotherVersion</code> remains as candidate in the hierarchy below <code>MySpecialVersion</code>.</p> </li> 
         <li> <p><code>BEANS.get(MyServiceMod.class)</code>: Returns <code>MyServiceMod</code> because there is no other candidate.</p> </li> 
         <li> <p><code>BEANS.all(IMyService.class)</code>: Returns a list with all beans sorted by <code>@Order</code>. This results in: <code>AnotherVersion</code>, <code>MyServiceMod</code>, <code>MyServiceImpl</code>.</p> </li> 
        </ul> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody>
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> If <code>MyServiceMod</code> would have no <code>@Order</code> annotation, there would be two bean candidates available with the same default order of 5000: <code>MyServiceImpl</code> and <code>MyServiceMod</code>. In this case a call to <code>BEANS.get(IMyService.class)</code> would fail because there are several equivalent candidates. Equivalent candidates means they have the same <code>@Order</code> value and the system cannot decide which one is the right one. </td> 
          </tr> 
         </tbody>
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="bean-decoration"><a class="anchor" href="#bean-decoration"></a>3.5. Bean Decoration</h3> 
      <div class="paragraph"> 
       <p>Bean decorations allow to wrap interfaces with a proxy to intercept each method call to the interface of a bean and apply some custom logic. For this a <code>IBeanDecorationFactory</code> has to be implemented. This is one single factory instance for the entire application. It decides which decorators are created for a bean request. The factory is asked for decorators on every bean retrieval. This allows to write bean decoration factories depending on dynamic conditions.</p> 
      </div> 
      <div class="paragraph"> 
       <p>As bean decoration factories are beans themselves, it is sufficient to create an implementation of <code>org.eclipse.scout.rt.platform.IBeanDecorationFactory</code> and to ensure this implementation is used (see <a href="#bean-retrieval">Bean Retrieval</a>). This factory receives the bean to be decorated and the originally requested bean class to decide which decorators it should create. In case no decoration is required the factory may return <code>null</code>. Then the original bean is used without decorations.</p> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> Decorations are only supported if the class obtained by the bean manager (e.g. by using <code>BEANS.get()</code>) is an interface! </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> It is best practice to mark all annotations that are interpreted in the bean decoration factory with the annotation <code>org.eclipse.scout.rt.platform.@BeanInvocationHint</code>. However this annotation has no effect at runtime and is only for documentation reasons. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>The sample in listing <a href="#lst-BeanDecorationFactory">Listing 8</a> wraps each call to the server with a profiler decorator that measures how long a server call takes.</p> 
      </div> 
      <div id="lst-BeanDecorationFactory" class="listingblock"> 
       <div class="title">
        Listing 8. Bean decoration example.
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Replace</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ProfilerDecorationFactory</span> <span class="directive">extends</span> SimpleBeanDecorationFactory {
  <span class="annotation">@Override</span>
  <span class="directive">public</span> &lt;T&gt; IBeanDecorator&lt;T&gt; decorate(IBean&lt;T&gt; bean, <span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> T&gt; queryType) {
    <span class="keyword">return</span> <span class="keyword">new</span> BackendCallProfilerDecorator&lt;&gt;(<span class="local-variable">super</span>.decorate(bean, queryType));
  }
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">BackendCallProfilerDecorator</span>&lt;T&gt; <span class="directive">implements</span> IBeanDecorator&lt;T&gt; {

  <span class="directive">private</span> <span class="directive">final</span> IBeanDecorator&lt;T&gt; m_inner;

  <span class="directive">public</span> BackendCallProfilerDecorator(IBeanDecorator&lt;T&gt; inner) {
    m_inner = inner;
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">Object</span> invoke(IBeanInvocationContext&lt;T&gt; context) {
    <span class="directive">final</span> <span class="predefined-type">String</span> className;
    <span class="keyword">if</span> (context.getTargetObject() == <span class="predefined-constant">null</span>) {
      className = context.getTargetMethod().getDeclaringClass().getSimpleName();
    }
    <span class="keyword">else</span> {
      className = context.getTargetObject().getClass().getSimpleName();
    }

    <span class="predefined-type">String</span> timerName = className + <span class="string"><span class="delimiter">'</span><span class="content">.</span><span class="delimiter">'</span></span> + context.getTargetMethod().getName();
    TuningUtility.startTimer();
    <span class="keyword">try</span> {
      <span class="keyword">if</span> (m_inner != <span class="predefined-constant">null</span>) {
        <span class="comment">// delegate to the next decorator in the chain</span>
        <span class="keyword">return</span> m_inner.invoke(context);
      }
      <span class="comment">// forward to real bean</span>
      <span class="keyword">return</span> context.proceed();
    }
    <span class="keyword">finally</span> {
      TuningUtility.stopTimer(timerName);
    }
  }
}</code></pre> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="configuration-management"><a class="anchor" href="#configuration-management"></a>4. Configuration Management</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Applications usually require some kind of configuration mechanism to use the same binaries in a different environment or situation. Scout applications provide a configuration mechanism using properties files <sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</sup>.</p> 
     </div> 
     <div class="paragraph"> 
      <p>For each property a class cares about default values and value validation. These classes share the <code>org.eclipse.scout.rt.platform.config.IConfigProperty</code> interface and are normal application scoped beans providing access to a specific configuration value as shown in listing <a href="#lst-ConfigProperties">Listing 9</a>.</p> 
     </div> 
     <div id="lst-ConfigProperties" class="listingblock"> 
      <div class="title">
       Listing 9. A configuration property of type Long.
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.eclipse.scout.rt.platform.config.AbstractLongConfigProperty</span>;

<span class="comment">/** * Property of data type {@link Long} with key 'my.custom.timeout' and default value '3600L'. */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyCustomTimeoutProperty</span> <span class="directive">extends</span> AbstractLongConfigProperty {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> getKey() {
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">my.custom.timeout</span><span class="delimiter">&quot;</span></span>; <i class="conum" data-value="1"></i><b>(1)</b>
  }

  <span class="annotation">@Override</span>
  <span class="directive">protected</span> <span class="predefined-type">Long</span> getDefaultValue() {
    <span class="keyword">return</span> <span class="integer">3600L</span>; <i class="conum" data-value="2"></i><b>(2)</b>
  }
}</code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>key</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>default value</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>To read the configured value you can use the <code>CONFIG</code> class as demonstrated in <a href="#lst-getPropertyValue">Listing 10</a>.</p> 
     </div> 
     <div id="lst-getPropertyValue" class="listingblock"> 
      <div class="title">
       Listing 10. Read the configured value in your code.
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Long</span> value = CONFIG.getPropertyValue(MyCustomTimeoutProperty.class);</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>The given property key is searched in the following environments:</p> 
     </div> 
     <div class="olist arabic"> 
      <ol class="arabic"> 
       <li> <p>In the system properties (<code>java.lang.System.getProperty(String)</code>).</p> </li> 
       <li> <p>In the properties file. The properties file can be</p> 
        <div class="olist loweralpha"> 
         <ol class="loweralpha" type="a"> 
          <li> <p>a file on the local filesystem where the system property with key <code>config.properties</code> holds the absolute path to the file or</p> </li> 
          <li> <p>a file on the classpath with path <code>/config.properties</code> (recommended).</p> </li> 
         </ol> 
        </div> </li> 
       <li> <p>In the environment variables of the system (<code>java.lang.System.getenv(String)</code>).</p> </li> 
      </ol> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="testing"><a class="anchor" href="#testing"></a>5. Testing</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>TODO</p> 
     </div> 
    </div> 
   </div> 
   <h1 id="exception-handling" class="sect0"><a class="anchor" href="#exception-handling"></a>Exception Handling</h1> 
   <div class="openblock partintro"> 
    <div class="content">
      Exceptions can be logged via SLF4J Logger, or given to exception handler for centralized, consistent exception handling, or translated into other exceptions. Scout provides some few exceptions, which are used by the framework. They all are runtime exceptions, and typically inherit from 
     <a href="#platformexception">PlatformException</a>. 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="platformexception"><a class="anchor" href="#platformexception"></a>6. PlatformException</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Base runtime exception of the Scout platform, which allows for message formatting anchors and context information to be associated.</p> 
     </div> 
     <div class="paragraph"> 
      <p>There is a single constructor which accepts the exception&#x2019;s message, and optionally a variable number of arguments. Typically, a potential cause is given as its argument. The message allows further the use of formatting anchors in the form of {} pairs. The respective formatting arguments are provided via the constructor&#x2019;s <em>varArg</em> parameter. If the last argument is of the type <code>Throwable</code> and not referenced as formatting anchor in the message, that <code>Throwable</code> is used as the exception&#x2019;s cause. Internally, SLF4J <code>MessageFormatter</code> is used to provide substitution functionality. Hence, The format is the very same as if using SLF4j Logger.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Further, <code>PlatformException</code> allows to associate context information, which are available in Log4j <em>diagnostic context map</em> (MDC) upon logging the exception.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 11. PlatformException examples
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="exception">Exception</span> cause = <span class="keyword">new</span> <span class="exception">Exception</span>();

<span class="comment">// Create a PlatformException with a message</span>
<span class="keyword">new</span> PlatformException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failed to persist data</span><span class="delimiter">&quot;</span></span>);

<span class="comment">// Create a PlatformException with a message and cause</span>
<span class="keyword">new</span> PlatformException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failed to persist data</span><span class="delimiter">&quot;</span></span>, cause);

<span class="comment">// Create a PlatformException with a message with formatting anchors</span>
<span class="keyword">new</span> PlatformException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failed to persist data [entity={}, id={}]</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>, <span class="integer">123</span>);

<span class="comment">// Create a PlatformException with a message containing formatting anchors and a cause</span>
<span class="keyword">new</span> PlatformException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failed to persist data [entity={}, id={}]</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>, <span class="integer">123</span>, cause);

<span class="comment">// Create a PlatformException with context information associated</span>
<span class="keyword">new</span> PlatformException(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failed to persist data</span><span class="delimiter">&quot;</span></span>, cause)
    .withContextInfo(<span class="string"><span class="delimiter">&quot;</span><span class="content">entity</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>)
    .withContextInfo(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="integer">123</span>);</code></pre> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="processingexception"><a class="anchor" href="#processingexception"></a>6.1. ProcessingException</h3> 
      <div class="paragraph"> 
       <p>Represents a <a href="#platformexception">PlatformException</a> and is thrown in case of a processing failure, and which can be associated with an exception error code and severity.</p> 
      </div> 
      <div class="sect3"> 
       <h4 id="vetoexception"><a class="anchor" href="#vetoexception"></a>6.1.1. VetoException</h4> 
       <div class="paragraph"> 
        <p>Represents a <a href="#processingexception">ProcessingException</a> with VETO character. If thrown server-side, exceptions of this type are transported to the client and typically visualized in the form of a message box.</p> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="assertionexception"><a class="anchor" href="#assertionexception"></a>6.2. AssertionException</h3> 
      <div class="paragraph"> 
       <p>Represents a <a href="#platformexception">PlatformException</a> and indicates an assertion error about the application&#x2019;s assumptions about expected values.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="threadinterruptedexception"><a class="anchor" href="#threadinterruptedexception"></a>6.3. ThreadInterruptedException</h3> 
      <div class="paragraph"> 
       <p>Represents a <a href="#platformexception">PlatformException</a> and indicates that a thread was interrupted while waiting for some condition to become true, e.g. while waiting for a job to complete. Unlike <code>java.lang.InterruptedException</code>, the thread&#x2019;s interrupted status is not cleared when catching this exception.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="futurecancelledexception"><a class="anchor" href="#futurecancelledexception"></a>6.4. FutureCancelledException</h3> 
      <div class="paragraph"> 
       <p>Represents a <a href="#platformexception">PlatformException</a> and indicates that the result of a job cannot be retrieved, or the IFuture&#x2019;s completion not be awaited because the job was cancelled.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="timedoutexception"><a class="anchor" href="#timedoutexception"></a>6.5. TimedOutException</h3> 
      <div class="paragraph"> 
       <p>Represents a <a href="#platformexception">PlatformException</a> and indicates that the maximal wait time elapsed while waiting for some condition to become true, e.g. while waiting a job to complete.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="transactionrequiredexception"><a class="anchor" href="#transactionrequiredexception"></a>6.6. TransactionRequiredException</h3> 
      <div class="paragraph"> 
       <p>Represents a <a href="#platformexception">PlatformException</a> and is thrown if a ServerRunContext requires a transaction to be available.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="exceptionhandler"><a class="anchor" href="#exceptionhandler"></a>7. ExceptionHandler</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>An exception handler is the central point for exception handling. It provides a single method 'handle' which accepts a <code>Throwable</code>, and which never throws an exception. It is implemented as a bean, meaning managed by the bean manager to allow easy replacement, e.g. to use a different handler when running client or server side. By default, a <a href="#processingexception">ProcessingException</a> is logged according to its severity, a <a href="#vetoexception">VetoException</a>, <a href="#threadinterruptedexception">ThreadInterruptedException</a> or <a href="#futurecancelledexception">FutureCancelledException</a> logged in <em>DEBUG</em> level, and any other exception logged as an <em>ERROR</em>. If running client side, exceptions are additionally visualized and showed to the user.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="exception-translator"><a class="anchor" href="#exception-translator"></a>8. Exception Translator</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Exception translators are used to translate an exception into another exception.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Also, they unwrap the cause of wrapper exceptions, like <code>UndeclaredThrowableException</code>, or <code>InvocationTargetException</code>, or <code>ExecutionException</code>. If the exception is of the type <code>Error</code>, it is normally not translated, but re-thrown instead. That is because an <code>Error</code> indicates a serious problem due to an abnormal condition.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="defaultexceptiontranslator"><a class="anchor" href="#defaultexceptiontranslator"></a>8.1. DefaultExceptionTranslator</h3> 
      <div class="paragraph"> 
       <p>Use this translator to work with checked exceptions and runtime exceptions, but not with <code>Throwable</code>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>If given an <code>Exception</code>, or a <code>RuntimeException</code>, or if being a subclass thereof, that exception is returned as given. Otherwise, a <a href="#platformexception">PlatformException</a> is returned which wraps the given Throwable.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="defaultruntimeexceptiontranslator"><a class="anchor" href="#defaultruntimeexceptiontranslator"></a>8.2. DefaultRuntimeExceptionTranslator</h3> 
      <div class="paragraph"> 
       <p>Use this translator to work with runtime exceptions. When working with <a href="#runcontext">RunContext</a> or <a href="#ifuture">IFuture</a>, some methods optionally accept a translator. If not specified, this translator is used by default.</p> 
      </div> 
      <div class="paragraph"> 
       <p>If given a <code>RuntimeException</code>, it is returned as given. For a checked exception, a <a href="#platformexception">PlatformException</a> is returned which wraps the given checked exception.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="platformexceptiontranslator"><a class="anchor" href="#platformexceptiontranslator"></a>8.3. PlatformExceptionTranslator</h3> 
      <div class="paragraph"> 
       <p>Use this translator to work with <a href="#platformexception">PlatformException</a>s.</p> 
      </div> 
      <div class="paragraph"> 
       <p>If given a <a href="#platformexception">PlatformException</a>, it is returned as given. For all other exceptions (checked or unchecked), a <a href="#platformexception">PlatformException</a> is returned which wraps the given exception.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Typically, this translator is used if you require to add some context information via <code>PlatformException.withContextInfo(String, Object, Object)</code>.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 12. PlatformException examples
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">try</span> {
  <span class="comment">// do something</span>
}
<span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
  <span class="keyword">throw</span> BEANS.get(PlatformExceptionTranslator.class).translate(e)
      .withContextInfo(<span class="string"><span class="delimiter">&quot;</span><span class="content">cid</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">12345</span><span class="delimiter">&quot;</span></span>)
      .withContextInfo(<span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Subject</span>.getSubject(<span class="predefined-type">AccessController</span>.getContext()))
      .withContextInfo(<span class="string"><span class="delimiter">&quot;</span><span class="content">job</span><span class="delimiter">&quot;</span></span>, IFuture.CURRENT.get());
}</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="nullexceptiontranslator"><a class="anchor" href="#nullexceptiontranslator"></a>8.4. NullExceptionTranslator</h3> 
      <div class="paragraph"> 
       <p>Use this translator to work with <code>Throwable</code> as given.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Also, if given a wrapped exception like <code>UndeclaredThrowableException</code>, <code>InvocationTargetException</code> or <code>ExecutionException</code>, that exception is returned as given without unwrapping its cause.</p> 
      </div> 
      <div class="paragraph"> 
       <p>For instance, this translator can be used if working with the Job API, e.g. to distinguish between a <a href="#futurecancelledexception">FutureCancelledException</a> thrown by the job&#x2019;s runnable, or because the job was effectively cancelled.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="exception-logging"><a class="anchor" href="#exception-logging"></a>9. Exception Logging</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Scout framework logs via SLF4J (Simple Logging Facade for Java). It serves as a simple facade or abstraction for various logging frameworks (e.g. java.util.logging, logback, log4j) allowing the end user to plug in the desired logging framework at deployment time.</p> 
     </div> 
     <div class="paragraph"> 
      <p>SLF4J allows the use of formatting anchors in the form of {} pairs in the message which will be replaced by the respective argument. If the last argument is of the type Throwable and not referenced as formatting anchor in the message, that <code>Throwable</code> is used as the exception.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 13. Logging examples
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="exception">Exception</span> e = <span class="keyword">new</span> <span class="exception">Exception</span>();

org.slf4j.Logger logger = LoggerFactory.getLogger(getClass());

<span class="comment">// Log a message</span>
logger.error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failed to persist data</span><span class="delimiter">&quot;</span></span>);

<span class="comment">// Log a message with exception</span>
logger.error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failed to persist data</span><span class="delimiter">&quot;</span></span>, e);

<span class="comment">// Log a message with formatting anchors</span>
logger.error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failed to persist data [entity={}, id={}]</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>, <span class="integer">123</span>);

<span class="comment">// Log a message and exception with a message containing formatting anchors</span>
logger.error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failed to persist data [entity={}, id={}]</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>, <span class="integer">123</span>, e);</code></pre> 
      </div> 
     </div> 
    </div> 
   </div> 
   <h1 id="jobmanager" class="sect0"><a class="anchor" href="#jobmanager"></a>JobManager</h1> 
   <div class="openblock partintro"> 
    <div class="content">
      Scout provides a job manager based on Java Executors framework to run tasks in parallel, and on Quartz Trigger API to support for schedule plans and to compute firing times. A task (aka job) can be scheduled to commence execution either immediately upon being scheduled, or delayed some time in the future. A job can be single executing, or recurring based on some schedule plan. The job manager itself is implemented as an application scoped bean, meaning that it is a singleton which exists once in the web application. 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="functionality"><a class="anchor" href="#functionality"></a>10. Functionality</h2> 
    <div class="sectionbody"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>immediate, delayed or timed execution</p> </li> 
       <li> <p>single (one-shot) or repetitive execution (based on Quartz schedule plans)</p> </li> 
       <li> <p>listen for job lifecycle events</p> </li> 
       <li> <p>wait for job completion</p> </li> 
       <li> <p>job cancellation</p> </li> 
       <li> <p>limitation of the maximal concurrently level among jobs</p> </li> 
       <li> <p><code>RunContext</code> based execution</p> </li> 
       <li> <p>configurable thread pool size (core pool size, max pool size)</p> </li> 
       <li> <p>association of job execution hints to select jobs (e.g. to cancel or await job&#x2019;s completion)</p> </li> 
       <li> <p>named jobs and threads to ease debugging</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="job"><a class="anchor" href="#job"></a>11. Job</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A job is defined as some work to be executed asynchronously and is associated with a <code>JobInput</code> to describe how to run that work. The work is given to the job manager in the form of a <code>Runnable</code> or <code>Callable</code>. The only difference is, that a <code>Runnable</code> represents a 'fire-and-forget' action, meaning that the submitter of the job does not expect the job to return a result. On the other hand, a <code>Callable</code> returns the computation&#x2019;s result, which the submitter can await for. Of course, a runnable&#x2019;s completion can also be waited for.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 14. Work that does not return a result
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Work</span> <span class="directive">implements</span> IRunnable {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// do some work</span>
  }
}</code></pre> 
      </div> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 15. Work that returns a computation result
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">WorkWithResult</span> <span class="directive">implements</span> <span class="predefined-type">Callable</span>&lt;<span class="predefined-type">String</span>&gt; {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> call() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// do some work</span>
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span>;
  }
}</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>Upon scheduling a job, the job manager returns a <code>IFuture</code> to interact with the job, e.g. to cancel its execution, or to await its completion. The job itself can also access its <code>IFuture</code>, namely via <code>IFuture.CURRENT()</code> ThreadLocal.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 16. Accessing the Future from within the job
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Job</span> <span class="directive">implements</span> IRunnable {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    IFuture&lt;?&gt; myFuture = IFuture.CURRENT.get();
  }
}</code></pre> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="scheduling-a-job"><a class="anchor" href="#scheduling-a-job"></a>12. Scheduling a Job</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>The job manager provides two scheduling methods, which only differ in the work they accept for execution (callable or runnable).</p> 
     </div> 
     <div class="listingblock"> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">IFuture&lt;<span class="predefined-type">Void</span>&gt; schedule(IRunnable runnable, JobInput input); <i class="conum" data-value="1"></i><b>(1)</b>

&lt;RESULT&gt; IFuture&lt;RESULT&gt; schedule(<span class="predefined-type">Callable</span>&lt;RESULT&gt; callable, JobInput input); <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Use to schedule a runnable which does not return a result to the submitter</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Use to schedule a callable which does return a result to the submitter</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>The second and mandatory argument to be provided is the <code>JobInput</code>, which tells the job manager how to run the job. Learn more about <a href="#jobinput">JobInput</a>.</p> 
     </div> 
     <div class="paragraph"> 
      <p>The following snippet illustrates how a job is actually scheduled.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 17. Schedule a job
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">IJobManager jobManager = BEANS.get(IJobManager.class); <i class="conum" data-value="1"></i><b>(1)</b>

jobManager.schedule(<span class="keyword">new</span> IRunnable() { <i class="conum" data-value="2"></i><b>(2)</b>

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// do something</span>
  }
}, BEANS.get(JobInput.class)); <i class="conum" data-value="3"></i><b>(3)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Obtain the job manager via bean manager (application scoped bean)</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Provide the work to be executed (either runnable or callable)</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="3"></i><b>3</b></td> 
         <td>Provide the <code>JobInput</code> to instrument job execution</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>This looks a little bit clumsy, which is why Scout provides you with the <code>Jobs</code> class to simplify dealing with the job manager, and to support you in the creation of job related artifacts like <code>JobInput</code>, filter builders and more. Most importantly, it allows to schedule jobs in a shorter and more readable form.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 18. Schedule a job via Jobs helper class
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// do something</span>
  }
}, Jobs.newInput());</code></pre> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="jobinput"><a class="anchor" href="#jobinput"></a>13. JobInput</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>The job input tells the job manager how to run the job. It further names the job to ease debugging, declares in which context to run the job, and how to deal with unhandled exceptions. The job input itself is a bean, useful if adding some additional features to the job manager. The API of <code>JobInput</code> supports for method chaining for reduced and more solid code.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 19. Schedule a job and control execution via JobInput
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// do something</span>
  }
}, Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">job name</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
    .withRunContext(ClientRunContexts.copyCurrent()) <i class="conum" data-value="2"></i><b>(2)</b>
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withStartIn(<span class="integer">10</span>, <span class="predefined-type">TimeUnit</span>.SECONDS) <i class="conum" data-value="3"></i><b>(3)</b>
        .withSchedule(FixedDelayScheduleBuilder.repeatForever(<span class="integer">5</span>, <span class="predefined-type">TimeUnit</span>.SECONDS))) <i class="conum" data-value="4"></i><b>(4)</b>
    .withExceptionHandling(<span class="keyword">new</span> ExceptionHandler() { <i class="conum" data-value="5"></i><b>(5)</b>

      <span class="annotation">@Override</span>
      <span class="directive">public</span> <span class="type">void</span> handle(<span class="predefined-type">Throwable</span> t) {
        <span class="predefined-type">System</span>.err.println(t);
      }
    }, <span class="predefined-constant">true</span>));</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>This snippet instructs the job manager to run the job as following:</p> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Give the job a name.</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Run the job in the current calling context, meaning in the very same context as the submitter is running when giving this job to the job manager. By copying the current context, the job will also be cancelled upon cancellation of the current <code>RunContext</code>.</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="3"></i><b>3</b></td> 
         <td>Commence execution in 10 seconds (delayed execution).</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="4"></i><b>4</b></td> 
         <td>Execute the job repeatedly, with a delay of 5 seconds between the termination of one and the commencement of the next execution. Also, repeat the job infinitely, until being cancelled.</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="5"></i><b>5</b></td> 
         <td>Print any uncaught exception to the error console, and do not propagate the exception to the submitter, nor cancel the job upon an uncaught exception.</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>The following paragraphs describe the functionality of <code>JobInput</code> in more detail.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="jobinput-withname"><a class="anchor" href="#jobinput-withname"></a>13.1. JobInput.withName</h3> 
      <div class="paragraph"> 
       <p>To optionally specify the name of the job, which is used to name the worker thread (only in development environment) and for logging purpose. Optionally, <em>formatting anchors</em> in the form of {} pairs can be used in the name, which will be replaced by the respective argument.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sending emails [from={}, to={}]</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">frank</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">john@eclipse.org, jack@eclipse.org</span><span class="delimiter">&quot;</span></span>);</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jobinput-withruncontext"><a class="anchor" href="#jobinput-withruncontext"></a>13.2. JobInput.withRunContext</h3> 
      <div class="paragraph"> 
       <p>To optionally specify the <code>RunContext</code> to be installed during job execution. The <code>RunMonitor</code> associated with the <code>RunContext</code> will be used as the job&#x2019;s monitor, meaning that cancellation requests to the job future or the context&#x2019;s monitor are equivalent. If no context is given, the job manager ensures a monitor to be installed, so that executing code can always query its cancellation status via <code>RunMonitor.CURRENT.get().isCancelled()</code>.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jobinput-withexecutiontrigger"><a class="anchor" href="#jobinput-withexecutiontrigger"></a>13.3. JobInput.withExecutionTrigger</h3> 
      <div class="paragraph"> 
       <p>To optionally set the trigger to define the schedule upon which the job will commence execution. If not set, the job will commence execution immediately after being scheduled, and will execute exactly once.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The trigger mechanism is provided by Quartz Scheduler, meaning that you can profit from the powerful Quartz schedule capabilities.</p> 
      </div> 
      <div class="paragraph"> 
       <p>For more information, see <a href="http://www.quartz-scheduler.org" class="bare">http://www.quartz-scheduler.org</a>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Use the static factory method <code>Jobs.newExecutionTrigger()</code> to get an instance:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Schedules a delayed single executing job</span>
Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">job</span><span class="delimiter">&quot;</span></span>)
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withStartIn(<span class="integer">10</span>, <span class="predefined-type">TimeUnit</span>.SECONDS));

<span class="comment">// Schedules a repeatedly running job at a fixed rate (every hour), which ends in 24 hours</span>
Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">job</span><span class="delimiter">&quot;</span></span>)
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withEndIn(<span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.DAYS)
        .withSchedule(SimpleScheduleBuilder.repeatHourlyForever()));

<span class="comment">// Schedules a job which runs at 10:15am every Monday, Tuesday, Wednesday, Thursday and Friday</span>
Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">job</span><span class="delimiter">&quot;</span></span>)
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withSchedule(CronScheduleBuilder.cronSchedule(<span class="string"><span class="delimiter">&quot;</span><span class="content">0 15 10 ? * MON-FRI</span><span class="delimiter">&quot;</span></span>)));</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>Learn more about <a href="#executiontrigger">ExecutionTrigger</a>.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jobinput-withexecutionsemaphore"><a class="anchor" href="#jobinput-withexecutionsemaphore"></a>13.4. JobInput.withExecutionSemaphore</h3> 
      <div class="paragraph"> 
       <p>To optionally control the maximal concurrently level among jobs assigned to the same semaphore.</p> 
      </div> 
      <div class="paragraph"> 
       <p>With a semaphore in place, this job only commences execution, once a permit is free or gets available. If free, the job commences execution immediately at the next reasonable opportunity, unless no worker thread is available.</p> 
      </div> 
      <div class="paragraph"> 
       <p>A semaphore initialized to one allows to run jobs in a mutually exclusive manner, and a semaphore initialized to zero to run no job at all. The number of total permits available can be changed at any time, which allows to adapt the maximal concurrency level to some dynamic criteria like time of day or system load. However, a semaphore can be sealed, meaning that the number of permits cannot be changed anymore, and any attempts will be rejected.</p> 
      </div> 
      <div class="paragraph"> 
       <p>A new semaphore instance can be obtained via <code>Jobs</code> class.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">IExecutionSemaphore semaphore = Jobs.newExecutionSemaphore(<span class="integer">5</span>); <i class="conum" data-value="1"></i><b>(1)</b>

<span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; <span class="integer">100</span>; i++) {
  Jobs.schedule(<span class="keyword">new</span> IRunnable() { <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
      <span class="comment">// doing something</span>
    }
  }, Jobs.newInput()
      .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">job-{}</span><span class="delimiter">&quot;</span></span>, i)
      .withExecutionSemaphore(semaphore)); <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Create a new <code>ExecutionSemaphore</code> via <code>Jobs</code> class. The semaphore is initialized with 5 permits, meaning that at any given time, there are no more than 5 jobs running concurrently.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Schedule 100 jobs in a row.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="3"></i><b>3</b></td> 
          <td>Set the semaphore to limit the maximal concurrency level to 5 jobs.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>Learn more about <a href="#executionsemaphore">ExecutionSemaphore</a>.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jobinput-withexecutionhint"><a class="anchor" href="#jobinput-withexecutionhint"></a>13.5. JobInput.withExecutionHint</h3> 
      <div class="paragraph"> 
       <p>To associate the job with an execution hint. An execution hint is simply a marker to mark a job, and can be evaluated by filters to select jobs, e.g. to listen to job lifecycle events of some particular jobs, or to wait for some particular jobs to complete, or to cancel some particular jobs. A job may have multiple hints associated. Further, hints can be registered directly on the future via <code>IFuture.addExecutionHint(hint)</code>, or removed via <code>IFuture.removeExecutionHint(hint)</code>.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jobinput-withexceptionhandling"><a class="anchor" href="#jobinput-withexceptionhandling"></a>13.6. JobInput.withExceptionHandling</h3> 
      <div class="paragraph"> 
       <p>To control how to deal with uncaught exceptions. By default, an uncaught exception is handled by <code>ExceptionHandler</code> bean and then propagated to the submitter, unless the submitter is not waiting for the job to complete via <code>IFuture.awaitDoneAndGet()</code>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>This method expects two arguments: an optional exception handler, and a boolean flag indicating whether to swallow exceptions. 'Swallow' is independent of the specified exception handler, and indicates whether an exception should be propagated to the submitter, or swallowed otherwise.</p> 
      </div> 
      <div class="paragraph"> 
       <p>If running a repetitive job with swallowing set to <code>true</code>, the job will continue its repetitive execution upon an uncaught exception. If set to false, the execution would exit.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jobinput-withthreadname"><a class="anchor" href="#jobinput-withthreadname"></a>13.7. JobInput.withThreadName</h3> 
      <div class="paragraph"> 
       <p>To set the thread name of the worker thread that will execute the job.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jobinput-withexpirationtime"><a class="anchor" href="#jobinput-withexpirationtime"></a>13.8. JobInput.withExpirationTime</h3> 
      <div class="paragraph"> 
       <p>To set the maximal expiration time upon which the job must commence execution. If elapsed, the job is cancelled and does not commence execution. By default, a job never expires.</p> 
      </div> 
      <div class="paragraph"> 
       <p>For a job that executes once, the expiration is evaluated just before it commences execution. For a job with a repeating schedule, it is evaluated before every single execution.</p> 
      </div> 
      <div class="paragraph"> 
       <p>In contrast, the trigger&#x2019;s end time specifies the time at which the trigger will no longer fire. However, if fired, the job may not be executed immediately at this time, which depends on whether having to compete for an execution permit first. So the end time may already have elapsed once commencing execution. In contrast, the expiration time is evaluated just before starting execution.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="ifuture"><a class="anchor" href="#ifuture"></a>14. IFuture</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A future represents the result of an asynchronous computation, and is returned by the job manager upon scheduling a job. The future provides functionality to await for the job to complete, or to get its computation result or exception, or to cancel its execution, and more.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Learn more about job cancellation in section <a href="#job-cancellation">Job cancellation</a>.<br /> Learn more about listening for job lifecycle events in section <a href="#subscribe-for-job-lifecycle-events">Subscribe for job lifecycle events</a>.<br /> Learn more about awaiting the job&#x2019;s completion in section <a href="#awaiting-job-completion">Awaiting job completion</a>.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="job-states"><a class="anchor" href="#job-states"></a>15. Job states</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Upon scheduling a job, the job transitions different states. The current state of a job can be queried from its associated <a href="#ifuture">IFuture</a>.</p> 
     </div> 
     <table class="tableblock frame-all grid-all spread"> 
      <colgroup> 
       <col style="width: 25%;" /> 
       <col style="width: 75%;" /> 
      </colgroup> 
      <thead> 
       <tr> 
        <th class="tableblock halign-left valign-top">state</th> 
        <th class="tableblock halign-left valign-top">description</th> 
       </tr> 
      </thead> 
      <tbody> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">SCHEDULED</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that a job was given to the job manager for execution.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">REJECTED</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that a job was rejected for execution. This might happen if the job manager has been shutdown, or if no more worker threads are available.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">PENDING</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that a job&#x2019;s execution is pending, either because scheduled with a delay, or because of being a repetitive job while waiting for the commencement of the next execution.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">RUNNING</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that a job is running.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">DONE</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that a job finished execution, either normally or because it was cancelled. Use <code>IFuture.isCancelled()</code> to check for cancellation.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">WAITING_FOR_PERMIT</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that a semaphore aware job is competing for a permit to become available.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">WAITING_FOR_BLOCKING_CONDITION</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that a job is blocked by a blocking condition, and is waiting for it to fall.</p></td> 
       </tr> 
      </tbody> 
     </table> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody>
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> The state 'done' does not necessarily imply that the job already finished execution. That is because a job also enters 'done' state upon cancellation, but may still continue execution. </td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="future-filter"><a class="anchor" href="#future-filter"></a>16. Future filter</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A future filter is a filter which can be passed to various methods of the job manager to select some futures. The filter must implement <code>IFilter</code> interface, and has a single method to accept futures of interest.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 20. Example of a future filter
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">FutureFilter</span> <span class="directive">implements</span> IFilter&lt;IFuture&lt;?&gt;&gt; {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">boolean</span> accept(IFuture&lt;?&gt; future) {
    <span class="comment">// Accept or reject the future</span>
    <span class="keyword">return</span> <span class="predefined-constant">false</span>;
  }
}</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>Scout provides you with <code>FutureFilterBuilder</code> class to ease building filters which match multiple criteria joined by logical 'AND' operation.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 21. Usage of FutureFilterBuilder
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">IFilter&lt;IFuture&lt;?&gt;&gt; filter = Jobs.newFutureFilterBuilder() <i class="conum" data-value="1"></i><b>(1)</b>
    .andMatchExecutionHint(<span class="string"><span class="delimiter">&quot;</span><span class="content">computation</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>
    .andMatchNotState(<span class="predefined-type">JobState</span>.PENDING) <i class="conum" data-value="3"></i><b>(3)</b>
    .andAreSingleExecuting() <i class="conum" data-value="4"></i><b>(4)</b>
    .andMatchNotFuture(IFuture.CURRENT.get()) <i class="conum" data-value="5"></i><b>(5)</b>
    .andMatchRunContext(ClientRunContext.class) <i class="conum" data-value="6"></i><b>(6)</b>
    .andMatch(<span class="keyword">new</span> SessionFutureFilter(ISession.CURRENT.get())) <i class="conum" data-value="7"></i><b>(7)</b>
    .toFilter(); <i class="conum" data-value="8"></i><b>(8)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Returns an instance of the future filter builder</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Specifies to match only futures associated with execution hint 'computation'</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="3"></i><b>3</b></td> 
         <td>Specifies to match only jobs not in state pending</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="4"></i><b>4</b></td> 
         <td>Specifies to match only single executing jobs, meaning no recurring jobs</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="5"></i><b>5</b></td> 
         <td>Specifies to exclude the current future (if any)</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="6"></i><b>6</b></td> 
         <td>Specifies to match only jobs running on behalf of a <code>ClientRunContext</code></td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="7"></i><b>7</b></td> 
         <td>Specifies to match only jobs of the current session</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="8"></i><b>8</b></td> 
         <td>Builds the filters to get a Filter instance</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>Fore more information, refer to the JavaDoc of <code>FutureFilterBuilder</code>.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="event-filter"><a class="anchor" href="#event-filter"></a>17. Event filter</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A job event filter is a filter which can be given to job manager to subscribe for job lifecycle events. The filter must implement <code>IFilter</code> interface, and has a single method to accept events of interest.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 22. Example of an event filter
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">EventFilter</span> <span class="directive">implements</span> IFilter&lt;JobEvent&gt; {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">boolean</span> accept(JobEvent event) {
    <span class="comment">// Accept or reject the event</span>
    <span class="keyword">return</span> <span class="predefined-constant">false</span>;
  }
}</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>Scout provides you with <code>JobEventFilterBuilder</code> class to ease building filters which match multiple criteria joined by logical 'AND' operation.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 23. Usage of JobEventFilterBuilder
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">IFilter&lt;JobEvent&gt; filter = Jobs.newEventFilterBuilder() <i class="conum" data-value="1"></i><b>(1)</b>
    .andMatchEventType(JobEventType.JOB_STATE_CHANGED) <i class="conum" data-value="2"></i><b>(2)</b>
    .andMatchState(<span class="predefined-type">JobState</span>.RUNNING) <i class="conum" data-value="3"></i><b>(3)</b>
    .andMatch(<span class="keyword">new</span> SessionJobEventFilter(ISession.CURRENT.get())) <i class="conum" data-value="4"></i><b>(4)</b>
    .andMatchExecutionHint(<span class="string"><span class="delimiter">&quot;</span><span class="content">computation</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="5"></i><b>(5)</b>
    .toFilter(); <i class="conum" data-value="6"></i><b>(6)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Returns an instance of the job event filter builder</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Specifies to match all events representing a job state change</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="3"></i><b>3</b></td> 
         <td>Specifies to match only events for jobs which transitioned into running state</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="4"></i><b>4</b></td> 
         <td>Specifies to match only events for jobs of the current session</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="5"></i><b>5</b></td> 
         <td>Specifies to match only events for jobs which are associated with the execution hint 'computation'</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="6"></i><b>6</b></td> 
         <td>Builds the filters to get a Filter instance</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>Fore more information, refer to the JavaDoc of <code>JobEventFilterBuilder</code>.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="job-cancellation"><a class="anchor" href="#job-cancellation"></a>18. Job cancellation</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A job can be cancelled in two ways, either directly via its <a href="#ifuture">IFuture</a>, or via job manager. Both expect you to provide a boolean flag indicating whether to interrupt the executing working thread. Upon cancellation, the job immediately enters 'done' state. Learn more about <a href="#job-states">Job states</a>. If cancelling via job manager, a future filter must be given to select the jobs to be cancelled. Learn more about <a href="#future-filter">Future filter</a></p> 
     </div> 
     <div class="paragraph"> 
      <p>The cancellation attempt will be ignored if the job has already completed or was cancelled. If not running yet, the job will never run. If the job has already started, then the <em>interruptIfRunning</em> parameter determines whether the thread executing the job should be interrupted in an attempt to stop the job.</p> 
     </div> 
     <div class="paragraph"> 
      <p>In the following some examples:</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 24. Cancel a job via its future
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Schedule a job</span>
IFuture&lt;?&gt; future = Jobs.schedule(<span class="keyword">new</span> Work(), Jobs.newInput());

<span class="comment">// Cancel the job via its future</span>
future.cancel(<span class="predefined-constant">false</span>);</code></pre> 
      </div> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 25. Cancel multiple jobs via job manager
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.getJobManager().cancel(Jobs.newFutureFilterBuilder()
    .andMatchFuture(future1, future2, future3)
    .toFilter(), <span class="predefined-constant">false</span>);</code></pre> 
      </div> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 26. Cancel multiple jobs which match a specific execution hint and the current session
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.getJobManager().cancel(Jobs.newFutureFilterBuilder()
    .andMatchExecutionHint(<span class="string"><span class="delimiter">&quot;</span><span class="content">computation</span><span class="delimiter">&quot;</span></span>)
    .andMatch(<span class="keyword">new</span> SessionFutureFilter(ISession.CURRENT.get()))
    .toFilter(), <span class="predefined-constant">false</span>);</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>A job can query its current cancellation status via <code>RunMonitor.CURRENT.get().isCancelled()</code>. If doing some long running operations, it is recommended for the job to regularly check for cancellation.</p> 
     </div> 
     <div class="admonitionblock tip"> 
      <table> 
       <tbody>
        <tr> 
         <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
         <td class="content"> A job which is scheduled to run on a copy of the submitting <code>RunContext</code>, it gets also cancelled once the RunMonitor of that context gets cancelled. </td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="subscribe-for-job-lifecycle-events"><a class="anchor" href="#subscribe-for-job-lifecycle-events"></a>19. Subscribe for job lifecycle events</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Sometimes it is useful to register for some job lifecycle events. The following event types can be subscribed for:</p> 
     </div> 
     <table class="tableblock frame-all grid-all spread"> 
      <colgroup> 
       <col style="width: 25%;" /> 
       <col style="width: 75%;" /> 
      </colgroup> 
      <thead> 
       <tr> 
        <th class="tableblock halign-left valign-top">state</th> 
        <th class="tableblock halign-left valign-top">description</th> 
       </tr> 
      </thead> 
      <tbody> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">JOB_STATE_CHANGED</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Signals that a job transitioned to a new JobState, e.g. form JobState.SCHEDULED to JobState.RUNNING.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">JOB_EXECUTION_HINT_ADDED</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Signals that an execution hint was added to a job.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">JOB_EXECUTION_HINT_REMOVED</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Signals that an execution hint was removed from a job.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">JOB_MANAGER_SHUTDOWN</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Signals that the job manager was shutdown.</p></td> 
       </tr> 
      </tbody> 
     </table> 
     <div class="paragraph"> 
      <p>The listener is registered via job manager as following:</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 27. Subscribe for global job events
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.getJobManager().addListener(Jobs.newEventFilterBuilder() <i class="conum" data-value="1"></i><b>(1)</b>
    .andMatchEventType(JobEventType.JOB_STATE_CHANGED)
    .andMatchState(<span class="predefined-type">JobState</span>.RUNNING)
    .andMatch(<span class="keyword">new</span> SessionJobEventFilter(ISession.CURRENT.get()))
    .toFilter(), <span class="keyword">new</span> IJobListener() {

      <span class="annotation">@Override</span>
      <span class="directive">public</span> <span class="type">void</span> changed(JobEvent event) {
        IFuture&lt;?&gt; future = event.getData().getFuture(); <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Job commences execution: </span><span class="delimiter">&quot;</span></span> + future.getJobInput().getName());
      }
    });</code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Subscribe for all events related to jobs just about to commence execution, and which belong to the current session</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Get the future this event was fired for</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>If interested in only events of a single future, the listener can be registered directly on the future.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 28. Subscribe for local job events
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">future.addListener(Jobs.newEventFilterBuilder()
    .andMatchEventType(JobEventType.JOB_STATE_CHANGED)
    .andMatchState(<span class="predefined-type">JobState</span>.RUNNING)
    .toFilter(), <span class="keyword">new</span> IJobListener() {

      <span class="annotation">@Override</span>
      <span class="directive">public</span> <span class="type">void</span> changed(JobEvent event) {
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Job commences execution</span><span class="delimiter">&quot;</span></span>);
      }
    });</code></pre> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="awaiting-job-completion"><a class="anchor" href="#awaiting-job-completion"></a>20. Awaiting job completion</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A job&#x2019;s completion can be either awaited on its <a href="#ifuture">IFuture</a>, or via job manager - the first optionally allows to consume the job&#x2019;s computation result, whereas the second allows multiple futures to be awaited for.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="difference-between-done-and-finished-state"><a class="anchor" href="#difference-between-done-and-finished-state"></a>20.1. Difference between 'done' and 'finished' state</h3> 
      <div class="paragraph"> 
       <p>When awaiting futures, the definition of 'done' and 'finished' state should be understood - 'done' means that the future completed either normally, or was cancelled. But, if cancelled while running, the job may still continue its execution, whereas a job which not commenced execution yet, will never do so. The latter typically applies for jobs scheduled with a delay. However, 'finished' state differs from 'done' state insofar as a cancelled, currently running job enters 'finished' state only upon its actual completion. Otherwise, if not cancelled, or cancelled before executing, it is equivalent to 'done' state. In most situations, it is sufficient to await for the future&#x2019;s done state, especially because a cancelled job cannot return a result to the submitter anyway.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="awaiting-a-single-future-s-done-state"><a class="anchor" href="#awaiting-a-single-future-s-done-state"></a>20.2. Awaiting a single future&#x2019;s 'done' state</h3> 
      <div class="paragraph"> 
       <p>Besides of some overloaded methods, <a href="#ifuture">IFuture</a> basically provides two methods to wait for a future to enter 'done' state, namely <code>awaitDone</code> and <code>awaitDoneAndGet</code>, with the difference that the latter additionally returns the job&#x2019;s result or exception. If the future is already done, those methods will return immediately. For both methods, there exists an overloaded version to wait for at most a given time, which once elapsed results in a <code>TimedOutException</code> thrown.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Further, <code>awaitDoneAndGet</code> allows to specify an <a href="#IExceptionTranslator">[IExceptionTranslator]</a> to control exception translation. By default, <a href="#defaultruntimeexceptiontranslator">DefaultRuntimeExceptionTranslator</a> is used, meaning that a <code>RuntimeException</code> is propagated as it is, whereas a checked exception would be wrapped into a <a href="#platformexception">PlatformException</a>. If you require checked exceptions to be thrown as they are, use <a href="#defaultexceptiontranslator">DefaultExceptionTranslator</a> instead, or even <a href="#nullexceptiontranslator">NullExceptionTranslator</a> to work with the raw <code>ExecutionException</code> as being thrown by Java Executor framework.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 29. Examples of how to await done state on a future
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">IFuture&lt;<span class="predefined-type">String</span>&gt; future = Jobs.schedule(<span class="keyword">new</span> <span class="predefined-type">Callable</span>&lt;<span class="predefined-type">String</span>&gt;() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> call() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">computation result</span><span class="delimiter">&quot;</span></span>;
  }
}, Jobs.newInput());

<span class="comment">// Wait until done without consuming the result</span>
future.awaitDone(); <i class="conum" data-value="1"></i><b>(1)</b>
future.awaitDone(<span class="integer">10</span>, <span class="predefined-type">TimeUnit</span>.SECONDS); <i class="conum" data-value="2"></i><b>(2)</b>

<span class="comment">// Wait until done and consume the result</span>
<span class="predefined-type">String</span> result = future.awaitDoneAndGet(); <i class="conum" data-value="3"></i><b>(3)</b>
result = future.awaitDoneAndGet(<span class="integer">10</span>, <span class="predefined-type">TimeUnit</span>.SECONDS); <i class="conum" data-value="4"></i><b>(4)</b>

<span class="comment">// Wait until done, consume the result, and use a specific exception translator</span>
result = future.awaitDoneAndGet(DefaultExceptionTranslator.class); <i class="conum" data-value="5"></i><b>(5)</b>
result = future.awaitDoneAndGet(<span class="integer">10</span>, <span class="predefined-type">TimeUnit</span>.SECONDS, DefaultExceptionTranslator.class); <i class="conum" data-value="6"></i><b>(6)</b></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Waits if necessary for the job to complete, or until cancelled. This method does not throw an exception if cancelled or the computation failed, but throws <a href="#threadinterruptedexception">ThreadInterruptedException</a> if the current thread was interrupted while waiting.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Waits if necessary for at most 10 seconds for the job to complete, or until cancelled, or the timeout elapses. This method does not throw an exception if cancelled, or the computation failed, but throws <a href="#timedoutexception">TimedOutException</a> if waiting timeout elapsed, or throws <a href="#threadinterruptedexception">ThreadInterruptedException</a> if the current thread was interrupted while waiting.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="3"></i><b>3</b></td> 
          <td>Waits if necessary for the job to complete, and then returns its result, if available, or throws its exception according to <a href="#defaultruntimeexceptiontranslator">DefaultRuntimeExceptionTranslator</a>, or throws <a href="#futurecancelledexception">FutureCancelledException</a> if cancelled, or throws <a href="#threadinterruptedexception">ThreadInterruptedException</a> if the current thread was interrupted while waiting.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="4"></i><b>4</b></td> 
          <td>Waits if necessary for at most 10 seconds for the job to complete, and then returns its result, if available, or throws its exception according to <a href="#defaultruntimeexceptiontranslator">DefaultRuntimeExceptionTranslator</a>, or throws <a href="#futurecancelledexception">FutureCancelledException</a> if cancelled, or throws <a href="#timedoutexception">TimedOutException</a> if waiting timeout elapsed, or throws <a href="#threadinterruptedexception">ThreadInterruptedException</a> if the current thread was interrupted while waiting.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="5"></i><b>5</b></td> 
          <td>Waits if necessary for the job to complete, and then returns its result, if available, or throws its exception according to the given <a href="#defaultexceptiontranslator">DefaultExceptionTranslator</a>, or throws <a href="#futurecancelledexception">FutureCancelledException</a> if cancelled, or throws <a href="#threadinterruptedexception">ThreadInterruptedException</a> if the current thread was interrupted while waiting.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="6"></i><b>6</b></td> 
          <td>Waits if necessary for at most the given time for the job to complete, and then returns its result, if available, or throws its exception according to the given <a href="#defaultexceptiontranslator">DefaultExceptionTranslator</a>, or throws <a href="#futurecancelledexception">FutureCancelledException</a> if cancelled, or throws <a href="#timedoutexception">TimedOutException</a> if waiting timeout elapsed, or throws <a href="#threadinterruptedexception">ThreadInterruptedException</a> if the current thread was interrupted while waiting.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>It is further possible to await asynchronously on a future to enter done state by registering a callback via <code>whenDone</code> method. The advantage over registering a listener is that the callback is invoked even if the future already entered done state upon registration.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 30. Example of when-done callback
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">future.whenDone(<span class="keyword">new</span> IDoneHandler&lt;<span class="predefined-type">String</span>&gt;() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> onDone(DoneEvent&lt;<span class="predefined-type">String</span>&gt; event) {
    <span class="comment">// invoked upon entering done state.</span>
  }
}, ClientRunContexts.copyCurrent());</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>Because invoked in another thread, this method optionally accepts a <a href="#runcontext">RunContext</a> to be applied when being invoked.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="awaiting-a-single-future-s-finished-state"><a class="anchor" href="#awaiting-a-single-future-s-finished-state"></a>20.3. Awaiting a single future&#x2019;s 'finished' state</h3> 
      <div class="paragraph"> 
       <p>Use the method <code>awaitFinished</code> to wait for the job to finish, meaning that the job either completed normally or by an exception, or that it will never commence execution due to a premature cancellation. To learn more about the difference between 'done' and 'finished' state, click <a href="#difference-between-done-and-finished-state">here</a>. Please note that this method does not return the job&#x2019;s result, because by Java Future definition, a cancelled job cannot provide a result.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 31. Examples of how to await finished state on a future
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">IFuture&lt;<span class="predefined-type">String</span>&gt; future = Jobs.schedule(<span class="keyword">new</span> <span class="predefined-type">Callable</span>&lt;<span class="predefined-type">String</span>&gt;() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> call() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">computation result</span><span class="delimiter">&quot;</span></span>;
  }
}, Jobs.newInput());

<span class="comment">// Wait until finished</span>
future.awaitFinished(<span class="integer">10</span>, <span class="predefined-type">TimeUnit</span>.SECONDS);</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="awaiting-multiple-future-s-done-state"><a class="anchor" href="#awaiting-multiple-future-s-done-state"></a>20.4. Awaiting multiple future&#x2019;s 'done' state</h3> 
      <div class="paragraph"> 
       <p>Job Manager allows to await for multiple futures at once. The filter to be provided limits the futures to await for. This method requires you to provide a maximal time to wait.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Filters can be plugged by using logical filters like <code>AndFilter</code> or <code>OrFilter</code>, or negated by enclosing a filter in <code>NotFilter</code>. Also see <a href="#future-filter">Future filter</a> to create a filter to match multiple criteria joined by logical 'AND' operation.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 32. Examples of how to await done state of multiple futures
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Wait for some futures</span>
Jobs.getJobManager().awaitDone(Jobs.newFutureFilterBuilder() <i class="conum" data-value="1"></i><b>(1)</b>
    .andMatchFuture(future1, future2, future3)
    .toFilter(), <span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES);

<span class="comment">// Wait for all futures marked as 'reporting' jobs of the current session</span>
Jobs.getJobManager().awaitDone(Jobs.newFutureFilterBuilder() <i class="conum" data-value="2"></i><b>(2)</b>
    .andMatchExecutionHint(<span class="string"><span class="delimiter">&quot;</span><span class="content">reporting</span><span class="delimiter">&quot;</span></span>)
    .andMatch(<span class="keyword">new</span> SessionFutureFilter(ISession.CURRENT.get()))
    .toFilter(), <span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES);</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Waits if necessary for at most 1 minute for all three futures to complete, or until cancelled, or the timeout elapses.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Waits if necessary for at most 1 minute until all jobs marked as 'reporting' jobs of the current session complete, or until cancelled, or the timeout elapses.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="awaiting-multiple-future-s-finished-state"><a class="anchor" href="#awaiting-multiple-future-s-finished-state"></a>20.5. Awaiting multiple future&#x2019;s 'finished' state</h3> 
      <div class="paragraph"> 
       <p>Use the method <code>awaitFinished</code> to wait for multiple jobs to finish, meaning that the jobs either completed normally or by an exception, or that they will never commence execution due to a premature cancellation. To learn more about the difference between 'done' and 'finished' state, click <a href="#difference-between-done-and-finished-state">here</a>.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 33. Examples of how to await finish state of multiple futures
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Wait for some futures</span>
Jobs.getJobManager().awaitFinished(Jobs.newFutureFilterBuilder() <i class="conum" data-value="1"></i><b>(1)</b>
    .andMatchFuture(future1, future2, future3)
    .toFilter(), <span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES);

<span class="comment">// Wait for all futures marked as 'reporting' jobs of the current session</span>
Jobs.getJobManager().awaitFinished(Jobs.newFutureFilterBuilder() <i class="conum" data-value="2"></i><b>(2)</b>
    .andMatchExecutionHint(<span class="string"><span class="delimiter">&quot;</span><span class="content">reporting</span><span class="delimiter">&quot;</span></span>)
    .andMatch(<span class="keyword">new</span> SessionFutureFilter(ISession.CURRENT.get()))
    .toFilter(), <span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES);</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Waits if necessary for at most 1 minute for all three futures to finish, or until cancelled, or the timeout elapses.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Waits if necessary for at most 1 minute until all jobs marked as 'reporting' jobs of the current session finish, or until cancelled, or the timeout elapses.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="uncaught-job-exceptions"><a class="anchor" href="#uncaught-job-exceptions"></a>21. Uncaught job exceptions</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>If a job throws an exception, that exception is handled by <code>ExceptionHandler</code>, and propagated to the submitter. However, the exception is only propagated if having a waiting submitter. Also, an uncaught exception causes repetitive jobs to terminate.</p> 
     </div> 
     <div class="paragraph"> 
      <p>This default behavior as described can be changed via <a href="#jobinput-withexceptionhandling">JobInput.withExceptionHandling</a>.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="blocking-condition"><a class="anchor" href="#blocking-condition"></a>22. Blocking condition</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A blocking condition allows a thread to wait for a condition to become <em>true</em>. That is similar to the Java Object&#x2019;s 'wait/notify' mechanism, but with some additional functionality regarding semaphore aware jobs. If a semaphore aware job enters a blocking condition, it releases ownership of the permit, which allows another job of that same semaphore to commence execution. Upon the condition becomes <em>true</em>, the job then must compete for a permit anew.</p> 
     </div> 
     <div class="paragraph"> 
      <p>A condition can be used across multiple threads to wait for the same condition. Also, a condition is reusable upon invalidation. And finally, a condition can be used even if not running within a job.</p> 
     </div> 
     <div class="paragraph"> 
      <p>A blocking condition is often used by model jobs to wait for something to happen, but to allow another model job to run while waiting. A typical use case would be to wait for a MessageBox to be closed.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="example-of-a-blocking-condition"><a class="anchor" href="#example-of-a-blocking-condition"></a>22.1. Example of a blocking condition</h3> 
      <div class="paragraph"> 
       <p>You are running in a semaphore aware job and require to do some long running operation. During that time you do not require to be the permit owner. A simple but wrong approach would be the following:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Schedule a long running operation.</span>
IFuture&lt;?&gt; future = Jobs.schedule(<span class="keyword">new</span> LongRunningOperation(), Jobs.newInput());

<span class="comment">// Wait until done.</span>
future.awaitDone();</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>The problem with this approach is, that you still are the permit owner while waiting, meaning that you possibly prevent other jobs from running. Instead, you could use a blocking condition for that to achieve:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Create a blocking condition.</span>
<span class="directive">final</span> IBlockingCondition operationCompleted = Jobs.newBlockingCondition(<span class="predefined-constant">true</span>);

<span class="comment">// Schedule a long running operation.</span>
IFuture&lt;<span class="predefined-type">Void</span>&gt; future = Jobs.schedule(<span class="keyword">new</span> LongRunningOperation(), Jobs.newInput());

<span class="comment">// Register done callback to unblock the condition.</span>
future.whenDone(<span class="keyword">new</span> IDoneHandler&lt;<span class="predefined-type">Void</span>&gt;() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> onDone(DoneEvent&lt;<span class="predefined-type">Void</span>&gt; event) {
    <span class="comment">// Let the waiting job re-acquire a permit and continue execution.</span>
    operationCompleted.setBlocking(<span class="predefined-constant">false</span>);
  }
}, <span class="predefined-constant">null</span>);

<span class="comment">// Wait until done. Thereby, the permit of the current job is released for the time while waiting.</span>
operationCompleted.waitForUninterruptibly();</code></pre> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="executionsemaphore"><a class="anchor" href="#executionsemaphore"></a>23. ExecutionSemaphore</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Represents a fair counting semaphore used in Job API to control the maximal number of jobs running concurrently.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Jobs which are assigned to the same semaphore run concurrently until they reach the maximal concurrency level defined for that semaphore. Subsequent tasks then wait in the queue until a permit becomes available.</p> 
     </div> 
     <div class="paragraph"> 
      <p>A semaphore initialized to one allows to run jobs in a mutually exclusive manner, and a semaphore initialized to zero to run no job at all. The number of total permits available can be changed at any time, which allows to adapt the maximal concurrency level to some dynamic criteria like time of day or system load. However, once calling seal(), the number of permits cannot be changed anymore, and any attempts will result in an AssertionException. By default, a semaphore is unbounded.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="executiontrigger"><a class="anchor" href="#executiontrigger"></a>24. ExecutionTrigger</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Component that defines the schedule upon which a job will commence execution.</p> 
     </div> 
     <div class="paragraph"> 
      <p>A trigger can be as simple as a 'one-shot' execution at some specific point in time in the future, or represent a schedule which executes a job on a repeatedly basis. The latter can be configured to run infinitely, or to end at a specific point in time. It is further possible to define rather complex triggers, like to execute a job every second Friday at noon, but with the exclusion of all the business&#x2019;s holidays.</p> 
     </div> 
     <div class="paragraph"> 
      <p>See the various schedule builders provided by Quartz Scheduler: <code>SimpleScheduleBuilder</code>, <code>CronScheduleBuilder</code>, <code>CalendarIntervalScheduleBuilder</code>, <code>DailyTimeIntervalScheduleBuilder</code>. The most powerful builder is <code>CronScheduleBuilder</code>. Cron is a UNIX tool with powerful and proven scheduling capabilities. For more information, see <a href="http://www.quartz-scheduler.org" class="bare">http://www.quartz-scheduler.org</a>.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Additionally, Scout provides you with <code>FixedDelayScheduleBuilder</code> to run a job with a fixed delay between the termination of one execution and the commencement of the next execution.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Use the static factory method 'Jobs.newExecutionTrigger()' to get an instance.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="misfiring"><a class="anchor" href="#misfiring"></a>24.1. Misfiring</h3> 
      <div class="paragraph"> 
       <p>Regardless of the schedule used, job manager guarantees no concurrent execution of the same job. That may happen, if using a repeatedly schedule with the job not terminated its last execution yet, but the schedule&#x2019;s trigger would like to fire for the next execution already. Such a situation is called a misfiring. The action to be taken upon a misfiring is configurable via the schedule&#x2019;s misfiring policy. A policy can be to run the job immediately upon termination of the previous execution, or to just ignore that missed firing. See the JavaDoc of the schedule for more information.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="stopping-the-platform"><a class="anchor" href="#stopping-the-platform"></a>25. Stopping the platform</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Upon stopping the platform, the job manager will also be shutdown. If having a <a href="#IPlatformListener">[IPlatformListener]</a> to perform some cleanup work, and which requires the job manager to be still functional, that listener must be annotated with an <code>@Order</code> less than <code>IJobManager.DESTROY_ORDER</code>, which is 5'900. If not specifying an <code>@Order</code> explicitly, the listener will have the default order of <em>5</em>, meaning being invoked before job manager shutdown anyway.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="modeljobs"><a class="anchor" href="#modeljobs"></a>26. ModelJobs</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Model jobs exist client side only, and are used to interact with the Scout client model to read and write model values in a serial manner per session. That enables no synchronization to be used when interacting with the model.</p> 
     </div> 
     <div class="paragraph"> 
      <p>By definition, a model job requires to be run on behalf of a <a href="#ClientRunContext">[ClientRunContext]</a> with a <a href="#IClientSession">[IClientSession]</a> set, and must have the session&#x2019;s model job semaphore set as its <a href="#executionsemaphore">ExecutionSemaphore</a>. That causes all such jobs to be run in sequence in the model thread. At any given time, there is only one model thread active per client session.</p> 
     </div> 
     <div class="paragraph"> 
      <p>The class <code>ModelJobs</code> is a helper class, and is for convenience purpose to facilitate the creation of model job related artifacts, and to schedule model jobs.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 34. Running work in model thread
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">ModelJobs.schedule(<span class="keyword">new</span> IRunnable() { <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something in model thread</span>
  }
}, ModelJobs.newInput(ClientRunContexts.copyCurrent()) <i class="conum" data-value="2"></i><b>(2)</b>
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Doing something in model thread</span><span class="delimiter">&quot;</span></span>));</code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Schedules the work to be executed in the model thread</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Creates the <code>JobInput</code> to become a model job, meaning with the session&#x2019;s model job semaphore set</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>For model jobs, it is also allowed to run according to a Quartz schedule plan, or to be executed with a delay. Then the model permit is acquired just before each execution, and not upon being scheduled.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Furthermore, the class <code>ModelJobs</code> provides some useful static methods:</p> 
     </div> 
     <div class="listingblock"> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Returns true if the current thread represents the model thread for the current client session. At any given time, there is only one model thread active per client session.</span>
ModelJobs.isModelThread();

<span class="comment">// Returns true if the given Future belongs to a model job.</span>
ModelJobs.isModelJob(IFuture.CURRENT.get());

<span class="comment">// Returns a builder to create a filter for future objects representing a model job.</span>
ModelJobs.newFutureFilterBuilder();

<span class="comment">// Returns a builder to create a filter for JobEvent objects originating from model jobs.</span>
ModelJobs.newEventFilterBuilder();

<span class="comment">// Instructs the job manager that the current model job is willing to temporarily yield its current model job permit. It is rarely appropriate to use this method. It may be useful for debugging or testing purposes.</span>
ModelJobs.yield();</code></pre> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="configuration"><a class="anchor" href="#configuration"></a>27. Configuration</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Job manager can be configured with the following config properties.</p> 
     </div> 
     <table class="tableblock frame-all grid-all spread"> 
      <colgroup> 
       <col style="width: 30%;" /> 
       <col style="width: 20%;" /> 
       <col style="width: 50%;" /> 
      </colgroup> 
      <thead> 
       <tr> 
        <th class="tableblock halign-left valign-top">property</th> 
        <th class="tableblock halign-left valign-top">default value</th> 
        <th class="tableblock halign-left valign-top">description</th> 
       </tr> 
      </thead> 
      <tbody> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">scout.jobmanager.corePoolSize</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">The number of threads to keep in the pool, even if they are idle</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">scout.jobmanager.prestartCoreThreads</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">true if running in productive environment, else false</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether all threads of the core-pool should be started upon job manager startup, so that they are idle waiting for work.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">scout.jobmanager.maximumPoolSize</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">infinite</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">The maximal number of threads to be created once the core-pool-size is exceeded.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">scout.jobmanager.keepAliveTime</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">The time limit (in seconds) for which threads, which are created upon exceeding the 'core-pool-size' limit, may remain idle before being terminated.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">scout.jobmanager.allowCoreThreadTimeOut</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether threads of the core-pool should be terminated after being idle for longer than 'keepAliveTime'.</p></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="extending-job-manager"><a class="anchor" href="#extending-job-manager"></a>28. Extending job manager</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Job manager is implemented as an application scoped bean, and which can be replaced. To do so, create a class which extends <code>JobManager</code>, and annotate it with <code>@Replace</code> annotation. Most likely, you like to use the EE container&#x2019;s <code>ThreadPoolExecutor</code>, or to contribute some behavior to the callable chain which finally executes the job.</p> 
     </div> 
     <div class="paragraph"> 
      <p>To change the executor, overwrite <code>createExecutor</code> method and return the executor of your choice. But do not forget to register a rejection handler to reject futures upon rejection. Also, overwrite <code>shutdownExecutor</code> to not shutdown the container&#x2019;s executor.</p> 
     </div> 
     <div class="paragraph"> 
      <p>To contribute some behavior to the callable chain, overwrite the method <code>interceptCallableChain</code> and contribute your decorator or interceptor. Refer to the method&#x2019;s JavaDoc for more information.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="scheduling-examples"><a class="anchor" href="#scheduling-examples"></a>29. Scheduling examples</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>This sections contains some common scheduling examples.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 35. Schedule a one-shot job
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
  }
}, Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Running once</span><span class="delimiter">&quot;</span></span>)
    .withRunContext(ClientRunContexts.copyCurrent()));</code></pre> 
      </div> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 36. Schedule a job with a delay
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
  }
}, Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Running in 10 seconds</span><span class="delimiter">&quot;</span></span>)
    .withRunContext(ClientRunContexts.copyCurrent())
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withStartIn(<span class="integer">10</span>, <span class="predefined-type">TimeUnit</span>.SECONDS))); <span class="comment">// delay of 10 seconds</span></code></pre> 
      </div> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 37. Schedule a repetitive job at a fixed rate
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
  }
}, Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Running every minute</span><span class="delimiter">&quot;</span></span>)
    .withRunContext(ClientRunContexts.copyCurrent())
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withStartIn(<span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES) <i class="conum" data-value="1"></i><b>(1)</b>
        .withSchedule(SimpleScheduleBuilder.simpleSchedule() <i class="conum" data-value="2"></i><b>(2)</b>
            .withIntervalInMinutes(<span class="integer">1</span>) <i class="conum" data-value="3"></i><b>(3)</b>
            .repeatForever()))); <i class="conum" data-value="4"></i><b>(4)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Configure to fire in 1 minute for the first time</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Use Quartz simple schedule to achieve fixed-rate execution</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="3"></i><b>3</b></td> 
         <td>Repetitively fire every minute</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="4"></i><b>4</b></td> 
         <td>Repeat forever</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 38. Schedule a repetitive job which runs 60 times at every minute
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
  }
}, Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Running every minute for total 60 times</span><span class="delimiter">&quot;</span></span>)
    .withRunContext(ClientRunContexts.copyCurrent())
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withStartIn(<span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES) <i class="conum" data-value="1"></i><b>(1)</b>
        .withSchedule(SimpleScheduleBuilder.simpleSchedule() <i class="conum" data-value="2"></i><b>(2)</b>
            .withIntervalInMinutes(<span class="integer">1</span>) <i class="conum" data-value="3"></i><b>(3)</b>
            .withRepeatCount(<span class="integer">59</span>)))); <i class="conum" data-value="4"></i><b>(4)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Configure to fire in 1 minute for the first time</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Use Quartz simple schedule to achieve fixed-rate execution</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="3"></i><b>3</b></td> 
         <td>Repetitively fire every minute</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="4"></i><b>4</b></td> 
         <td>Repeat 59 times, plus the initial execution</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 39. Schedule a repetitive job at a fixed delay
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
  }
}, Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Running forever with a delay of 1 minute between the termination of the previous and the next execution</span><span class="delimiter">&quot;</span></span>)
    .withRunContext(ClientRunContexts.copyCurrent())
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withStartIn(<span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES) <i class="conum" data-value="1"></i><b>(1)</b>
        .withSchedule(FixedDelayScheduleBuilder.repeatForever(<span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES)))); <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Configure to fire in 1 minute for the first time</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Use fixed delay schedule</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 40. Schedule a repetitive job which runs 60 times, but waits 1 minute between the termination of the previous and the commencement of the next execution
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
  }
}, Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Running 60 times with a delay of 1 minute between the termination of the previous and the next execution</span><span class="delimiter">&quot;</span></span>)
    .withRunContext(ClientRunContexts.copyCurrent())
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withStartIn(<span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES) <i class="conum" data-value="1"></i><b>(1)</b>
        .withSchedule(FixedDelayScheduleBuilder.repeatForTotalCount(<span class="integer">60</span>, <span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.MINUTES)))); <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Configure to fire in 1 minute for the first time</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Use fixed delay schedule</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 41. Running at 10:15am every Monday, Tuesday, Wednesday, Thursday and Friday
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
  }
}, Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Running at 10:15am every Monday, Tuesday, Wednesday, Thursday and Friday</span><span class="delimiter">&quot;</span></span>)
    .withRunContext(ClientRunContexts.copyCurrent())
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withSchedule(CronScheduleBuilder.cronSchedule(<span class="string"><span class="delimiter">&quot;</span><span class="content">0 15 10 ? * MON-FRI</span><span class="delimiter">&quot;</span></span>)))); <i class="conum" data-value="1"></i><b>(1)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Cron format: [second] [minute] [hour] [day_of_month] [month] [day_of_week] [year]?</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 42. Running every minute starting at 14:00 and ending at 14:05, every day
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.schedule(<span class="keyword">new</span> IRunnable() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="comment">// doing something</span>
  }
}, Jobs.newInput()
    .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Running every minute starting at 14:00 and ending at 14:05, every day</span><span class="delimiter">&quot;</span></span>)
    .withRunContext(ClientRunContexts.copyCurrent())
    .withExecutionTrigger(Jobs.newExecutionTrigger()
        .withSchedule(CronScheduleBuilder.cronSchedule(<span class="string"><span class="delimiter">&quot;</span><span class="content">0 0-5 14 * * ?</span><span class="delimiter">&quot;</span></span>)))); <i class="conum" data-value="1"></i><b>(1)</b></code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Cron format: [second] [minute] [hour] [day_of_month] [month] [day_of_week] [year]?</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 43. Limit the maximal concurrency level among jobs
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">IExecutionSemaphore semaphore = Jobs.newExecutionSemaphore(<span class="integer">5</span>); <i class="conum" data-value="1"></i><b>(1)</b>

<span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; <span class="integer">100</span>; i++) {
  Jobs.schedule(<span class="keyword">new</span> IRunnable() {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
      <span class="comment">// doing something</span>
    }
  }, Jobs.newInput()
      .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">job-{}</span><span class="delimiter">&quot;</span></span>, i)
      .withExecutionSemaphore(semaphore)); <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Create the execution semaphore initialized with 5 permits</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Set the execution semaphore to the job subject for limited concurrency</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 44. Cancel all jobs of the current session
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">Jobs.getJobManager().cancel(Jobs.newFutureFilterBuilder()
    .andMatch(<span class="keyword">new</span> SessionFutureFilter(ISession.CURRENT.get()))
    .toFilter(), <span class="predefined-constant">true</span>);</code></pre> 
      </div> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 45. Query for cancellation
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CancellableWork</span> <span class="directive">implements</span> IRunnable {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {

    <span class="comment">// do first chunk of operations</span>

    <span class="keyword">if</span> (RunMonitor.CURRENT.get().isCancelled()) {
      <span class="keyword">return</span>;
    }

    <span class="comment">// do next chunk of operations</span>

    <span class="keyword">if</span> (RunMonitor.CURRENT.get().isCancelled()) {
      <span class="keyword">return</span>;
    }

    <span class="comment">// do next chunk of operations</span>
  }
}</code></pre> 
      </div> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 46. Release current semaphore permit while executing
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Create a blocking condition.</span>
<span class="directive">final</span> IBlockingCondition operationCompleted = Jobs.newBlockingCondition(<span class="predefined-constant">true</span>);

<span class="comment">// Schedule a long running operation.</span>
IFuture&lt;<span class="predefined-type">Void</span>&gt; future = Jobs.schedule(<span class="keyword">new</span> LongRunningOperation(), Jobs.newInput());

<span class="comment">// Register done callback to unblock the condition.</span>
future.whenDone(<span class="keyword">new</span> IDoneHandler&lt;<span class="predefined-type">Void</span>&gt;() {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> onDone(DoneEvent&lt;<span class="predefined-type">Void</span>&gt; event) {
    <span class="comment">// Let the waiting job re-acquire a permit and continue execution.</span>
    operationCompleted.setBlocking(<span class="predefined-constant">false</span>);
  }
}, <span class="predefined-constant">null</span>);

<span class="comment">// Wait until done. Thereby, the permit of the current job is released for the time while waiting.</span>
operationCompleted.waitForUninterruptibly();</code></pre> 
      </div> 
     </div> 
    </div> 
   </div> 
   <h1 id="runcontext" class="sect0"><a class="anchor" href="#runcontext"></a>RunContext</h1> 
   <div class="openblock partintro"> 
    <div class="content"> 
     <div class="paragraph"> 
      <p>Mostly, code is run on behalf of some semantic context, for example as a particular <code>Subject</code> and with some context related <code>ThreadLocals</code> set, e.g. the user&#x2019;s <code>session</code> and its <code>Locale</code>. Scout provides you with different <code>RunContexts</code>, such as <code>ClientRunContext</code> or <code>ServerRunContext</code>. They all share some common characteristics like <code>Subject</code>, <code>Locale</code> and <code>RunMonitor</code>, but also provide some additional functionality like transaction boundaries if using <code>ServerRunContext</code>. Also, a <code>RunContext</code> facilitates propagation of state among different threads. In order to ease readability, the 'setter-methods' of the <code>RunContext</code> support method chaining.</p> 
     </div> 
     <div class="paragraph"> 
      <p>All a <code>RunContext</code> does is to provide some setter methods to construct the context, and a <code>run</code> and <code>call</code> method to run an action on behalf of that context. Thereby, the only difference among those two methods is their argument. Whereas <code>run</code> takes a <code>IRunnable</code> instance, <code>call</code> takes a <code>Callable</code> to additionally return a result to the caller. The action is run in the current thread, meaning that the caller is blocked until completion.</p> 
     </div> 
     <div class="paragraph"> 
      <p>By default, a <code>RunContext</code> is associated with a <code>RunMonitor</code>, and the monitor&#x2019;s cancellation status can be queried via <code>RunMonitor.CURRENT.get().isCancelled()</code>. The monitor allows for hard cancellation, meaning that the executing thread is interrupted upon cancellation. For instance if waiting on an interruptible construct like <code>Object.wait()</code> or <code>IFuture.awaitDone()</code>, the waiting thread returns with an interruption exception.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="factory-methods-to-create-a-runcontext"><a class="anchor" href="#factory-methods-to-create-a-runcontext"></a>30. Factory methods to create a RunContext</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Typically, a <code>RunContext</code> is created from a respective factory like <code>RunContexts</code> to create a <code>RunContext</code>, or <code>ServerRunContexts</code> to create a <code>ServerRunContext</code>, or <code>ClientRunContexts</code> to create a <code>ClientRunContext</code>. Internally, the <code>BeanManager</code> is asked to provide a new instance of the <code>RunContext</code>, which allows you to replace the default implementation of a <code>RunContext</code> in an easy way. The factories declare two factory methods: <code>empty()</code> and <code>copyCurrent()</code>. Whereas <code>empty()</code> provides you an empty <code>RunContext</code>, <code>copyCurrent()</code> takes a snapshot of the current calling context and initializes the <code>RunContext</code> accordingly. That is useful if only some few values are to be changed, or, if using <code>ServerRunContext</code>, to run the code on behalf of a new transaction.</p> 
     </div> 
     <div class="paragraph"> 
      <p>The following <a href="#lst-RunContexts.copyCurrent">Listing 48</a> illustrates the creation of an empty <code>RunContext</code> initialized with a particular <code>Subject</code> and <code>Locale</code>.</p> 
     </div> 
     <div id="lst-RunContexts.empty" class="listingblock"> 
      <div class="title">
       Listing 47. Creation of an empty 
       <code>RunContext</code>
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Subject</span> subject = <span class="keyword">new</span> <span class="predefined-type">Subject</span>(); <i class="conum" data-value="1"></i><b>(1)</b>
subject.getPrincipals().add(<span class="keyword">new</span> SimplePrincipal(<span class="string"><span class="delimiter">&quot;</span><span class="content">john</span><span class="delimiter">&quot;</span></span>));
subject.setReadOnly();

RunContexts.empty()
    .withSubject(subject)
    .withLocale(<span class="predefined-type">Locale</span>.US)
    .run(<span class="keyword">new</span> IRunnable() { <i class="conum" data-value="2"></i><b>(2)</b>

      <span class="annotation">@Override</span>
      <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
        <span class="comment">// run some code </span><i class="conum" data-value="3"></i><b>(3)</b>
        <span class="predefined-type">System</span>.out.println(NlsLocale.CURRENT.get()); <span class="comment">// &gt; Locale.US</span>
        <span class="predefined-type">System</span>.out.println(<span class="predefined-type">Subject</span>.getSubject(<span class="predefined-type">AccessController</span>.getContext())); <span class="comment">// &gt; john</span>
      }
    });</code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>create the <code>Subject</code> to do some work on behalf</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Create and initialize the <code>RunContext</code></td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="3"></i><b>3</b></td> 
         <td>This code is run on behalf of the <code>RunContext</code></td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>The following <a href="#lst-RunContexts.copyCurrent">Listing 48</a> illustrates the creation of a 'snapshot' of the current calling <code>RunContext</code> with another <code>Locale</code> set.</p> 
     </div> 
     <div id="lst-RunContexts.copyCurrent" class="listingblock"> 
      <div class="title">
       Listing 48. Create a copy of the current calling 
       <code>RunContext</code>
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">RunContexts.copyCurrent()
    .withLocale(<span class="predefined-type">Locale</span>.US)
    .run(<span class="keyword">new</span> IRunnable() {

      <span class="annotation">@Override</span>
      <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
        <span class="comment">// run some code</span>
      }
    });</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>An important difference is related to the <code>RunMonitor</code>. By using the <code>copyCurrent()</code> factory method, the context&#x2019;s monitor is additionally registered as child monitor of the monitor of the current calling context. That way, a cancellation request to the calling context is propagated down to this context as well. Of course, that behavior can be overwritten by providing another monitor yourself.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="properties-of-a-runcontext"><a class="anchor" href="#properties-of-a-runcontext"></a>31. Properties of a RunContext</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>The following properties are declared on a <code>RunContext</code> and are inherited by <code>ServerRunContext</code> and <code>ClientRunContext</code>.</p> 
     </div> 
     <table class="tableblock frame-all grid-all spread"> 
      <colgroup> 
       <col style="width: 10%;" /> 
       <col style="width: 80%;" /> 
       <col style="width: 10%;" /> 
      </colgroup> 
      <thead> 
       <tr> 
        <th class="tableblock halign-left valign-top">property</th> 
        <th class="tableblock halign-left valign-top">description</th> 
        <th class="tableblock halign-left valign-top">accessibility</th> 
       </tr> 
      </thead> 
      <tbody> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">runMonitor</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Monitor to query the cancellation status of the context. </p><p class="tableblock">* must not be <code>null</code> * is automatically set if creating the context by its factory * is automatically registered as child monitor if creating the context by <code>copyCurrent()</code> factory method</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">RunMonitor.CURRENT.get()</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Subject to run the code on behalf</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Subject.getSubject(AccessController.getContext())</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">locale</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Locale to be bound to the Locale <code>ThreadLocal</code></p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">NlsLocale.CURRENT.get()</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">propertyMap</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Properties to be bound to the Property <code>ThreadLocal</code></p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">PropertyMap.CURRENT.get()</p></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="properties-of-a-serverruncontext"><a class="anchor" href="#properties-of-a-serverruncontext"></a>32. Properties of a ServerRunContext</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A <code>ServerRunContext</code> controls propagation of server-side state and sets the transaction boundaries, and is a specialization of <code>RunContext</code>.</p> 
     </div> 
     <table class="tableblock frame-all grid-all spread"> 
      <colgroup> 
       <col style="width: 10%;" /> 
       <col style="width: 80%;" /> 
       <col style="width: 10%;" /> 
      </colgroup> 
      <thead> 
       <tr> 
        <th class="tableblock halign-left valign-top">property</th> 
        <th class="tableblock halign-left valign-top">description</th> 
        <th class="tableblock halign-left valign-top">accessibility</th> 
       </tr> 
      </thead> 
      <tbody> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">session</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Session to be bound to Session <code>ThreadLocal</code></p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">ISession.CURRENT.get()</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">transactionScope</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">To control transaction boundaries. By default, a new transaction is started, and committed or rolled back upon completion. </p><p class="tableblock"> * Use <code>TransactionScope.REQUIRES_NEW</code> to run the code in a new transaction (by default). * Use <code>TransactionScope.REQUIRED</code> to only start a new transaction if not running in a transaction yet. * Use <code>TransactionScope.MANDATORY</code> to enforce that the caller is already running in a transaction. Otherwise, a <code>TransactionRequiredException</code> is thrown.</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">ITransaction.CURRENT.get()</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">transaction</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Sets the transaction to be used to run the runnable. Has only an effect, if transaction scope is set to TransactionScope.REQUIRED or TransactionScope.MANDATORY. Normally, this property should not be set manually.</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">ITransaction.CURRENT.get()</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">clientNotificationCollector</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">To associate the context with the given ClientNotificationCollector, meaning that any code running on behalf of this context has that collector set in ClientNotificationCollector.CURRENT thread-local.<br /> That collector is used to collect all transactional client notifications, which are to be published upon successful commit of the associated transaction, and which are addressed to the client node which triggered processing (see withClientNodeId(String)). That way, transactional client notifications are not published immediately upon successful commit, but included in the client&#x2019;s response instead (piggyback).<br /> Typically, that collector is set by ServiceTunnelServlet for the processing of a service request.</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">ClientNotificationCollector.CURRENT.get()</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">clientNodeId</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Associates this context with the given 'client node ID', meaning that any code running on behalf of this context has that id set in IClientNodeId.CURRENT thread-local.<br /> Every client node (that is every UI server node) has its unique 'node ID' which is included with every 'client-server' request, and is mainly used to publish client notifications. If transactional client notifications are issued by code running on behalf of this context, those will not be published to that client node, but included in the request&#x2019;s response instead (piggyback).<br /> However, transactional notifications are only sent to clients upon successful commit of the transaction.<br /> Typically, this node ID is set by ServiceTunnelServlet for the processing of a service request.</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">IClientNodeId.CURRENT.get()</p></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="properties-of-a-clientruncontext"><a class="anchor" href="#properties-of-a-clientruncontext"></a>33. Properties of a ClientRunContext</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A <code>ClientRunContext</code> controls propagation of client-side state, and is a specialization of <code>RunContext</code>.</p> 
     </div> 
     <table class="tableblock frame-all grid-all spread"> 
      <colgroup> 
       <col style="width: 10%;" /> 
       <col style="width: 80%;" /> 
       <col style="width: 10%;" /> 
      </colgroup> 
      <thead> 
       <tr> 
        <th class="tableblock halign-left valign-top">property</th> 
        <th class="tableblock halign-left valign-top">description</th> 
        <th class="tableblock halign-left valign-top">accessibility</th> 
       </tr> 
      </thead> 
      <tbody> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">session</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Session to be bound to Session <code>ThreadLocal</code></p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">ISession.CURRENT.get()</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">form</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Associates this context with the given <code>IForm</code>, meaning that any code running on behalf of this context has that <code>IForm</code> set in <code>IForm.CURRENT</code> thread-local.<br /> That information is mainly used to determine the current calling model context, e.g. when opening a message-box to associate it with the proper <code>IDisplayParent</code>.<br /> Typically, that information is set by the UI facade when dispatching a request from UI, or when constructing UI model elements.</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">IForm.CURRENT.get()</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">outline</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Associates this context with the given <code>IOutline</code>, meaning that any code running on behalf of this context has that <code>IOutline</code> set in <code>IOutline.CURRENT</code> thread-local.<br /> That information is mainly used to determine the current calling model context, e.g. when opening a message-box to associate it with the proper <code>IDisplayParent</code>.<br /> Typically, that information is set by the UI facade when dispatching a request from UI, or when constructing UI model elements.</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">IOutline.CURRENT.get()</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">desktop</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Associates this context with the given <code>IDesktop</code>, meaning that any code running on behalf of this context has that <code>IDesktop</code> set in <code>IDesktop.CURRENT thread-local</code>.<br /> That information is mainly used to determine the current calling model context, e.g. when opening a message-box to associate it with the proper <code>IDisplayParent</code>.<br /> Typically, that information is set by the UI facade when dispatching a request from UI, or when constructing UI model elements.</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">IDesktop.CURRENT.get()</p></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <h1 id="runmonitor" class="sect0"><a class="anchor" href="#runmonitor"></a>RunMonitor</h1> 
   <div class="openblock partintro"> 
    <div class="content"> 
     <div class="paragraph"> 
      <p>A RunMonitor allows the registration of <code>ICancellable</code> objects, which are cancelled upon cancellation of this monitor. A RunMonitor is associated with every RunContext and IFuture, meaning that executing code can always query its current cancellation status via <code>RunMonitor.CURRENT.get().isCancelled()</code>.</p> 
     </div> 
     <div class="paragraph"> 
      <p>A <code>RunMonitor</code> itself is also of the type <code>ICancellable</code>, meaning that it can be registered within another monitor as well. That way, a monitor hierarchy can be created with support of nested cancellation. That is exactly what is done when creating a copy of the current calling context, namely that the new monitor is registered as <code>ICancellable</code> within the monitor of the current calling context. Cancellation only works top-down, and not bottom up, meaning that a parent monitor is not cancelled once a child monitor is cancelled.</p> 
     </div> 
     <div class="paragraph"> 
      <p>When registering a <code>ICancellable</code> and this monitor is already cancelled, the <code>ICancellable</code> is cancelled immediately.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Furthermore, a job&#x2019;s Future is linked with the job&#x2019;s <code>RunMonitor</code>, meaning that cancellation requests targeted to the <code>Future</code> are also propagated to the <code>RunMonitor</code>, and vice versa.</p> 
     </div> 
     <div class="paragraph"> 
      <p>The following <a href="#img-runmonitor_associations">Figure 2</a> illustrates the <code>RunMonitor</code> and its associations.</p> 
     </div> 
     <div id="img-runmonitor_associations" class="imageblock"> 
      <div class="content"> 
       <img src="images/runmonitor_associations.png" alt="runmonitor associations" /> 
      </div> 
      <div class="title">
       Figure 2. RunMonitor and its associations
      </div> 
     </div> 
    </div> 
   </div> 
   <h1 id="secure-output" class="sect0"><a class="anchor" href="#secure-output"></a>Secure Output</h1> 
   <div class="openblock partintro"> 
    <div class="content"> 
     <div class="paragraph"> 
      <p>This chapter describes how HTML Output can be handled in a secure way.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Scout applications often display potentially dangerous data, e.g. user input or data from other systems. Encoding this input in such a way, that it can not be executed, prevents security vulnerabilities like cross-site scripting.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="encoding-by-default"><a class="anchor" href="#encoding-by-default"></a>34. Encoding by Default</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>By default, all input in the Scout model is encoded. Examples are values/labels in value fields, cells in tables, message in message box. The reason behind this default choice is that developers do not have to think about output encoding in the standard case and are therefore less likely to forget output encoding and introduce a security vulnerability.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Example: In the following string field, the HTML &lt;b&gt; tag is encoded as <code>&amp;lt;b&amp;gt;bold text&amp;lt;/b&amp;gt;</code>:</p> 
     </div> 
     <div class="imageblock"> 
      <div class="content"> 
       <img src="images/encodedField.png" alt="encodedField" /> 
      </div> 
     </div> 
     <div class="literalblock"> 
      <div class="content"> 
       <pre>public class StringField extends AbstractStringField {
  @Override
  protected void execInitField() {
    setValue(&quot;...&lt;b&gt;Bold text&lt;/b&gt;...&quot;);
  }</pre> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="html-enabled"><a class="anchor" href="#html-enabled"></a>35. Html Enabled</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Sometimes developers may want to use HTML in the Scout model.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Examples are</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p>Simple styling of dynamic content, such as addresses or texts in message boxes</p> </li> 
       <li> <p>Text containing application-internal or external links</p> </li> 
       <li> <p>Html or XML content received from other systems, such as e-mails or html pages</p> </li> 
      </ul> 
     </div> 
     <div class="paragraph"> 
      <p>Html input should only partially be encoded or not at all.</p> 
     </div> 
     <div class="paragraph"> 
      <p>To disable the encoding of the whole value, the property <code>HtmlEnabled</code> can be used:</p> 
     </div> 
     <div class="literalblock"> 
      <div class="content"> 
       <pre>public class NoEncodingStringField extends AbstractStringField {
  @Override
  protected boolean getConfiguredHtmlEnabled() {
    return false;
  }</pre> 
      </div> 
     </div> 
     <div class="literalblock"> 
      <div class="content"> 
       <pre>@Override
protected void execInitField() {
  setValue(&quot;...&lt;b&gt;Bold text&lt;/b&gt;...&quot;);
}</pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>There are several ways to implement the use cases above. Some typical implementations are described in the following sections.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="css-class-and-other-model-properties"><a class="anchor" href="#css-class-and-other-model-properties"></a>35.1. CSS Class and Other Model Properties</h3> 
      <div class="paragraph"> 
       <p>Often using HTML in value fields or table cells is not necessary for styling. Very basic styling can be done for example by setting the CSS class.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="html-builder"><a class="anchor" href="#html-builder"></a>35.2. HTML Builder</h3> 
      <div class="paragraph"> 
       <p>For creating simple HTML files or fragments with encoded user input, the class <code>org.eclipse.scout.rt.platform.html.HTML</code> can be used. It is also easily possible to create application internal and external link with this approach.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="styling-in-the-ui-layer"><a class="anchor" href="#styling-in-the-ui-layer"></a>35.3. Styling in the UI-Layer</h3> 
      <div class="paragraph"> 
       <p>For more complex HTML, using <code>IBeanField</code> in the scout model and implementing the styling in the UI-Layer is often the preferred way. Links are possible as well.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="manual-encoding"><a class="anchor" href="#manual-encoding"></a>35.4. Manual Encoding</h3> 
      <div class="paragraph"> 
       <p>It is also possible to encode any String manually using <code>StringUtility.htmlEncode(String)</code>. <code>org.eclipse.scout.rt.platform.html.HTML</code> uses this method internally for encoding. However, using <code>HTML</code> is recommended, where possible, because it is more concise and leads to less errors.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="using-a-white-list-filter"><a class="anchor" href="#using-a-white-list-filter"></a>35.5. Using a White-List Filter</h3> 
      <div class="paragraph"> 
       <p>If HTML or XML from external sources or more complex HTML are used in the Scout model, using a white-list filter might be the best way to avoid security bugs. Libraries, such as <a href="http://jsoup.org/">JSoup</a> provide such a white-list filter. Scout currently does not include any services or utilities for using white-list filters, because the configuration and usage is very use-case-specific and would therefore not add much benefit.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <h1 id="client-notifications" class="sect0"><a class="anchor" href="#client-notifications"></a>Client Notifications</h1> 
   <div class="openblock partintro"> 
    <div class="content"> 
     <div class="paragraph"> 
      <p>In a scout application, typically, the scout client requests some data from the scout server. Sometimes, however, the communication needs go the other way: The scout server needs to inform the scout client about something. With client notifications it is possible to do so.</p> 
     </div> 
     <div id="img-client_notifications" class="imageblock"> 
      <div class="content"> 
       <img src="images/clientNotifications.png" alt="clientNotifications" /> 
      </div> 
      <div class="title">
       Figure 3. Client Notifications
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="examples-2"><a class="anchor" href="#examples-2"></a>36. Examples</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Example scenarios for client notifications are:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p>some data shared by client and server has changed (e.g. a cache on the client is no longer up-to-date, or a shared variable has changed)</p> </li> 
       <li> <p>a new incoming phone call is available for a specific client and should be shown in the GUI</p> </li> 
       <li> <p>a user wants to send a message to another user</p> </li> 
      </ul> 
     </div> 
     <div class="paragraph"> 
      <p>Scout itself uses client notifications to synchronize code type and permission caches and session shared variables.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="data-flow"><a class="anchor" href="#data-flow"></a>37. Data Flow</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A client notification message is just a serializable object. It is published on the server and can be addressed either to all client nodes or only to a specific session or user. On the UI server side, handlers can be used to react upon incoming notifications.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Client notification handlers may change the state of the client model. In case of visible changes in the UI, these changes are automatically reflected in the UI.</p> 
     </div> 
     <div class="paragraph"> 
      <p>In case of multiple server nodes, the client notifications are synchronized using cluster notifications to ensure that all UI servers receive the notifications.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="push-technology"><a class="anchor" href="#push-technology"></a>38. Push Technology</h2> 
    <div class="sectionbody"> 
     <div id="img-client_notifications" class="imageblock"> 
      <div class="content"> 
       <img src="images/cn_long_polling.png" alt="cn long polling" /> 
      </div> 
      <div class="title">
       Figure 4. Long Polling
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>Client notifications are implemented using <code>long polling</code> as described below, because long polling works reliably in most corporate networks with proxy servers between server and client as well as with security policies that do not allow server push.</p> 
     </div> 
     <div class="paragraph"> 
      <p>With long polling, the client requests notifications from the server repeatedly. If no new notifications are available on the server, instead of sending an empty response, the server holds the request open and waits until new notifications are available or a timeout is reached.</p> 
     </div> 
     <div class="paragraph"> 
      <p>In addition to the long polling mechanism, pending client notifications are also transferred to the client along with the response of regular client requests.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="components"><a class="anchor" href="#components"></a>39. Components</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A client notification can be published on the server using the <code>ClientNotificationRegistry</code>. Publishing can be done either in a non-transactional or transactional way (only processed, when the transaction is committed).</p> 
     </div> 
     <div class="paragraph"> 
      <p>The UI Server either receives the notifications via the <code>ClientNotificationPoller</code> or in case of transactional notifications together with the response of a regular service request. The notification is then dispatched to the corresponding handler.</p> 
     </div> 
     <div class="paragraph"> 
      <p>When a client notifications is published on the server, it is automatically synchronized with the other server nodes (by default).</p> 
     </div> 
     <div id="img-client_notification_big_picture" class="imageblock"> 
      <div class="content"> 
       <img src="images/cn_big_picture.png" alt="cn big picture" /> 
      </div> 
      <div class="title">
       Figure 5. Client Notification Big Picture
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="multiple-server-nodes"><a class="anchor" href="#multiple-server-nodes"></a>39.1. Multiple Server Nodes</h3> 
      <div id="img-client_notification_big_picture" class="imageblock"> 
       <div class="content"> 
        <img src="images/cn_multiple_servers.png" alt="cn multiple servers" /> 
       </div> 
       <div class="title">
        Figure 6. Client Notification Multiple Server Nodes
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>In order to deal with multiple ui-server nodes, the server holds a single notifications queue per ui-server node.</p> 
      </div> 
      <div class="paragraph"> 
       <p>In this queues only the relevant notifications need to be kept: If a client notification is addressed to a session or user, that does not exist on a ui-server node, it is not added to the queue.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Sessions and corresponding users are registered on the server upon creation (and de-registered after destruction).</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="publishing"><a class="anchor" href="#publishing"></a>40. Publishing</h2> 
    <div class="sectionbody"> 
     <div class="listingblock"> 
      <div class="title">
       Listing 49. Publishing Client Notifications
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java">BEANS.get(ClientNotificationRegistry.class).putForUser(<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> PersonTableChangedNotification());</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>There are several options to choose from when publishing a new client notification:</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="clientnotificationaddress"><a class="anchor" href="#clientnotificationaddress"></a>40.1. ClientNotificationAddress</h3> 
      <div class="paragraph"> 
       <p>The <code>ClientNotificationAddress</code> determines which how the client notification needs to be dispatched and handled. A client notification can be addressed to</p> 
      </div> 
      <div class="ulist"> 
       <ul> 
        <li> <p>all nodes</p> </li> 
        <li> <p>all sessions</p> </li> 
        <li> <p>one or more specific session</p> </li> 
        <li> <p>one or more specific user</p> </li> 
       </ul> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="transactional-vs-non-transactional"><a class="anchor" href="#transactional-vs-non-transactional"></a>40.2. Transactional vs. Non-transactional</h3> 
      <div class="paragraph"> 
       <p>Client notifications can be published in a transactional or non-transactional way.</p> 
      </div> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Transactional means that the client notifications are only published once the transaction is committed. If the transaction fails, client notifications are disregarded.</p> </li> 
        <li> <p>Non-transactional means that client notifications are published immediately without considering any transactions.</p> </li> 
       </ul> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="distributing-to-all-cluster-nodes"><a class="anchor" href="#distributing-to-all-cluster-nodes"></a>40.3. Distributing to all Cluster Nodes</h3> 
      <div class="paragraph"> 
       <p>Generally, it makes sense to distribute the client notifications automatically to all other server cluster nodes (if available). This is achieved using <code>ClusterNotifications</code>. It is however also possible to publish client notifications without cluster distribution. E.g. in case of client notifications already received from other cluster nodes.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="coalescing-notifications"><a class="anchor" href="#coalescing-notifications"></a>40.4. Coalescing Notifications</h3> 
      <div class="paragraph"> 
       <p>It is possible that a service generates a lot of client notifications that are obsolete once a newer notification is created. In this case a coalescer can be created to reduce the notifications:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 50. Client Notification Coalescer
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">BookmarkNotificationCoalescer</span> <span class="directive">implements</span> ICoalescer&lt;BookmarkChangedClientNotification&gt; {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">List</span>&lt;BookmarkChangedClientNotification&gt; coalesce(<span class="predefined-type">List</span>&lt;BookmarkChangedClientNotification&gt; notifications) {
    <span class="comment">// reduce to one</span>
    <span class="keyword">return</span> CollectionUtility.arrayList(CollectionUtility.firstElement(notifications));
  }
}</code></pre> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="handling"><a class="anchor" href="#handling"></a>41. Handling</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>The <code>ClientNotificationDispatcher</code> is responsible for dispatching the client notifications to the correct handler.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="creating-a-client-notification-handler"><a class="anchor" href="#creating-a-client-notification-handler"></a>41.1. Creating a Client Notification Handler</h3> 
      <div class="paragraph"> 
       <p>To create a new client notification handler for a specific client notification, all you need to do is creating a class implementing <code>org.eclipse.scout.rt.shared.notification.INotificationHandler&lt;T&gt;</code>, where <code>T</code> is the type (or subtype) of the notification to handle.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The new handler does not need to be registered anywhere. It is available via jandex class inventory.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 51. Notification Handler for 
        <code>MessageNotifications</code>
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">MessageNotificationHandler</span> <span class="directive">implements</span> INotificationHandler&lt;MessageNotification&gt; {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> handleNotification(<span class="directive">final</span> MessageNotification notification) {</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="handling-notifications-temporarily"><a class="anchor" href="#handling-notifications-temporarily"></a>41.2. Handling Notifications Temporarily</h3> 
      <div class="paragraph"> 
       <p>Sometimes it is necessary to start and stop handling notification dynamically, (e.g. when a form is opened) in this case <code>AbstractObservableNotificationHandler</code> can be used to add and remove listeners.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="asynchronous-dispatching"><a class="anchor" href="#asynchronous-dispatching"></a>41.3. Asynchronous Dispatching</h3> 
      <div class="paragraph"> 
       <p>Dispatching is always done asynchronously. However, in case of transactional notifications, a service call blocks until all transactional notifications returned with the service response are handled.</p> 
      </div> 
      <div class="paragraph"> 
       <p>This behavior was implemented to simplify for example the usage of shared caches:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 52. Blocking until notification handling completed
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">CodeService cs = BEANS.get(CodeService.class);
cs.reloadCodeType(UiThemeCodeType.class);

<span class="comment">//client-side reload triggered by client notifications is finished</span>
<span class="predefined-type">List</span>&lt;? <span class="directive">extends</span> ICode&lt;<span class="predefined-type">String</span>&gt;&gt; reloadedCodes = cs.getCodeType(UiThemeCodeType.class).getCodes();</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>In the example above, it is guaranteed, that the codetype is up-to-date as soon as reloadCodeType is finished.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="updating-scout-model"><a class="anchor" href="#updating-scout-model"></a>41.4. Updating Scout Model</h3> 
      <div class="paragraph"> 
       <p>Notification handlers are never called from a scout model thread. If the scout model needs to be updated when handling notifications, a model job needs to be created for that task.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 53. Notification Handler Creating Model Job
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> handleNotification(<span class="directive">final</span> MessageNotification notification) {
  ModelJobs.schedule(<span class="keyword">new</span> IRunnable() {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run() <span class="directive">throws</span> <span class="exception">Exception</span> {
      UserNodePage userPage = getUserNodePage();
      <span class="predefined-type">String</span> buddy = notification.getSenderName();

      <span class="keyword">if</span> (userPage != <span class="predefined-constant">null</span>) {
        ChatForm form = userPage.getChatForm(buddy);
        <span class="keyword">if</span> (form != <span class="predefined-constant">null</span>) {
          form.getHistoryField().addMessage(<span class="predefined-constant">false</span>, buddy, form.getUserName(), <span class="keyword">new</span> <span class="predefined-type">Date</span>(), notification.getMessage());
        }
      }
    }
  }, ModelJobs.newInput(ClientRunContexts.copyCurrent()));
}</code></pre> 
       </div> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> Make sure to always run updates to the scout models in a model job (forms, pages, &#x2026;&#x200b;): Use ModelJobs.schedule(&#x2026;&#x200b;) where necessary in notification handlers. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
    </div> 
   </div> 
   <h1 id="webservices-with-jax-ws" class="sect0"><a class="anchor" href="#webservices-with-jax-ws"></a>Webservices with JAX-WS</h1> 
   <div class="openblock partintro"> 
    <div class="content"> 
     <div class="paragraph"> 
      <p>The Java API for XML-Based Web Services (JAX-WS) is a Java programming language API for creating web services. JAX-WS is one of the Java XML programming APIs, and is part of the Java EE platform.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Scout facilitates working with webservices, supports you in the generation of artifacts, and provides the following functionality:</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="functionality-2"><a class="anchor" href="#functionality-2"></a>42. Functionality</h2> 
    <div class="sectionbody"> 
     <div class="ulist"> 
      <ul> 
       <li> <p>ready to go Maven profile for easy webservice stub and artifact generation</p> </li> 
       <li> <p>full JAX-WS 2.2 compliance</p> </li> 
       <li> <p>JAX-WS implementor independence</p> </li> 
       <li> <p>provides an up front port type <em>EntryPoint</em> to enforce for authentication, and to run web requests in a <a href="#runcontext">RunContext</a></p> </li> 
       <li> <p>adds cancellation support for on-going webservice requests</p> </li> 
       <li> <p>provides a port cache for webservice consumers</p> </li> 
       <li> <p>allows to participate in 2PC protocol for webservice consumers</p> </li> 
       <li> <p>allows to provide 'init parameters' to handlers</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="jax-ws-implementor-and-deployment"><a class="anchor" href="#jax-ws-implementor-and-deployment"></a>43. JAX-WS implementor and deployment</h2> 
    <div class="sectionbody"> 
     <div class="sect2"> 
      <h3 id="jax-ws-version-and-implementor"><a class="anchor" href="#jax-ws-version-and-implementor"></a>43.1. JAX-WS version and implementor</h3> 
      <div class="paragraph"> 
       <p>The JAX-WS Scout integration provides a thin layer on top of JAX-WS implementors to facilitate working with webservices. It depends on the JAX-WS 2.2.x API as specified in JSR 224. It is implementor neutral, and was tested with with the following implementations:</p> 
      </div> 
      <div class="ulist"> 
       <ul> 
        <li> <p><em>JAX-WS RI</em> (reference implementation) as shipped with Java 7 and Java 8</p> </li> 
        <li> <p><em>JAX-WS METRO</em> (2.2.10)</p> </li> 
        <li> <p><em>Apache CXF</em> (3.1.3)</p> </li> 
       </ul> 
      </div> 
      <div class="paragraph"> 
       <p>The integration does not require you to bundle the JAX-WS implementor with your application, which is a prerequisite for running in an EE container.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="running-jax-ws-in-a-servlet-container"><a class="anchor" href="#running-jax-ws-in-a-servlet-container"></a>43.2. Running JAX-WS in a servlet container</h3> 
      <div class="paragraph"> 
       <p>A servlet container like Apache Tomcat typically does not ship with a JAX-WS implementor. As the actual implementor, you can either use <em>JAX-WS RI</em> as shipped with the JRE, or provide a separate implementor like <em>JAX-WS METRO</em> or <em>Apache CXF</em> in the form of a Maven dependency. However, <em>JAX-WS RI</em> does not provide a servlet based entry point, because the Servlet API is not part of the Java SE specification.</p> 
      </div> 
      <div class="paragraph"> 
       <p>When publishing webservices, it therefore is easiest to ship with a separate implementor: Declare a respective Maven dependency in your webbapp project - that is the Maven module typically containing the application&#x2019;s <em>web.xml</em>.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="running-jax-ws-in-a-ee-container"><a class="anchor" href="#running-jax-ws-in-a-ee-container"></a>43.3. Running JAX-WS in a EE container</h3> 
      <div class="paragraph"> 
       <p>When running in an EE container, the container typically ships with a JAX-WS implementor. It is highly recommended to use that implementor, primarily to avoid classloading issues, and to further profit from the container&#x2019;s monitoring and authentication facility. Refer to the containers documentation for more information.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jaxws.implementor.configuration"><a class="anchor" href="#jaxws.implementor.configuration"></a>43.4. Configure JAX-WS implementor</h3> 
      <div class="paragraph"> 
       <p>JAX-WS Scout integration is prepared to run with different implementors. Unfortunately, some implementors do not implement the JSR exactly, or some important functionality is missing in the JSR. To address this fact without loosing implementor independence, the delegate bean <a href="#JaxWsImplementorSpecifics">JaxWsImplementorSpecifics</a> exists.</p> 
      </div> 
      <div class="paragraph"> 
       <p>As of now, Scout ships with three such implementor specific classes, which are activated via <em>config.properties</em> by setting the property <em>jaxws.implementor</em> with its fully qualified class name. By default, <em>JAX-WS METRO</em> implementor is installed.</p> 
      </div> 
      <div class="paragraph"> 
       <p>For instance, support for <em>Apache CXF</em> implementor is activated as following:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="txt">jaxws.implementor=org.eclipse.scout.rt.server.jaxws.implementor.JaxWsCxfSpecifics</code></pre> 
       </div> 
      </div> 
      <table class="tableblock frame-all grid-all spread"> 
       <colgroup> 
        <col style="width: 30%;" /> 
        <col style="width: 70%;" /> 
       </colgroup> 
       <thead> 
        <tr> 
         <th class="tableblock halign-left valign-top">class</th> 
         <th class="tableblock halign-left valign-top">description</th> 
        </tr> 
       </thead> 
       <tbody> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">JaxWsRISpecifics</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">implementor specifics for <em>JAX-WS Reference Implementation (RI)</em> as contained in JRE</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">JaxWsMetroSpecifics</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">implementor specifics for <em>JAX-WS METRO</em> implementation</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">JaxWsCxfSpecifics</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">implementor specifics for <em>Apache JAX-WS CXF</em> implementation</p></td> 
        </tr> 
       </tbody> 
      </table> 
      <div class="paragraph"> 
       <p>Of course, other implementors can be used as well. For that to work, install your own <em>JaxWsImplementorSpecifics</em> class, and reference its fully qualified name in <em>config.properties</em>.</p> 
      </div> 
      <div class="sect3"> 
       <h4 id="JaxWsImplementorSpecifics"><a class="anchor" href="#JaxWsImplementorSpecifics"></a>43.4.1. JaxWsImplementorSpecifics</h4> 
       <div class="paragraph"> 
        <p>This class encapsulates functionality that is defined in JAX-WS JSR 224, but may diverge among JAX-WS implementors. As of now, the following points are addressed:</p> 
       </div> 
       <div class="ulist"> 
        <ul> 
         <li> <p>missing support in JSR to set socket connect and read timeout;</p> </li> 
         <li> <p>proprietary 'property' to set response code in <em>Apache CXF</em>;</p> </li> 
         <li> <p>when working with <em>Apache CXF</em>, response header must be set directly onto Servlet Response, and not via <code>MessageContext</code>;</p> </li> 
         <li> <p>when working with <em>JAX-WS METRO</em> or <em>JAX-WS RI</em>, the handler&#x2019;s return value is ignored in one-way communication; instead, the chain must be exited by throwing a webservice exception;</p> </li> 
        </ul> 
       </div> 
       <div class="paragraph"> 
        <p>Learn more about how to configure a JAX-WS implementor: <a href="#jaxws.implementor.configuration">Configure JAX-WS implementor</a></p> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="jaxws.implementor.dependency"><a class="anchor" href="#jaxws.implementor.dependency"></a>43.4.2. Configure JAX-WS Maven dependency in pom.xml</h4> 
       <div class="paragraph"> 
        <p>The effective dependency to the JAX-WS implementor is to be specified in the pom.xml of the webapp module (not the server module). That allows for running with a different implementor depending on the environment, e.g. to provide the implementor yourself when starting the application from within your IDE in Jetty, or to use the container&#x2019;s implementor when deploying to an EE enabled application server. Even if providing the very same implementor for all environments yourself, it is good practice to do the configuration in the webapp module.</p> 
       </div> 
       <div class="paragraph"> 
        <p>A generally applicable configuration cannot be given, because the effective configuration depends on the implementor you choose, and whether it is already shipped with the application server you use. However, if <em>JAX-WS RI</em> is sufficient, you do not have to specify an implementor at all because already contained in JRE.</p> 
       </div> 
       <div class="paragraph"> 
        <p>If running in an EE application server, refer to the containers documentation for more information.</p> 
       </div> 
       <div class="paragraph"> 
        <p><a href="#lst-maven.dep.metro">Listing 54</a> provides sample configuration for shipping with <em>JAX_WS METRO</em> and <a href="#lst-maven.dep.cxf">Listing 55</a> does the same for <em>Apache CXF</em></p> 
       </div> 
       <div id="lst-maven.dep.metro" class="listingblock"> 
        <div class="title">
         Listing 54. Maven dependency for 
         <em>JAX-WS METRO</em>
        </div> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- JAX-WS METRO not bundled with JRE --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>com.sun.xml.ws<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>jaxws-rt<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>...<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
        </div> 
       </div> 
       <div id="lst-maven.dep.cxf" class="listingblock"> 
        <div class="title">
         Listing 55. Maven dependency for 
         <em>Apache CXF</em>
        </div> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- JAX-WS Apache CXF --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.apache.cxf<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>cxf-rt-frontend-jaxws<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>...<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.apache.cxf<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>cxf-rt-transports-http<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>...<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.springframework<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>spring-web<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>...<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
        </div> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="configure-jax-ws-servlet-in-web-xml"><a class="anchor" href="#configure-jax-ws-servlet-in-web-xml"></a>43.4.3. Configure JAX-WS servlet in web.xml</h4> 
       <div class="paragraph"> 
        <p>This section describes the configuration of the entry point Servlet to publish webservices. If working with webservice consumers only, no configuration is required.</p> 
       </div> 
       <div class="paragraph"> 
        <p>Similar to the pom.xml as described in <a href="#jaxws.implementor.dependency">Configure JAX-WS Maven dependency in pom.xml</a>, the <em>web.xml</em> differs from implementor to implementor, and whether the implementor is already shipped with the application server. Nevertheless, the following <a href="#lst-jaxws.webxml.metro">Listing 56</a> show a sample configuration for <em>JAX-WS METRO</em> and <a href="#lst-jaxws.webxml.cxf">Listing 57</a> for <em>Apache CXF</em>.</p> 
       </div> 
       <div id="lst-jaxws.webxml.metro" class="listingblock"> 
        <div class="title">
         Listing 56. web.xml for 
         <em>JAX-WS METRO</em> Servlet
        </div> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- JAX-WS METRO not bundled with JRE --&gt;</span>
<span class="tag">&lt;context-param&gt;</span>
  <span class="tag">&lt;param-name&gt;</span>com.sun.xml.ws.server.http.publishStatusPage<span class="tag">&lt;/param-name&gt;</span>
  <span class="tag">&lt;param-value&gt;</span>true<span class="tag">&lt;/param-value&gt;</span>
<span class="tag">&lt;/context-param&gt;</span>
<span class="tag">&lt;context-param&gt;</span>
  <span class="tag">&lt;param-name&gt;</span>com.sun.xml.ws.server.http.publishWSDL<span class="tag">&lt;/param-name&gt;</span>
  <span class="tag">&lt;param-value&gt;</span>true<span class="tag">&lt;/param-value&gt;</span>
<span class="tag">&lt;/context-param&gt;</span>
<span class="tag">&lt;listener&gt;</span>
  <span class="tag">&lt;listener-class&gt;</span>com.sun.xml.ws.transport.http.servlet.WSServletContextListener<span class="tag">&lt;/listener-class&gt;</span>
<span class="tag">&lt;/listener&gt;</span>
<span class="tag">&lt;servlet&gt;</span>
  <span class="tag">&lt;servlet-name&gt;</span>jaxws<span class="tag">&lt;/servlet-name&gt;</span>
  <span class="tag">&lt;servlet-class&gt;</span>com.sun.xml.ws.transport.http.servlet.WSServlet<span class="tag">&lt;/servlet-class&gt;</span>
<span class="tag">&lt;/servlet&gt;</span>
<span class="tag">&lt;servlet-mapping&gt;</span>
  <span class="tag">&lt;servlet-name&gt;</span>jaxws<span class="tag">&lt;/servlet-name&gt;</span>
  <span class="tag">&lt;url-pattern&gt;</span>/jaxws/*<span class="tag">&lt;/url-pattern&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;/servlet-mapping&gt;</span></code></pre> 
        </div> 
       </div> 
       <div class="colist arabic"> 
        <table> 
         <tbody>
          <tr> 
           <td><i class="conum" data-value="1"></i><b>1</b></td> 
           <td>the base URL where to publish the webservice endpoints</td> 
          </tr> 
         </tbody>
        </table> 
       </div> 
       <div id="lst-jaxws.webxml.cxf" class="listingblock"> 
        <div class="title">
         Listing 57. web.xml for 
         <em>Apache CXF</em> Servlet
        </div> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- JAX-WS Apache CXF --&gt;</span>
<span class="tag">&lt;servlet&gt;</span>
  <span class="tag">&lt;display-name&gt;</span>CXF Servlet<span class="tag">&lt;/display-name&gt;</span>
  <span class="tag">&lt;servlet-name&gt;</span>jaxws<span class="tag">&lt;/servlet-name&gt;</span>
  <span class="tag">&lt;servlet-class&gt;</span>org.apache.cxf.transport.servlet.CXFServlet<span class="tag">&lt;/servlet-class&gt;</span>
  <span class="tag">&lt;init-param&gt;</span>
    <span class="tag">&lt;param-name&gt;</span>config-location<span class="tag">&lt;/param-name&gt;</span>
    <span class="tag">&lt;param-value&gt;</span>/WEB-INF/cxf-jaxws.xml<span class="tag">&lt;/param-value&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;/init-param&gt;</span>
  <span class="tag">&lt;load-on-startup&gt;</span>1<span class="tag">&lt;/load-on-startup&gt;</span>
<span class="tag">&lt;/servlet&gt;</span>
<span class="tag">&lt;servlet-mapping&gt;</span>
  <span class="tag">&lt;servlet-name&gt;</span>jaxws<span class="tag">&lt;/servlet-name&gt;</span>
  <span class="tag">&lt;url-pattern&gt;</span>/jaxws/*<span class="tag">&lt;/url-pattern&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;/servlet-mapping&gt;</span></code></pre> 
        </div> 
       </div> 
       <div class="colist arabic"> 
        <table> 
         <tbody>
          <tr> 
           <td><i class="conum" data-value="1"></i><b>1</b></td> 
           <td><em>Apache CXF</em> specific configuration file for endpoints to be published. See <a href="#jaxws.registration.endpoints.cxf">Apache CXF</a> for more information.</td> 
          </tr> 
          <tr> 
           <td><i class="conum" data-value="2"></i><b>2</b></td> 
           <td>the base URL where to publish the webservice endpoints</td> 
          </tr> 
         </tbody>
        </table> 
       </div> 
       <div class="paragraph"> 
        <p>But, if running in an EE container, it is most likely that a Servlet configuration must not be configured, because the endpoints are discovered by the application server, or registered in a vendor specific way. Refer to the containers documentation for more information.</p> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody>
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> Some application servers like Oracle WebLogic Server (WLS) allow the port types to be registered as a Servlet in web.xml. However, this is vendor specific, and works despite the fact that port type does not implement 'javax.servlet.Servlet'. </td> 
          </tr> 
         </tbody>
        </table> 
       </div> 
       <div class="admonitionblock warning"> 
        <table> 
         <tbody>
          <tr> 
           <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
           <td class="content"> Do not forget to exclude the webservice&#x2019;s Servlet URL pattern from authentication filter. </td> 
          </tr> 
         </tbody>
        </table> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="jaxws.modularization"><a class="anchor" href="#jaxws.modularization"></a>44. Modularization</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Scout JAX-WS integration does not prescribe how to organize your webservices in terms of Maven modules. You could either put all your webservices directly into the server module, or create a separate <em>jaxws</em> module containing all webservices, or even create a separate <em>jaxws</em> module for each webservice. Most often, the second approach of a single, separate <em>jaxws</em> module, which the server module depends on, is chosen.</p> 
     </div> 
     <div class="paragraph"> 
      <p>This is mainly because of the following benefits:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p>annotation processing must not be enabled for the entire server module</p> </li> 
       <li> <p>one module to build all webservice artifacts at once</p> </li> 
       <li> <p>easier to work with shared element types among webservices</p> </li> 
      </ul> 
     </div> 
     <div class="imageblock"> 
      <div class="content"> 
       <img src="images/jaxws_modularization.png" alt="jaxws modularization" /> 
      </div> 
      <div class="title">
       Figure 7. typical modularization
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>It is important to note, that the <em>server</em> depends on the <em>jaxws</em> module, and not vice versa. The <em>jaxws</em> module is primarily of technical nature, meaning that it knows how to generate its WS artifacts, and also contains those. However, implementing port type beans and even implementing handler beans are typically put into the server module to the access service and database layer. On the other hand, WS clients may be put into <em>jaxws</em> module, because they rarely contain any project specific business logic.</p> 
     </div> 
     <div class="paragraph"> 
      <p>You may ask yourself, how the <em>jaxws</em> module can access the implementing port type and handlers located in the <em>server</em> module. That works because of the indirection via bean manager, and because there is a flat classpath at runtime.</p> 
     </div> 
     <div class="paragraph"> 
      <p>See <a href="#WebServiceEntryPoint">The concept of an Entry Point</a> for more information.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="build-webservice-stubs-and-artifacts"><a class="anchor" href="#build-webservice-stubs-and-artifacts"></a>45. Build webservice stubs and artifacts</h2> 
    <div class="sectionbody"> 
     <div class="sect2"> 
      <h3 id="jaxws.stub.generation"><a class="anchor" href="#jaxws.stub.generation"></a>45.1. Configure webservice stub generation via wsimport</h3> 
      <div class="paragraph"> 
       <p>The Maven plugin 'org.codehaus.mojo:jaxws-maven-plugin' with the goal 'wsimport' is used to generate a webservice stub from a WSDL file and its referenced XSD schema files. If your Maven module inherits from the Scout module 'maven_rt_plugin_config-master', the 'jaxws' profile is available, which activates automatically upon the presence of a 'WEB-INF/wsdl' folder. Instead of inheriting from that module, you can alternatively copy the 'jaxws' profile into your projects parent POM module.</p> 
      </div> 
      <div class="paragraph"> 
       <p>This profile is for convenience purpose, and provides a ready-to-go configuration to generate webservice stubs and webservice provider artifacts. It configures the 'jaxws-maven-plugin' to look for WSDL and XSD files in the folder 'src/main/resources/WEB-INF/wsdl', and for binding files in the folder '/src/main/resources/WEB-INF/binding'. Upon generation, the stub will be put into the folder 'target/generated-sources/wsimport'.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The profiles requires the Scout runtime version to be specified, and which is used to refer to <code>org.eclipse.scout.jaxws.apt</code> module to generate webservice provider artifacts. However, this version is typically defined in pom.xml of the parent module, because also used to refer to other Scout runtime artifacts.</p> 
      </div> 
      <div id="lst-jaxws.pom.scoutversion" class="listingblock"> 
       <div class="title">
        Listing 58. Scout version defined as Maven property
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;properties&gt;</span>
  <span class="tag">&lt;org.eclipse.scout.rt.version&gt;</span>5.2.0-SNAPSHOT<span class="tag">&lt;/org.eclipse.scout.rt.version&gt;</span>
<span class="tag">&lt;/properties&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>If your project design envisions a separate JAR module per WSDL, you simply have to set the property 'jaxws.wsdl.file' with the name of your WSDL file in the module&#x2019;s pom.xml (example in <a href="#lst-jaxws.pom.single-wsdl-file">Listing 59</a>).</p> 
      </div> 
      <div id="lst-jaxws.pom.single-wsdl-file" class="listingblock"> 
       <div class="title">
        Listing 59. wsimport configuration in pom.xml if working with a single WSDL file per JAR module
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;properties&gt;</span>
  <span class="tag">&lt;jaxws.wsdl.file&gt;</span>PingWebService.wsdl<span class="tag">&lt;/jaxws.wsdl.file&gt;</span> <span class="comment">&lt;!-- &lt;1&gt; --&gt;</span>
<span class="tag">&lt;/properties&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>name of the file</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>Otherwise, if having multiple WSDL files in your JAR module, some little more configuration is required, namely a respective execution section per WSDL file. Thereby, the 'id' of the execution section must be unique. Scout 'jaxws' profile already provides one such section, which is used to generate the stub for a single WSDL file (see such configuration in <a href="#lst-jaxws.pom.single-wsdl-file">Listing 59</a>), and names it 'wsimport-1'. It is simplest to name the subsequent execution sections 'wsimport-2', 'wsimport-3', and so on.<br /> For each execution section, you must configure its unique <em>id</em>, the <em>goal</em> 'wsimport', and in the configuration section the respective <em>wsdlLocation</em> and <em>wsdlFile</em>. For 'wsimport' to work, <em>wsdlLocation</em> is not required. However, that location will be referenced in generated artifacts to set the wsdl location via <code>@WebService</code> and <code>@WebServiceClient</code>. The complete configuration is presented in <a href="#lst-jaxws.pom.multiple-wsdl">Listing 60</a>.</p> 
      </div> 
      <div class="admonitionblock warning"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
          <td class="content"> If you decide to configure multiple WSDL files in your POM as described in <a href="#lst-jaxws.pom.multiple-wsdl">Listing 60</a>, the configuration defined in the parent POM (<code>maven_rt_plugin_config-master</code>) and expecting a configuration as presented in <a href="#lst-jaxws.pom.single-wsdl-file">Listing 59</a> needs to be overridden, therefore one of your execution id needs to be <code>wsimport-1</code>. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div id="lst-jaxws.pom.multiple-wsdl" class="listingblock"> 
       <div class="title">
        Listing 60. wsimport configuration in pom.xml if working with multiple WSDL files per JAR module
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;build&gt;</span>
  <span class="tag">&lt;plugins&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>jaxws-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;executions&gt;</span>
        <span class="comment">&lt;!-- YourFirstWebService.wsdl --&gt;</span>
        <span class="tag">&lt;execution&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
          <span class="tag">&lt;id&gt;</span>wsimport-1<span class="tag">&lt;/id&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
          <span class="tag">&lt;goals&gt;</span>
            <span class="tag">&lt;goal&gt;</span>wsimport<span class="tag">&lt;/goal&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
          <span class="tag">&lt;/goals&gt;</span>
          <span class="tag">&lt;configuration&gt;</span>
            <span class="tag">&lt;wsdlLocation&gt;</span>WEB-INF/wsdl/YourFirstWebService.wsdl<span class="tag">&lt;/wsdlLocation&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="tag">&lt;wsdlFiles&gt;</span>
              <span class="tag">&lt;wsdlFile&gt;</span>YourFirstWebService.wsdl<span class="tag">&lt;/wsdlFile&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
            <span class="tag">&lt;/wsdlFiles&gt;</span>
          <span class="tag">&lt;/configuration&gt;</span>
        <span class="tag">&lt;/execution&gt;</span>

        <span class="comment">&lt;!-- YourSecondWebService.wsdl --&gt;</span>
        <span class="tag">&lt;execution&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
          <span class="tag">&lt;id&gt;</span>wsimport-2<span class="tag">&lt;/id&gt;</span>
          <span class="tag">&lt;goals&gt;</span>
            <span class="tag">&lt;goal&gt;</span>wsimport<span class="tag">&lt;/goal&gt;</span>
          <span class="tag">&lt;/goals&gt;</span>
          <span class="tag">&lt;configuration&gt;</span>
            <span class="tag">&lt;wsdlLocation&gt;</span>WEB-INF/wsdl/YourSecondWebService.wsdl<span class="tag">&lt;/wsdlLocation&gt;</span>
            <span class="tag">&lt;wsdlFiles&gt;</span>
              <span class="tag">&lt;wsdlFile&gt;</span>YourSecondWebService.wsdl<span class="tag">&lt;/wsdlFile&gt;</span>
            <span class="tag">&lt;/wsdlFiles&gt;</span>
          <span class="tag">&lt;/configuration&gt;</span>
        <span class="tag">&lt;/execution&gt;</span>

        ...

      <span class="tag">&lt;/executions&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
  <span class="tag">&lt;/plugins&gt;</span>
<span class="tag">&lt;/build&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>declare an execution section for each WSDL file</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>give the section a unique id (wsimport-1, wsimport-2, wsimport-3, &#x2026;&#x200b;)</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="3"></i><b>3</b></td> 
          <td>specify the goal 'wsimport' to build the webservice stub</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="4"></i><b>4</b></td> 
          <td>specify the project relative path to the WSDL file</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="5"></i><b>5</b></td> 
          <td>specify the relative path to the WSDL file (relative to 'WEB-INF/wsdl')</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="6"></i><b>6</b></td> 
          <td>declare an execution section for the next WSDL file</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>Further, you can overwrite any configuration as defined by 'jaxws-maven-plugin'. See <a href="http://www.mojohaus.org/jaxws-maven-plugin/" class="bare">http://www.mojohaus.org/jaxws-maven-plugin/</a> for supported configuration properties.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Also, it is good practice to create a separate folder for each WSDL file, which also contains all its referenced XSD schemas. Then, do not forget to change the properties <em>wsdlLocation</em> and <em>wsdlFile</em> accordingly.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="customize-wsdl-components-and-xsd-schema-elements-via-binding-files"><a class="anchor" href="#customize-wsdl-components-and-xsd-schema-elements-via-binding-files"></a>45.2. Customize WSDL components and XSD schema elements via binding files</h3> 
      <div class="paragraph"> 
       <p>By default, all XML files contained in folder 'WEB-INF/binding' are used as binding files. But, most often, you will have a global binding file, which applies to all your WSDL files, and some custom binding files different per WSDL file and XSD schema files. See how to explicitly configure binding files in <a href="#lst-jaxws.pom.multiple-binding">Listing 61</a>.</p> 
      </div> 
      <div id="lst-jaxws.pom.multiple-binding" class="listingblock"> 
       <div class="title">
        Listing 61. explicit configuration of binding files
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- YourFirstWebService.wsdl --&gt;</span>
<span class="tag">&lt;execution&gt;</span>
  ...
  <span class="tag">&lt;configuration&gt;</span>
    ...
    <span class="tag">&lt;bindingFiles&gt;</span>
      <span class="tag">&lt;bindingFile&gt;</span>global-bindings.xml<span class="tag">&lt;/bindingFile&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;bindingFile&gt;</span>your-first-webservice-ws-bindings.xml<span class="tag">&lt;/bindingFile&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;bindingFile&gt;</span>your-first-webservice-xs-bindings.xml<span class="tag">&lt;/bindingFile&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;bindingFiles&gt;</span>
  <span class="tag">&lt;/configuration&gt;</span>
<span class="tag">&lt;/execution&gt;</span>

<span class="comment">&lt;!-- YourSecondWebService.wsdl --&gt;</span>
<span class="tag">&lt;execution&gt;</span>
  ...
  <span class="tag">&lt;configuration&gt;</span>
    ...
    <span class="tag">&lt;bindingFiles&gt;</span>
      <span class="tag">&lt;bindingFile&gt;</span>global-bindings.xml<span class="tag">&lt;/bindingFile&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;bindingFile&gt;</span>your-second-webservice-ws-bindings.xml<span class="tag">&lt;/bindingFile&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;bindingFile&gt;</span>your-second-webservice-xs-bindings.xml<span class="tag">&lt;/bindingFile&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;bindingFiles&gt;</span>
  <span class="tag">&lt;/configuration&gt;</span>
<span class="tag">&lt;/execution&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>global binding file which applies to all XSD schema elements. See <a href="#lst-jaxws.example.globalbindingfile">Listing 62</a> for an example.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>custom binding file to customize the webservice&#x2019;s WSDL components in the namespace <em><a href="http://java.sun.com/xml/ns/jaxws" class="bare">http://java.sun.com/xml/ns/jaxws</a></em>. See <a href="#lst-jaxws.bindingfile.ws">Listing 63</a> for an example.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="3"></i><b>3</b></td> 
          <td>custom binding file to customize the webservice&#x2019;s XSD schema elements in the namespace <em><a href="http://java.sun.com/xml/ns/jaxb" class="bare">http://java.sun.com/xml/ns/jaxb</a></em>. See <a href="#lst-jaxws.bindingfile.xs">Listing 64</a> for an example.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>With binding files in place, you can customize almost every WSDL component and XSD element that can be mapped to Java, such as the service endpoint interface class, packages, method name, parameter name, exception class, etc.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The global binding file typically contains some customization for common data types like <em>java.util.Date</em> or <em>java.util.Calendar</em>, whereas the custom binding files are specific for a WSDL or XSD schema. See <a href="#jaxws.xmladapters">XML adapters to work with java.util.Date and java.util.Calendar</a>.</p> 
      </div> 
      <div id="lst-jaxws.example.globalbindingfile" class="listingblock"> 
       <div class="title">
        Listing 62. example of global binding file in the namespace 
        <a href="http://java.sun.com/xml/ns/jaxb" class="bare">http://java.sun.com/xml/ns/jaxb</a>
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bindings</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/jaxb</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xsd</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xjc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/jaxb/xjc</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;globalBindings&gt;</span>
    <span class="tag">&lt;xjc:javaType</span>
      <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.util.Date</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd:date</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">adapter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.scout.rt.server.jaxws.adapter.UtcDateAdapter</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;xjc:javaType</span>
      <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.util.Date</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd:time</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">adapter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.scout.rt.server.jaxws.adapter.UtcTimeAdapter</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;xjc:javaType</span>
      <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.util.Date</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd:dateTime</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">adapter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.scout.rt.server.jaxws.adapter.UtcDateTimeAdapter</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/globalBindings&gt;</span>
<span class="tag">&lt;/bindings&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>By default, generated artifacts are put into the package corresponding to the element&#x2019;s namespace. Sometimes, you like to control the package names, but you want to do that on a per-namespace basis, and not put all the artifacts of a webservice into the very same package. That is mainly to omit collisions, and to have artifacts shared among webservices not duplicated.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Two separate binding files are required to customize WSDL components and XSD schema elements.<br /> That is because WSDL component customization is to be done in 'jaxws' namespace <a href="http://java.sun.com/xml/ns/jaxws" class="bare">http://java.sun.com/xml/ns/jaxws</a>, whereas XSD schema element customization in 'jaxb' namespace <a href="http://java.sun.com/xml/ns/jaxb" class="bare">http://java.sun.com/xml/ns/jaxb</a>.</p> 
      </div> 
      <div id="lst-jaxws.bindingfile.ws" class="listingblock"> 
       <div class="title">
        Listing 63. example of jaxws component customization in the namespace 
        <a href="http://java.sun.com/xml/ns/jaxws" class="bare">http://java.sun.com/xml/ns/jaxws</a>
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- binding to customize webservice components (xmlns=http://java.sun.com/xml/ns/jaxws) --&gt;</span>
<span class="tag">&lt;bindings</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/jaxws</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;package</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.ws.yourfirstwebservice</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;/bindings&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>customization via jaxws namespace: <a href="http://java.sun.com/xml/ns/jaxws" class="bare">http://java.sun.com/xml/ns/jaxws</a></td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>instructs to put all webservice components (port type, service) into package <em>org.eclipse.ws.yourfirstwebservice</em></td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div id="lst-jaxws.bindingfile.xs" class="listingblock"> 
       <div class="title">
        Listing 64. example of xsd schema element customization in the namespace 
        <a href="http://java.sun.com/xml/ns/jaxb" class="bare">http://java.sun.com/xml/ns/jaxb</a>
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- binding to customize xsd schema elements (xmlns=http://java.sun.com/xml/ns/jaxb) --&gt;</span>
<span class="tag">&lt;bindings</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/jaxb</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="comment">&lt;!-- namespace http://eclipse.org/public/services/ws/soap --&gt;</span>
  <span class="tag">&lt;bindings</span> <span class="attribute-name">scd</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">x-schema::tns</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:tns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://eclipse.org/public/services/ws/soap</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;schemaBindings&gt;</span>
      <span class="tag">&lt;package</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.ws.yourfirstwebservice</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tag">&lt;/schemaBindings&gt;</span>
  <span class="tag">&lt;/bindings&gt;</span>

  <span class="comment">&lt;!-- namespace http://eclipse.org/public/services/ws/common/soap --&gt;</span>
  <span class="tag">&lt;bindings</span> <span class="attribute-name">scd</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">x-schema::tns</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:tns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://eclipse.org/public/services/ws/common/soap</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;schemaBindings&gt;</span>
      <span class="tag">&lt;package</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.ws.common</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;/schemaBindings&gt;</span>
  <span class="tag">&lt;/bindings&gt;</span>
<span class="tag">&lt;/bindings&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>customization via jaxb namespace: <a href="http://java.sun.com/xml/ns/jaxb" class="bare">http://java.sun.com/xml/ns/jaxb</a></td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>instructs to put all XSD schema elements in namespace <em><a href="http://eclipse.org/public/services/ws/soap" class="bare">http://eclipse.org/public/services/ws/soap</a></em> into package <em>org.eclipse.ws.yourfirstwebservice</em></td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="3"></i><b>3</b></td> 
          <td>instructs to put all XSD schema elements in namespace <em><a href="http://eclipse.org/public/services/ws/common/soap" class="bare">http://eclipse.org/public/services/ws/common/soap</a></em> into package <em>org.eclipse.ws.common</em></td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="admonitionblock warning"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
          <td class="content"> <em>wsimport</em> allows to directly configure the package name for files to be generated (packageName). However, this is discouraged, because all artifacts are put into the very same package. Use package customization on a per-namespace basis instead. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> For shared webservice artifacts, you can also use XJC binding compiler to generate those artifacts in advance, and then provide the resulting episode binding file (META-INF/sun-jaxb.episode) to <em>wsimport</em>. See <a href="http://www.mojohaus.org/jaxb2-maven-plugin/Documentation/v2.2/xjc-mojo.html" class="bare">http://www.mojohaus.org/jaxb2-maven-plugin/Documentation/v2.2/xjc-mojo.html</a> for more information. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="annotation-processing-tool-apt"><a class="anchor" href="#annotation-processing-tool-apt"></a>45.3. Annotation Processing Tool (APT)</h3> 
      <div class="paragraph"> 
       <p>Annotation Processing (APT) is a tool which can be enabled to fire for annotated types during compilation. In JAX-WS Scout integration, it is used as a trigger to generate webservice port type implementations. Such an auto-generated port type implementation is called an entry point. It is to be published as the webservice&#x2019;s endpoint, and acts as an interceptor for webservice requests. It optionally enforces for authentication, and makes the request to be executed in a <a href="#runcontext">RunContext</a>. Then, it handles the web request to the effectively implementing port type bean for actual processing.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The entry point generated simplifies the actual port type implementation by removing lot of glue code to be written by hand otherwise. Of course, this entry point is just for convenience purpose, and it is up to you to make use of this artifact.</p> 
      </div> 
      <div class="paragraph"> 
       <p>When using 'jaxws' Scout Maven profile, annotation processing is enabled for that module by default. But, an entry point for a webservice port type will only be generated if enabled for that port type, meaning that a class annotated with <a href="#WebServiceEntryPoint">WebServiceEntryPoint</a> pointing to that very endpoint interface is found in this module. Anyway, for a sole webservice consumer, it makes no sense to generate an entry point at all.</p> 
      </div> 
      <div class="sect3"> 
       <h4 id="enable-annotation-processing-tool-apt-in-eclipse-ide"><a class="anchor" href="#enable-annotation-processing-tool-apt-in-eclipse-ide"></a>45.3.1. Enable Annotation Processing Tool (APT) in Eclipse IDE</h4> 
       <div class="paragraph"> 
        <p>In Eclipse IDE, the workspace build ignores annotation processing as configured in pom.xml. Instead, it must be enabled separately with the following files. Nevertheless, to simply run Maven build with annotation support from within Eclipse IDE, those files are not required.</p> 
       </div> 
       <table class="tableblock frame-all grid-all spread"> 
        <colgroup> 
         <col style="width: 40%;" /> 
         <col style="width: 60%;" /> 
        </colgroup> 
        <tbody> 
         <tr> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">file</p></td> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td> 
         </tr> 
         <tr> 
          <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#settings_org.eclipse.jdt.core.prefs">.settings/org.eclipse.jdt.core.prefs</a></p></td> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">Enables APT for this module via the property <em>org.eclipse.jdt.core.compiler.processAnnotations=enabled</em></p></td> 
         </tr> 
         <tr> 
          <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#settings_org.eclipse.jdt.apt.core.prefs">.settings/org.eclipse.jdt.apt.core.prefs</a></p></td> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">Enables APT for this module via the property <em>org.eclipse.jdt.apt.aptEnabled=true</em></p></td> 
         </tr> 
         <tr> 
          <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#factorypath">.factorypath</a></p></td> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the annotation processor to be used (<a href="#jaxwsannotationprocessor">JaxWsAnnotationProcessor</a>) and dependent artifacts</p></td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="generate_artifacts_from_console"><a class="anchor" href="#generate_artifacts_from_console"></a>45.4. Build webservice stubs and APT artifacts from console</h3> 
      <div class="paragraph"> 
       <p>Simply run <em>mvn clean compile</em> on the project. If you are experiencing some problems, run with -X debug flag to get a more detailed error message.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="generate_artifacts_from_eclipse"><a class="anchor" href="#generate_artifacts_from_eclipse"></a>45.5. Build webservice stubs and APT artifacts from within Eclipse IDE</h3> 
      <div class="paragraph"> 
       <p>In the Eclipse IDE, there are three ways to generate webservice stubs and APT artifacts.</p> 
      </div> 
      <div class="olist arabic"> 
       <ol class="arabic"> 
        <li> <p>the implicit way on behalf of the workspace build and m2e integration (automatically, but sometimes not reliable)</p> </li> 
        <li> <p>the explicit but potentially slow way by doing a 'Update Maven Project' with 'clean projects' checked (Alt+F5)</p> </li> 
        <li> <p>the explicit and faster way by running a Maven build for that project. Thereto, right-click on the project or pom.xml, then select the menu 'Run As | Maven build&#x2026;&#x200b;', then choose 'clean compile' as its goal and check 'Resolve workspace artifacts', and finally click 'Run'. Afterwards, do not forget to refresh the project by pressing F5.</p> </li> 
       </ol> 
      </div> 
      <div class="paragraph"> 
       <p>If the webservice stub(s) or APT artifacts are not generated (anew or at all), delete the target folder manually, and continue according to procedure number three. A possible reason might be the presence of 'target\jaxws\wsartifact-hash'. Then, for each webservice, a 'hash file' is computed by 'wsimport', so that regeneration only occurs upon a change of WSDL or XSD files.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="exclude-derived-resources-from-version-control"><a class="anchor" href="#exclude-derived-resources-from-version-control"></a>45.6. Exclude derived resources from version control</h3> 
      <div class="paragraph"> 
       <p>Stub and APT artifacts are derived resources, and should be excluded from version control. When working with Eclipse IDE, this is done automatically by eGit, because it adds derived resources to <em>.gitignore</em> (if configured to do so).</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jaxwsannotationprocessor"><a class="anchor" href="#jaxwsannotationprocessor"></a>45.7. JaxWsAnnotationProcessor</h3> 
      <div class="paragraph"> 
       <p><code>JaxWsAnnotationProcessor</code> is an annotation processor provided by Scout JAX-WS integration to generate an entry point for an endpoint interface during compilation. The instructions how to generate the entry point is given via a Java class or Java interface annotated with <a href="#WebServiceEntryPoint">WebServiceEntryPoint</a> annotation.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="provide-a-webservice"><a class="anchor" href="#provide-a-webservice"></a>46. Provide a webservice</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>In this chapter, you will learn how to publish a webservice provider via an entry point.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="WebServiceEntryPoint"><a class="anchor" href="#WebServiceEntryPoint"></a>46.1. The concept of an Entry Point</h3> 
      <div class="paragraph"> 
       <p>An entry point implements the endpoint interface (or port type interface), and is published as the webservice endpoint for that endpoint interface. The entry point itself is auto generated by <a href="#jaxwsannotationprocessor">JaxWsAnnotationProcessor</a> during compile time, based on instructions as given by the respective class/interface annotated with <code>WebServiceEntryPoint</code> annotation. The entry point is responsible to enforce authentication and to run the web request in a <code>RunContext</code>. In turn, the request is propagated to the bean implementing the endpoint interface.</p> 
      </div> 
      <div class="paragraph"> 
       <p><a href="#img-interaction_entrypoint_porttype">Figure 8</a> illustrates the endpoint&#x2019;s class hierarchy and the message flow for a web request.</p> 
      </div> 
      <div id="img-interaction_entrypoint_porttype" class="imageblock"> 
       <div class="content"> 
        <img src="images/jaxws_interaction_entrypoint_porttype.png" alt="jaxws interaction entrypoint porttype" /> 
       </div> 
       <div class="title">
        Figure 8. Interaction of entry point and port type
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>As you can see, both, entry point and port type implement the endpoint interface. But it is the entry point which is actually installed as the webservice endpoint, and which receives web requests. However, the webservice itself is implemented in the implementing bean, which typically is located in <em>server</em> module. See <a href="#jaxws.modularization">Modularization</a> for more information. Upon a web request, the entry point simply intercepts the web request, and then invokes the web method on the implementing bean for further processing.</p> 
      </div> 
      <div class="paragraph"> 
       <p>See an <a href="#PingWebServicePortTypeBean.java">example</a> of an implementing port type bean, which is invoked by entry point.</p> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> Do not forget to annotate the implementing bean with <code>ApplicationScoped</code> annotation in order to be found by bean manager. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="generate-an-entry-point-as-an-endpoint-interface"><a class="anchor" href="#generate-an-entry-point-as-an-endpoint-interface"></a>46.2. Generate an Entry Point as an endpoint interface</h3> 
      <div class="paragraph"> 
       <p>This section describes the steps required to generate an entry point. For demonstration purposes, a simple ping webservice is used, which provides a single method 'ping' to accept and return a <code>String</code> object.</p> 
      </div> 
      <div class="paragraph"> 
       <p>See the WSDL file of ping webservice: <a href="#PingWebService.wsdl">PingWebService.wsdl</a><br /> See the endpoint interface of ping webservice: <a href="#PingWebServicePortType.java">PingWebServicePortType.java</a></p> 
      </div> 
      <div class="paragraph"> 
       <p>To generate an entry point for the webservice&#x2019;s endpoint interface, create an interface as following in your jaxws project.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@WebServiceEntryPoint</span>(endpointInterface = PingWebServicePortType.class) <i class="conum" data-value="2"></i><b>(2)</b>
<span class="type">interface</span> <span class="class">PingWebServiceEntryPointDefinition</span> { <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Create an interface or class to act as an anchor for the <code>WebServiceEntryPoint</code> annotation. This class or interface has no special meaning, except that it declares the annotation to be interpreted by annotation processor.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Reference the endpoint interface for which an entry point should be generated for. Typically, the endpoint interface is generated by 'wsimport' and is annotated with <code>WebService</code> annotation.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>It is important to understand, that the interface <code>PingWebServiceEntryPointDefinition</code> solely acts as the anchor for the <code>WebServiceEntryPoint</code> annotation. This class or interface has no special meaning, except that it declares the annotation to be interpreted by annotation processor. Typically, this class is called <em>Entry Point Definition</em>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>If running <code>mvn clean compile</code>, an entry point is generated for that endpoint interface. See the entry point as generated for ping webservice: <a href="#PingWebServicePortTypeEntryPoint.java">PingWebServicePortTypeEntryPoint.java</a></p> 
      </div> 
      <div class="paragraph"> 
       <p>If you should experience some problems in the entry point generation, refer to <a href="#generate_artifacts_from_eclipse">Build webservice stubs and APT artifacts from within Eclipse IDE</a>, or <a href="#generate_artifacts_from_console">Build webservice stubs and APT artifacts from console</a>.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="instrument-the-entry-point-generation"><a class="anchor" href="#instrument-the-entry-point-generation"></a>46.3. Instrument the Entry Point generation</h3> 
      <div class="paragraph"> 
       <p>This section gives an overview on how to configure the entry point to be generated.</p> 
      </div> 
      <table class="tableblock frame-all grid-all spread"> 
       <colgroup> 
        <col style="width: 30%;" /> 
        <col style="width: 70%;" /> 
       </colgroup> 
       <thead> 
        <tr> 
         <th class="tableblock halign-left valign-top">attribute</th> 
         <th class="tableblock halign-left valign-top">description</th> 
        </tr> 
       </thead> 
       <tbody> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>endpointInterface</strong><br /> (<em>mandatory</em>)</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the endpoint interface for which to generate an entry point for.<br /> An endpoint interface defines the service&#x2019;s abstract webservice contract, and is also known as port type interface. Also, the endpoint interface is annotated with WebService annotation.</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">entryPointName</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the class name of the entry point generated. If not set, the name is like the name of the endpoint interface suffixed with EntryPoint.</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">entryPointPackage</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the package name of the entry point generated. If not set, the package name is the same as of the element declaring this WebServiceEntryPoint annotation.</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">serviceName</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the service name as declared in the WSDL file, and must be set if publishing the webservice via auto discovery in an EE container. Both, 'serviceName' and 'portName' uniquely identify a webservice endpoint to be published.<br /> See for valid service names in the WSDL: <code>&lt;wsdl:service name=&quot;SERVICE_NAME&quot;&gt;&#x2026;&#x200b;&lt;/wsdl:service&gt;</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">portName</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the name of the port as declared in the WSDL file, and must be set if publishing the webservice via auto discovery in an EE container. Both, 'serviceName' and 'portName' uniquely identify a webservice endpoint to be published.<br /> See for valid port names in the WSDL: <code>&lt;wsdl:service name=&quot;&#x2026;&#x200b;&quot;&gt;&lt;wsdl:port name=&quot;PORT_NAME&quot; binding=&quot;&#x2026;&#x200b;&quot;/&gt;&lt;/wsdl:service&gt;</code></p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">wsdlLocation</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the location of the WSDL document. If not set, the location is derived from WebServiceClient annotation which is typically initialized with the 'wsdlLocation' as provided to 'wsimport'.</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">authentication</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the authentication mechanism to be installed, and in which <code>RunContext</code> to run authenticated requests. By default, authentication is <em>disabled</em>. If <em>enabled</em>, an <code>AuthenticationHandler</code> is generated and registered in the handler chain as very first handler. However, the position of that handler can be changed via <em>order</em> field on <code>Authentication</code> annotation.<br /> See <a href="#jaxws.provider.authentication">Configure Authentication</a> for more information.</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">handlerChain</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the handlers to be installed. The order of the handlers is as declared. A handler is looked up as a bean, and must implement <code>javax.xml.ws.handler.Handler</code> interface.<br /> See <a href="#jaxws.provider.handlerChain">Configure JAX-WS Handlers</a> for more information.</p></td> 
        </tr> 
       </tbody> 
      </table> 
      <div class="paragraph"> 
       <p>Besides the instructions which can be set via <code>WebServiceEntryPoint</code> annotation, it is further possible to contribute other annotations to the entry point. Simply declare the annotation of your choice as a sibling annotation to <code>WebServiceEntryPoint</code> annotation. In turn, this annotation will be added to the entry point as well. This may be useful to enable some vendor specific features, or e.g. to enable <em>MTOM</em> to efficiently send binary data to a client.<br /> That also applies for <code>WebService</code> annotation to overwrite values as declared in the WSDL file.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Further, you can also provide your own <em>handler chain binding file</em>. However, <em>handlers</em> and <em>authentication</em> as declared via <code>WebServiceEntryPoint</code> annotation are ignored then.</p> 
      </div> 
      <div class="admonitionblock warning"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
          <td class="content"> Handlers registered via <em>handlerChain</em> must be beans, meaning either annotated with <em>@Bean</em> or <em>@ApplicationScoped</em>. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> The binding to the concrete endpoint is done via 'endpointInterface' attribute. If a WSDL declares multiple services, create a separate entry point definition for each service to be published. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> Annotate the <em>Entry Point Definition</em> class with `IgnoreWebServiceEntryPoint' to not generate an entry point for that definition. This is primarily used while developing an entry point, or for documenting purpose. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> Some fields require you to provide a Java class. Such fields are mostly of the annotation type <code>Clazz</code>, which accepts either the concrete <code>Class</code>, or its 'fully qualified name'. Use the latter if the class is not visible from within <code>jaxws</code> module.<br /> However, if ever possible specify a <code>Class</code>. Because most classes are looked up via bean manager, this can be achieved with an interface located in 'jaxws' module, but with an implementation in 'server' module. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="sect3"> 
       <h4 id="jaxws.provider.authentication"><a class="anchor" href="#jaxws.provider.authentication"></a>46.3.1. Configure Authentication</h4> 
       <div class="paragraph"> 
        <p>The field 'authentication' on <code>WebServiceEntryPoint</code> configures what authentication mechanism to install on the webservice endpoint, and in which <code>RunContext</code> to run authenticated webservice requests. It consists of the <a href="#IAuthenticationMethod">Authentication Method</a> to challenge the client to provide credentials, and the <a href="#ICredentialVerifier">Credential Verifier</a> to verify request&#x2019;s credentials against a data source.</p> 
       </div> 
       <div class="paragraph"> 
        <p>By default, authentication is <em>disabled</em>. If <em>enabled</em>, an <code>AuthenticationHandler</code> is generated and registered in the handler chain as very first handler. The position can be changed via <em>order</em> field on <code>Authentication</code> annotation.</p> 
       </div> 
       <div class="paragraph"> 
        <p>The following properties can be set.</p> 
       </div> 
       <table class="tableblock frame-all grid-all spread"> 
        <colgroup> 
         <col style="width: 30%;" /> 
         <col style="width: 70%;" /> 
        </colgroup> 
        <tbody> 
         <tr> 
          <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>method</strong><br /> (<em>mandatory</em>)</p></td> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the authentication method to be used to challenge the client to provide credentials. By default, <code>NullAuthenticationMethod</code> is used to disable authentication.<br /> See <a href="#IAuthenticationMethod">Authentication Method</a> for more information.</p></td> 
         </tr> 
         <tr> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">verifier<br /></p></td> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies against which data source credentials are to be verified. By default, <code>ForbiddenCredentialVerifier</code> is used to reject any webservice request.<br /> See <a href="#ICredentialVerifier">Credential Verifier</a> for more information.</p></td> 
         </tr> 
         <tr> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">order<br /></p></td> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the position where to register the authentication handler in the handler chain. By default, it is registered as the very first handler.</p></td> 
         </tr> 
         <tr> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">principalProducer</p></td> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the principal producer to use to create principals to represent authenticated users. By default, SimplePrincipalProducer is used.</p></td> 
         </tr> 
         <tr> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">runContextProducer</p></td> 
          <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates which <a href="#runcontext">RunContext</a> to use to run authenticated webservice requests. By default, <code>ServerRunContextProducer</code> is used, which is based on a session cache, and enforces to run in a new transaction.</p></td> 
         </tr> 
        </tbody> 
       </table> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody>
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> If using container based authentication (authentication enforced by the application server), use <a href="#containerbasedauthenticationmethod">ContainerBasedAuthenticationMethod</a> as authentication method, and do not configure a credential verifier. </td> 
          </tr> 
         </tbody>
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="example.entrypoint.definition"><a class="anchor" href="#example.entrypoint.definition"></a>46.4. Example of an Entry Point definition</h3> 
      <div id="jaxws.listing.porttypedefinition" class="listingblock"> 
       <div class="title">
        Listing 65. Example configuration for an entry point definition
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@WebServiceEntryPoint</span>(
    endpointInterface = PingWebServicePortType.class, <i class="conum" data-value="1"></i><b>(1)</b>
    entryPointName = <span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServiceEntryPoint</span><span class="delimiter">&quot;</span></span>,
    entryPointPackage = <span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.scout.docs.ws.ping</span><span class="delimiter">&quot;</span></span>,
    serviceName = <span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebService</span><span class="delimiter">&quot;</span></span>,
    portName = <span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServicePort</span><span class="delimiter">&quot;</span></span>,
    handlerChain = {<i class="conum" data-value="2"></i><b>(2)</b>
        <span class="annotation">@Handler</span>(<span class="annotation">@Clazz</span>(CorrelationIdHandler.class)), <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="annotation">@Handler</span>(value = <span class="annotation">@Clazz</span>(IPAddressFilter.class) , initParams = { <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="annotation">@InitParam</span>(key = <span class="string"><span class="delimiter">&quot;</span><span class="content">rangeFrom</span><span class="delimiter">&quot;</span></span>, value = <span class="string"><span class="delimiter">&quot;</span><span class="content">192.200.0.0</span><span class="delimiter">&quot;</span></span>),
            <span class="annotation">@InitParam</span>(key = <span class="string"><span class="delimiter">&quot;</span><span class="content">rangeTo</span><span class="delimiter">&quot;</span></span>, value = <span class="string"><span class="delimiter">&quot;</span><span class="content">192.255.0.0</span><span class="delimiter">&quot;</span></span>)}),
        <span class="annotation">@Handler</span>(<span class="annotation">@Clazz</span>(LogHandler.class)), <i class="conum" data-value="5"></i><b>(5)</b>
    },
    authentication = <span class="annotation">@Authentication</span>( <i class="conum" data-value="6"></i><b>(6)</b>
        order = <span class="integer">2</span>, <i class="conum" data-value="7"></i><b>(7)</b>
        method = <span class="annotation">@Clazz</span>(BasicAuthenticationMethod.class) , <i class="conum" data-value="8"></i><b>(8)</b>
        verifier = <span class="annotation">@Clazz</span>(ConfigFileCredentialVerifier.class) ) ) <i class="conum" data-value="9"></i><b>(9)</b>
<span class="annotation">@MTOM</span> <i class="conum" data-value="10"></i><b>(10)</b></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>References the endpoint interface for which to generate an entry point for.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Declares the handlers to be installed on that entry point. The order is as declared.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="3"></i><b>3</b></td> 
          <td>Registers the 'CorrelationIdHandler' as the first handler to set a correlation ID onto the current message context. See <a href="#jaxws.provider.statepropagation">Propagate state among Handlers and port type</a> for more information about state propagation.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="4"></i><b>4</b></td> 
          <td>Registers the 'IpAddressFilter' as the second handler to filter for IP addresses. Also, this handler is parameterized with 'init params' to configure the valid IP range.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="5"></i><b>5</b></td> 
          <td>Registers the <code>LogHandler</code> as the third handler to log SOAP messages.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="6"></i><b>6</b></td> 
          <td>Configures the webservice&#x2019;s authentication.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="7"></i><b>7</b></td> 
          <td>Configures the 'AuthHandler' to be put at position 2 (0-based), meaning in between of <code>IpAddressFilter</code> and <code>LogHandler</code>. By default, <code>AuthHandler</code> would be the very first handler in the handler chain.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="8"></i><b>8</b></td> 
          <td>Configures to use <em>BASIC AUTH</em> as authentication method.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="9"></i><b>9</b></td> 
          <td>Configures to verify user&#x2019;s credentials against 'config.properties' file.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="10"></i><b>10</b></td> 
          <td>Specification of an <code>MTOM</code> annotation to be added to the entry point.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>This configuration generates the following artifacts:</p> 
      </div> 
      <div class="imageblock"> 
       <div class="content"> 
        <img src="images/jaxws_example_pingws_artifacts_generated.png" alt="jaxws example pingws artifacts generated" /> 
       </div> 
       <div class="title">
        Figure 9. generated artifacts
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>All artifacts are generated into the package 'org.eclipse.scout.docs.ws.ping', as specified by the definition. The entry point itself is generated into 'PingWebServiceEntryPoint.java'. Further, for each handler, a respective handler delegate is generated. That allows handlers to be looked up via bean manager, and to run the handlers on behalf of a <code>RunContext</code>. Also, an <code>AuthHandler</code> is generated to authenticate web requests as configured.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The handler-chain XML file generated looks as following. As specified, the authentication handler is installed as the third handler.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 66. PingWebServiceEntryPoint_handler-chain.xml
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">&lt;handler-chains xmlns=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/javaee</span><span class="delimiter">&quot;</span></span>&gt;
  &lt;handler-chain&gt;
    &lt;!-- Executed as <span class="integer">4</span>. handler--&gt;
    &lt;handler&gt;
      &lt;handler-<span class="type">class</span>&gt;<span class="class">org</span>.eclipse.scout.docs.ws.ping.PingWebServiceEntryPoint_LogHandler&lt;/handler-<span class="type">class</span>&gt;
    &lt;/<span class="class">handler</span>&gt;
  &lt;/handler-chain&gt;
  &lt;handler-chain&gt;
    &lt;!-- Executed as <span class="integer">3</span>. handler--&gt;
    &lt;handler&gt;
      &lt;handler-<span class="type">class</span>&gt;<span class="class">org</span>.eclipse.scout.docs.ws.ping.PingWebServiceEntryPoint_AuthHandler&lt;/handler-<span class="type">class</span>&gt;
    &lt;/<span class="class">handler</span>&gt;
  &lt;/handler-chain&gt;
  &lt;handler-chain&gt;
    &lt;!-- Executed as <span class="integer">2</span>. handler--&gt;
    &lt;handler&gt;
      &lt;handler-<span class="type">class</span>&gt;<span class="class">org</span>.eclipse.scout.docs.ws.ping.PingWebServiceEntryPoint_IPAddressFilter&lt;/handler-<span class="type">class</span>&gt;
    &lt;/<span class="class">handler</span>&gt;
  &lt;/handler-chain&gt;
  &lt;handler-chain&gt;
    &lt;!-- Executed as <span class="integer">1</span>. handler--&gt;
    &lt;handler&gt;
      &lt;handler-<span class="type">class</span>&gt;<span class="class">org</span>.eclipse.scout.docs.ws.ping.PingWebServiceEntryPoint_CorrelationIdHandler&lt;/handler-<span class="type">class</span>&gt;
    &lt;/<span class="class">handler</span>&gt;
  &lt;/handler-chain&gt;
&lt;/handler-chains&gt;</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>The following listing shows the beginning of the entry point generated. As you can see, the handler-chain XML file is referenced via <code>HandlerChain</code> annotation, and the <code>MTOM</code> annotation was added as well.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 67. PingWebServiceEntryPoint.java
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@WebService</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServicePortType</span><span class="delimiter">&quot;</span></span>,
    targetNamespace = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/</span><span class="delimiter">&quot;</span></span>,
    endpointInterface = <span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.scout.docs.snippets.JaxWsSnippet.PingWebServicePortType</span><span class="delimiter">&quot;</span></span>,
    serviceName = <span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebService</span><span class="delimiter">&quot;</span></span>,
    portName = <span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServicePort</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MTOM</span>
<span class="annotation">@HandlerChain</span>(file = <span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServiceEntryPoint_handler-chain.xml</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">PingWebServiceEntryPoint</span> <span class="directive">implements</span> org.eclipse.scout.docs.snippets.JaxWsSnippet.PingWebServicePortType {</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jaxws.provider.handlerChain"><a class="anchor" href="#jaxws.provider.handlerChain"></a>46.5. Configure JAX-WS Handlers</h3> 
      <div class="paragraph"> 
       <p>See <a href="#example.entrypoint.definition">listing</a> for an example of how to configure JAX-WS handlers.</p> 
      </div> 
      <div class="paragraph"> 
       <p>JAX-WS handlers are configured directly on the entry point definition via the array field <code>handlerChain</code>. In turn, <em>JaxWsAnnotationProcessor</em> generates a 'handler XML file' with the handler&#x2019;s order preserved, and which is registered in entry point via annotation <code>handlerChain</code>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>A handler can be initialized with static 'init parameters', which will be injected into the handler instance. For the injection to work, declare a member of the type <code>Map</code> in the handler class, and annotate it with <code>javax.annotation.Resource</code> annotation.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Because handlers are looked up via bean manager, a handler must be annotated with <code>ApplicationScoped</code> annotation.</p> 
      </div> 
      <div class="paragraph"> 
       <p>If a handler requires to be run in a <code>RunContext</code>, annotate the handler with <code>RunWithRunContext</code> annotation, and optionally specify a <code>RunContextProducer</code>. If the web request is authenticated upon entering the handler, the <code>RunContext</code> is run on behalf of the authenticated user. Otherwise, if not authenticated yet, it is invoked with the Subject as configured in <code>jaxws.provider.user.handler</code> config property.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 68. Example of a JAX-WS Handler
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@RunWithRunContext</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IPAddressFilter</span> <span class="directive">implements</span> SOAPHandler&lt;SOAPMessageContext&gt; {

  <span class="annotation">@Resource</span>
  <span class="directive">private</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; m_initParams; <i class="conum" data-value="3"></i><b>(3)</b>

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">boolean</span> handleMessage(SOAPMessageContext context) {
    <span class="predefined-type">String</span> rangeForm = m_initParams.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">rangeFrom</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="predefined-type">String</span> rangeTo = m_initParams.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">rangeTo</span><span class="delimiter">&quot;</span></span>);
    <span class="comment">// ...</span>
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">boolean</span> handleFault(SOAPMessageContext context) {
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">Set</span>&lt;<span class="predefined-type">QName</span>&gt; getHeaders() {
    <span class="keyword">return</span> <span class="predefined-type">Collections</span>.emptySet();
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> close(MessageContext context) {
  }
}</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Annotate the Handler with <code>ApplicationScoped</code> annotation, so it can be looked up via bean manager</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Optionally annotate the Handler with <code>RunWithRunContext</code> annotation, so the handler is invoked in a <code>RunContext</code></td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="3"></i><b>3</b></td> 
          <td>Declare a <code>Map</code> member annotated with <code>Resource</code> annotation to make injection of 'init parameters' work</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="4"></i><b>4</b></td> 
          <td>Access injected 'init parameters'</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jaxws.provider.statepropagation"><a class="anchor" href="#jaxws.provider.statepropagation"></a>46.6. Propagate state among Handlers and port type</h3> 
      <div class="paragraph"> 
       <p>Sometimes it is useful to share state among handlers, and even with the port type. This can be done via <code>javax.xml.ws.handler.MessageContext</code>. By default, a property put onto message context is only available in the handler chain. To make it available to the port type as well, set its scope to 'APPLICATION' accordingly.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The following listings gives an example of how to propagate state among handlers and port type.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 69. This handler puts the correlation ID onto message context to be accessible by subsequent handlers and the port type.
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CorrelationIdHandler</span> <span class="directive">implements</span> SOAPHandler&lt;SOAPMessageContext&gt; {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">boolean</span> handleMessage(SOAPMessageContext context) {
    context.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">cid</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">UUID</span>.randomUUID().toString()); <i class="conum" data-value="1"></i><b>(1)</b>
    context.setScope(<span class="string"><span class="delimiter">&quot;</span><span class="content">cid</span><span class="delimiter">&quot;</span></span>, Scope.APPLICATION); <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">boolean</span> handleFault(SOAPMessageContext context) {
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">Set</span>&lt;<span class="predefined-type">QName</span>&gt; getHeaders() {
    <span class="keyword">return</span> <span class="predefined-type">Collections</span>.emptySet();
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> close(MessageContext context) {
  }
}</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Put the 'correlation ID' onto message context.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Set scope to <em>APPLICATION</em> to be accessible in port type. By default, the scope if <em>HANDLER</em> only.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div id="jaxws.handler.statepropagation.readcid" class="listingblock"> 
       <div class="title">
        Listing 70. This handler accesses the 'correlation ID' as set by the previous handler.
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CorrelationIdLogger</span> <span class="directive">implements</span> SOAPHandler&lt;SOAPMessageContext&gt; {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">boolean</span> handleMessage(SOAPMessageContext context) {
    <span class="predefined-type">String</span> correlationId = (<span class="predefined-type">String</span>) context.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">cid</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="comment">// ...</span>
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">boolean</span> handleFault(SOAPMessageContext context) {
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="type">void</span> close(MessageContext context) {
  }

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">Set</span>&lt;<span class="predefined-type">QName</span>&gt; getHeaders() {
    <span class="keyword">return</span> <span class="predefined-type">Collections</span>.emptySet();
  }
}</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Get the 'correlation ID' from message context.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 71. This port type accesses the 'correlation ID' as set by the previous handler.
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CorrelationIdPortType</span> <span class="directive">implements</span> PingWebServicePortType {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> ping(<span class="predefined-type">String</span> ping) {
    MessageContext currentMsgCtx = IWebServiceContext.CURRENT.get().getMessageContext(); <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="predefined-type">String</span> correlationId = (<span class="predefined-type">String</span>) currentMsgCtx.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">cid</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="comment">// ...</span>
    <span class="keyword">return</span> ping;
  }
}</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Get the current message context via thread local <code>IWebServiceContext</code></td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Get the 'correlation ID' from message context.</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="registration-of-webservice-endpoints"><a class="anchor" href="#registration-of-webservice-endpoints"></a>46.7. Registration of webservice endpoints</h3> 
      <div class="paragraph"> 
       <p>The registration of webservice endpoints depends on the implementor you use, and whether you are running in an EE container with webservice auto discovery enabled.</p> 
      </div> 
      <div class="paragraph"> 
       <p>When running in an EE container, webservice providers are typically found by their presence. In order to be found, such webservice providers must be annotated with <code>WebService</code> annotation, and must have the coordinates 'serviceName' and 'portName' set. Still, most application servers allow for manual registration as well. E.g. if using Oracle WebLogic Server (WLS), endpoints to be published can be registered directly in 'web.xml' as a Servlet. However, this is vendor specific. Refer to the container&#x2019;s documentation for more information.</p> 
      </div> 
      <div class="paragraph"> 
       <p>If not running in an EE container, the registration is implementor specific. In the following, an example for <em>JAX-WS METRO</em> and <em>Apache CXF</em> is given.</p> 
      </div> 
      <div class="sect3"> 
       <h4 id="jax-ws-metro"><a class="anchor" href="#jax-ws-metro"></a>46.7.1. JAX-WS METRO</h4> 
       <div class="paragraph"> 
        <p>During startup, <em>JAX-WS METRO</em> looks for the file '/WEB-INF/sun-jaxws.xml', which contains the endpoint definitions.</p> 
       </div> 
       <div class="listingblock"> 
        <div class="title">
         Listing 72. WEB-INF/sun-jaxws.xml
        </div> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;jws:endpoints</span> <span class="attribute-name">xmlns:jws</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/jax-ws/ri/runtime</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="comment">&lt;!-- PingWebService --&gt;</span>
  <span class="tag">&lt;jws:endpoint</span>
      <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PingService</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">implementation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.scout.docs.ws.ping.PingWebServiceEntryPoint</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">service</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{http://scout.eclipse.org/docs/ws/PingWebService/}PingWebService</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{http://scout.eclipse.org/docs/ws/PingWebService/}PingWebServiceSOAP</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">url-pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/jaxws/PingWebService</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/jws:endpoints&gt;</span></code></pre> 
        </div> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="jaxws.registration.endpoints.cxf"><a class="anchor" href="#jaxws.registration.endpoints.cxf"></a>46.7.2. Apache CXF</h4> 
       <div class="paragraph"> 
        <p>During startup, <em>Apache CXF</em> looks for the config file as specified in 'web.xml' via 'config-location'. See <a href="#lst-jaxws.webxml.cxf">Listing 57</a> for more information.</p> 
       </div> 
       <div class="listingblock"> 
        <div class="title">
         Listing 73. WEB-INF/cxf-jaxws.xml
        </div> 
        <div class="content"> 
         <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;beans</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:jaxws</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://cxf.apache.org/jaxws</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span> <span class="content">http://www.springframework.org/schema/beans</span> <span class="content">http://www.springframework.org/schema/beans/spring-beans.xsd</span> <span class="content">http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;import</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:META-INF/cxf/cxf.xml</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

  <span class="comment">&lt;!-- PingWebService --&gt;</span>
  <span class="tag">&lt;jaxws:endpoint</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebService</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">implementor</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.scout.docs.ws.ping.PingWebServiceEntryPoint</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">address</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/PingWebService</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/beans&gt;</span></code></pre> 
        </div> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody>
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> As the webservice endpoint, specify the fully qualified name to the entry point, and not to the implementing port type. </td> 
          </tr> 
         </tbody>
        </table> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody>
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> Depending on the implementor, a HTML page may be provided to see all webservices published.<br /> For <em>JAX-WS METRO</em>, enter the URL to a concrete webservice, e.g. <a href="http://localhost:8080/jaxws/PingWebService" class="bare">http://localhost:8080/jaxws/PingWebService</a>.<br /> For <em>Apache CXF</em>, enter the base URL where the webservices are published, e.g. <a href="http://localhost:8080/jaxws" class="bare">http://localhost:8080/jaxws</a>. </td> 
          </tr> 
         </tbody>
        </table> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="consume-a-webservice"><a class="anchor" href="#consume-a-webservice"></a>47. Consume a webservice</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Communication with a webservice endpoint is done based on the webservice&#x2019;s port generated by 'wsimport'. Learn more how to <a href="#jaxws.stub.generation">generate a webservice stub from a WSDL file</a>.</p> 
     </div> 
     <div class="paragraph"> 
      <p>To interact with a webservice endpoint, create a concrete 'WebServiceClient' class which extends from <code>AbstractWebServiceClient</code>, and specify the endpoint&#x2019;s coordinates ('service' and 'port') via its bounded type parameters.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 74. Example of a WS-Client
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">PingWebServiceClient</span> <span class="directive">extends</span> AbstractWebServiceClient&lt;PingWebService, PingWebServicePortType&gt; { <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Specify 'service' and 'port' via bounded type parameters</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="paragraph"> 
      <p>A WS-Client can be configured with some default values like the endpoint URL, credentials, timeouts and more. However, the configuration can also be set or overwritten later when creating the <code>InvocationContext</code>.</p> 
     </div> 
     <div class="paragraph"> 
      <p>See also <a href="#jaxws.consumer.configuration">Default configuration of WS-Clients</a>.</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Listing 75. Example of a WS-Client configuration
      </div> 
      <div class="content"> 
       <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">PingWebServiceClient1</span> <span class="directive">extends</span> AbstractWebServiceClient&lt;PingWebService, PingWebServicePortType&gt; {

  <span class="annotation">@Override</span>
  <span class="directive">protected</span> <span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> IConfigProperty&lt;<span class="predefined-type">String</span>&gt;&gt; getConfiguredEndpointUrlProperty() {
    <span class="keyword">return</span> JaxWsPingEndpointUrlProperty.class; <i class="conum" data-value="1"></i><b>(1)</b>
  }

  <span class="annotation">@Override</span>
  <span class="directive">protected</span> <span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> IConfigProperty&lt;<span class="predefined-type">String</span>&gt;&gt; getConfiguredUsernameProperty() {
    <span class="keyword">return</span> JaxWsPingUsernameProperty.class; <i class="conum" data-value="2"></i><b>(2)</b>
  }

  <span class="annotation">@Override</span>
  <span class="directive">protected</span> <span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> IConfigProperty&lt;<span class="predefined-type">String</span>&gt;&gt; getConfiguredPasswordProperty() {
    <span class="keyword">return</span> JaxWsPingPasswordProperty.class; <i class="conum" data-value="2"></i><b>(2)</b>
  }

  <span class="annotation">@Override</span>
  <span class="directive">protected</span> <span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> IConfigProperty&lt;<span class="predefined-type">Integer</span>&gt;&gt; getConfiguredConnectTimeoutProperty() {
    <span class="keyword">return</span> JaxWsPingConnectTimeoutProperty.class; <i class="conum" data-value="3"></i><b>(3)</b>
  }

  <span class="annotation">@Override</span>
  <span class="directive">protected</span> <span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> IConfigProperty&lt;<span class="predefined-type">Integer</span>&gt;&gt; getConfiguredReadTimeoutProperty() {
    <span class="keyword">return</span> JaxWsPingReadTimeoutProperty.class; <i class="conum" data-value="3"></i><b>(3)</b>
  }
}</code></pre> 
      </div> 
     </div> 
     <div class="colist arabic"> 
      <table> 
       <tbody>
        <tr> 
         <td><i class="conum" data-value="1"></i><b>1</b></td> 
         <td>Specifies the endpoint URL</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="2"></i><b>2</b></td> 
         <td>Specifies credentials</td> 
        </tr> 
        <tr> 
         <td><i class="conum" data-value="3"></i><b>3</b></td> 
         <td>Specifies timeouts</td> 
        </tr> 
       </tbody>
      </table> 
     </div> 
     <div class="sect2"> 
      <h3 id="invoke-a-webservice"><a class="anchor" href="#invoke-a-webservice"></a>47.1. Invoke a webservice</h3> 
      <div class="paragraph"> 
       <p>A webservice operation is invoked on behalf of an invocation context, which is associated with a dedicated port, and which specifies the data to be included in the web request. Upon a webservice call, the invocation context should be discarded.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 76. Example of a webservice call
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">PingWebServicePortType port = BEANS.get(PingWebServiceClient.class).newInvocationContext().getPort(); <i class="conum" data-value="1"></i><b>(1)</b>

port.ping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello world</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Obtain a new invocation context and port via WS-Client</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Invoke the webservice operation</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>Invoking <code>newInvocationContext()</code> returns a new context and port instance. The context returned inherits all properties as configured for the WS-Client (endpoint URL, credentials, timeouts, &#x2026;&#x200b;), but which can be overwritten for the scope of this context.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The following listing illustrates how to set/overwrite properties.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
        Listing 77. Configure invocation context with data to be included in the web request
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">final</span> InvocationContext&lt;PingWebServicePortType&gt; context = BEANS.get(PingWebServiceClient.class).newInvocationContext();

PingWebServicePortType port = context
    .withUsername(<span class="string"><span class="delimiter">&quot;</span><span class="content">test-user</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
    .withPassword(<span class="string"><span class="delimiter">&quot;</span><span class="content">secret</span><span class="delimiter">&quot;</span></span>)
    .withConnectTimeout(<span class="integer">10</span>, <span class="predefined-type">TimeUnit</span>.SECONDS) <i class="conum" data-value="2"></i><b>(2)</b>
    .withoutReadTimeout() <i class="conum" data-value="3"></i><b>(3)</b>
    .withHttpRequestHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">X-ENV</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">integration</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="4"></i><b>(4)</b>
    .getPort();

port.ping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello world</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="5"></i><b>(5)</b></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Set the credentials</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Change the connect timeout to 10s</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="3"></i><b>3</b></td> 
          <td>Unset the read timeout</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="4"></i><b>4</b></td> 
          <td>Add a HTTP request header</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="5"></i><b>5</b></td> 
          <td>Invoke the webservice operation</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>The WS-Client provides port instances via a preemptive port cache. This cache improves performance because port creation may be an expensive operation due to WSDL/schema validation. The cache is based on a 'corePoolSize', meaning that that number of ports is created on a preemptively basis. If more ports than that number are required, they are are created on demand, and additionally added to the cache until expired, which is useful at a high load.</p> 
      </div> 
      <div class="admonitionblock warning"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
          <td class="content"> The JAX-WS specification does not specify thread safety of a port instance. Therefore, a port should not be used concurrently among threads. Further, JAX-WS API does not support to reset the Port&#x2019;s request and response context, which is why a port should only be used for a single webservice call. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="cancel-a-webservice-request"><a class="anchor" href="#cancel-a-webservice-request"></a>47.2. Cancel a webservice request</h3> 
      <div class="paragraph"> 
       <p>The WS-Client supports for cancellation of webservice requests. Internally, every web request is run in another thread, which the calling thread waits for to complete. Upon cancellation, that other thread is interrupted, and the calling thread released with a <code>WebServiceRequestCancelledException</code>. However, depending on the JAX-WS implementor, the web request may still be running, because JAX-WS API does not support the cancellation of a web request.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="get-information-about-the-last-web-request"><a class="anchor" href="#get-information-about-the-last-web-request"></a>47.3. Get information about the last web request</h3> 
      <div class="paragraph"> 
       <p>The invocation context allows you to access HTTP status code and HTTP headers of the last web request.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">final</span> InvocationContext&lt;PingWebServicePortType&gt; context = BEANS.get(PingWebServiceClient.class).newInvocationContext();

<span class="predefined-type">String</span> pingResult = context.getPort().ping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello world</span><span class="delimiter">&quot;</span></span>);

<span class="comment">// Get HTTP status code</span>
<span class="type">int</span> httpStatusCode = context.getHttpStatusCode();

<span class="comment">// Get HTTP response header</span>
<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; httpResponseHeader = context.getHttpResponseHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">X-CUSTOM-HEADER</span><span class="delimiter">&quot;</span></span>);</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="propagate-state-to-handlers"><a class="anchor" href="#propagate-state-to-handlers"></a>47.4. Propagate state to Handlers</h3> 
      <div class="paragraph"> 
       <p>An invocation context can be associated with request context properties, which are propagated to handlers and JAX-WS implementor.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java">BEANS.get(PingWebServiceClient.class).newInvocationContext()
    .withRequestContextProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">cid</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">UUID</span>.randomUUID().toString()) <i class="conum" data-value="1"></i><b>(1)</b>
    .getPort().ping(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello world</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="2"></i><b>(2)</b></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody>
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Propagate the correlation ID</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Invoke the web operation</td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>Learn more how to <a href="#jaxws.handler.statepropagation.readcid">Listing 70</a>.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="install-handlers-and-provide-credentials-for-authentication"><a class="anchor" href="#install-handlers-and-provide-credentials-for-authentication"></a>47.5. Install handlers and provide credentials for authentication</h3> 
      <div class="paragraph"> 
       <p>To install a handler, overwrite <code>execInstallHandlers</code> and add the handler to the given List. The handlers are invoked in the order as added to the handler-chain. By default, there is no handler installed.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The method <code>execInstallHandlers</code> is invoked upon preemptive creation of the port. Consequently, you cannot do any assumption about the calling thread.</p> 
      </div> 
      <div class="paragraph"> 
       <p>If a handler requires to run in another <code>RunContext</code> than the calling context, annotate it with <code>RunWithRunContext</code> annotation, e.g. to start a new transaction to log into database.</p> 
      </div> 
      <div class="paragraph"> 
       <p>If the endpoint requires to authenticate requests, an authentication handler is typically added to the list, e.g. <code>BasicAuthenticationHandler</code> for 'Basic authentication', or <code>WsseUsernameTokenAuthenticationHandler</code> for 'Message Level WS-Security authentication', or some other handler to provide credentials.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">PingWebServiceClient2</span> <span class="directive">extends</span> AbstractWebServiceClient&lt;PingWebService, PingWebServicePortType&gt; {

  <span class="annotation">@Override</span>
  <span class="directive">protected</span> <span class="type">void</span> execInstallHandlers(<span class="predefined-type">List</span>&lt;javax.xml.ws.handler.Handler&lt;?&gt;&gt; handlerChain) {
    handlerChain.add(<span class="keyword">new</span> BasicAuthenticationHandler());
    handlerChain.add(<span class="keyword">new</span> LogHandler());
  }
}</code></pre> 
       </div> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> The credentials as provided via <code>InvocationContext</code> can be accessed via request context with the property <code>InvocationContext.PROP_USERNAME</code> and <code>InvocationContext.PROP_PASSWORD</code>. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="jaxws.consumer.configuration"><a class="anchor" href="#jaxws.consumer.configuration"></a>47.6. Default configuration of WS-Clients</h3> 
      <div class="paragraph"> 
       <p>The following properties can be set globally for all WS-Clients. However, a WS-Client can overwrite any of this values.</p> 
      </div> 
      <table class="tableblock frame-all grid-all spread"> 
       <colgroup> 
        <col style="width: 30%;" /> 
        <col style="width: 50%;" /> 
        <col style="width: 20%;" /> 
       </colgroup> 
       <thead> 
        <tr> 
         <th class="tableblock halign-left valign-top">property</th> 
         <th class="tableblock halign-left valign-top">description</th> 
         <th class="tableblock halign-left valign-top">default value</th> 
        </tr> 
       </thead> 
       <tbody> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">jaxws.consumer.portCache.enabled</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">To indicate whether to use a preemptive port cache for WS-Clients.<br /> Depending on the implementor used, cached ports may increase performance, because port creation is an expensive operation due to WSDL and schema validation. The cache is based on a 'corePoolSize', meaning that that number of ports is created on a preemptive basis. If more ports than that number is required, they are are created on demand and also added to the cache until expired, which is useful at a high load.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">jaxws.consumer.portCache.corePoolSize</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Number of ports to be preemptively cached to speed up webservice calls.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">jaxws.consumer.portCache.ttl</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Maximum time in seconds to retain ports in the cache if the 'corePoolSize' is exceeded. That typically occurs at high load, or if 'corePoolSize' is undersized.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">15 minutes</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">jaxws.consumer.connectTimeout</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Connect timeout in milliseconds to abort a webservice request, if establishment of the HTTP connection takes longer than this timeout. A timeout of null means an infinite timeout.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">infinite</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">jaxws.consumer.readTimeout</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Read timeout in milliseconds to abort a webservice request, if it takes longer than this timeout for data to be available for read. A timeout of null means an infinite timeout.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">infinite</p></td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="jaxws.xmladapters"><a class="anchor" href="#jaxws.xmladapters"></a>48. XML adapters to work with java.util.Date and java.util.Calendar</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Scout ships with some XML adapters to not have to work with <code>XMLGregorianCalendar</code>, but with <code>java.util.Date</code> instead.<br /> It is recommended to configure your global binding file accordingly. See <a href="#lst-jaxws.example.globalbindingfile">Listing 62</a> for an example.</p> 
     </div> 
     <div class="paragraph"> 
      <p>See the adapter&#x2019;s JavaDoc for more detailed information.</p> 
     </div> 
     <table class="tableblock frame-all grid-all spread"> 
      <caption class="title">
       Table 1. UTC Date adapters
      </caption> 
      <colgroup> 
       <col style="width: 35%;" /> 
       <col style="width: 65%;" /> 
      </colgroup> 
      <thead> 
       <tr> 
        <th class="tableblock halign-left valign-top">adapter</th> 
        <th class="tableblock halign-left valign-top">description</th> 
       </tr> 
      </thead> 
      <tbody> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">UtcDateAdapter</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Use this adapter to work with UTC <em>xsd:dates</em>. A UTC date is also known as 'zulu' date, and has 'GMT+-00:00'. Unlike <code>UtcDateTimeAdapter</code>, this adapter truncates hours, minutes, seconds and milliseconds.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">UtcTimeAdapter</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Use this adapter to work with UTC <em>xsd:times</em>. A UTC time is also known as 'zulu' time, and has 'GMT+-00:00'. Unlike <code>UtcDateTimeAdapter</code>, this adapter sets year, month and day to the epoch, which is defined as 1970-01-01 in UTC.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">UtcDateTimeAdapter</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Use this adapter to work with UTC <em>xsd:dateTimes</em>. A UTC time is also known as 'zulu' time, and has 'GMT+-00:00'. </p><p class="tableblock">This adapter converts xsd:dateTime into UTC milliseconds, by respecting the timezone as provided. If the timezone is missing, the date is interpreted as UTC-time, and not local to the default JVM timezone. To convert a <code>Date</code> into <em>xsd:dateTime</em>, the date&#x2019;s milliseconds are used as UTC milliseconds from the epoch, and are formatted as 'zulu' time.</p></td> 
       </tr> 
      </tbody> 
     </table> 
     <table class="tableblock frame-all grid-all spread"> 
      <caption class="title">
       Table 2. Calendar adapters
      </caption> 
      <colgroup> 
       <col style="width: 35%;" /> 
       <col style="width: 65%;" /> 
      </colgroup> 
      <thead> 
       <tr> 
        <th class="tableblock halign-left valign-top">adapter</th> 
        <th class="tableblock halign-left valign-top">description</th> 
       </tr> 
      </thead> 
      <tbody> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">CalendarDateAdapter</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Use this adapter to work with <code>Calendar</code> <em>xsd:dates</em> without loosing timezone information. Unlike CalendarDateTimeAdapter, this adapter truncates hours, minutes, seconds and milliseconds.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">CalendarTimeAdapter</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Use this adapter to work with <code>Calendar</code> <em>xsd:times</em> without loosing timezone information. Unlike CalendarDateTimeAdapter, this adapter sets year, month and day to the epoch, which is defined as 1970-01-01 in UTC.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">CalendarDateTimeAdapter</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Adapter to convert a <em>xsd:dateTime</em> to a <code>Calendar</code> and vice versa. For both directions, the timezone information is not lost. Use this adapter if you expect to work with dates from various timezones without loosing the local time. If the UTC (Zulu-time) is sufficient, use <code>UtcDateTimeAdapter</code> instead.</p></td> 
       </tr> 
      </tbody> 
     </table> 
     <table class="tableblock frame-all grid-all spread"> 
      <caption class="title">
       Table 3. Default timezone Date adapters
      </caption> 
      <colgroup> 
       <col style="width: 35%;" /> 
       <col style="width: 65%;" /> 
      </colgroup> 
      <thead> 
       <tr> 
        <th class="tableblock halign-left valign-top">adapter</th> 
        <th class="tableblock halign-left valign-top">description</th> 
       </tr> 
      </thead> 
      <tbody> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">DefaultTimezoneDateAdapter</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Use this adapter to work with <em>xsd:dates</em> in the default timezone of the Java Virtual Machine. Depending on the JVM installation, the timezone may differ: 'GMT+-XX:XX'. Unlike <code>DefaultTimezoneDateTimeAdapter</code>, this adapter truncates hours, minutes, seconds and milliseconds.<br /> Whenever possible, use <code>UtcDateAdapter</code> or <code>CalendarDateAdapter</code> instead.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">DefaultTimezoneTimeAdapter</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Use this adapter to work with <em>xsd:times</em> in the default timezone of the Java Virtual Machine. Depending on the JVM installation, the timezone may differ: 'GMT+-XX:XX'. Unlike DefaultTimezoneDateTimeAdapter, this adapter sets year, month and day to the epoch, which is defined as 1970-01-01 in UTC.<br /> Whenever possible, use <code>UtcTimeAdapter</code> or <code>CalendarTimeAdapter</code> instead.</p></td> 
       </tr> 
       <tr> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">DefaultTimezoneDateTimeAdapter</p></td> 
        <td class="tableblock halign-left valign-top"><p class="tableblock">Use this adapter to work with <em>xsd:dateTimes</em> in the default timezone of the Java Virtual Machine. Depending on the JVM installation, the timezone may differ: 'GMT+-XX:XX'.<br /> Whenever possible, use <code>UtcDateTimeAdapter</code> or <code>CalendarDateTimeAdapter</code> instead.</p></td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="jax-ws-appendix"><a class="anchor" href="#jax-ws-appendix"></a>49. JAX-WS Appendix</h2> 
    <div class="sectionbody"> 
     <div class="sect2"> 
      <h3 id="PingWebService.wsdl"><a class="anchor" href="#PingWebService.wsdl"></a>49.1. PingWebService.wsdl</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span>
<span class="tag">&lt;wsdl:definitions</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebService</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">targetNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:tns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:soap</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/wsdl/soap/</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:wsdl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/wsdl/</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xsd</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;wsdl:types&gt;</span>
    <span class="tag">&lt;xsd:schema</span> <span class="attribute-name">targetNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;xsd:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">pingRequest</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xsd:element</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">pingResponse</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd:string</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/xsd:schema&gt;</span>
  <span class="tag">&lt;/wsdl:types&gt;</span>
  <span class="tag">&lt;wsdl:message</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">pingRequest</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;wsdl:part</span> <span class="attribute-name">element</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:pingRequest</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ping</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/wsdl:message&gt;</span>
  <span class="tag">&lt;wsdl:message</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">pingResponse</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;wsdl:part</span> <span class="attribute-name">element</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:pingResponse</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/wsdl:message&gt;</span>
  <span class="tag">&lt;wsdl:portType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServicePortType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ping</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;wsdl:input</span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:pingRequest</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;wsdl:output</span> <span class="attribute-name">message</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:pingResponse</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/wsdl:operation&gt;</span>
  <span class="tag">&lt;/wsdl:portType&gt;</span>
  <span class="tag">&lt;wsdl:binding</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServiceSOAP</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:PingWebServicePortType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;soap:binding</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">document</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">transport</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://schemas.xmlsoap.org/soap/http</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;wsdl:operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ping</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;soap:operation</span> <span class="attribute-name">soapAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/ping</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;wsdl:input&gt;</span>
        <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;/wsdl:input&gt;</span>
      <span class="tag">&lt;wsdl:output&gt;</span>
        <span class="tag">&lt;soap:body</span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">literal</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;/wsdl:output&gt;</span>
    <span class="tag">&lt;/wsdl:operation&gt;</span>
  <span class="tag">&lt;/wsdl:binding&gt;</span>
  <span class="tag">&lt;wsdl:service</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebService</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;wsdl:port</span> <span class="attribute-name">binding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tns:PingWebServiceSOAP</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServiceSOAP</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;soap:address</span> <span class="attribute-name">location</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/wsdl:port&gt;</span>
  <span class="tag">&lt;/wsdl:service&gt;</span>
<span class="tag">&lt;/wsdl:definitions&gt;</span></code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="PingWebServicePortType.java"><a class="anchor" href="#PingWebServicePortType.java"></a>49.2. PingWebServicePortType.java</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@WebService</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServicePortType</span><span class="delimiter">&quot;</span></span>, targetNamespace = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@SOAPBinding</span>(parameterStyle = SOAPBinding.ParameterStyle.BARE)
<span class="directive">public</span> <span class="type">interface</span> <span class="class">PingWebServicePortType</span> {

  <span class="annotation">@WebMethod</span>(action = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/ping</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@WebResult</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">pingResponse</span><span class="delimiter">&quot;</span></span>, targetNamespace = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/</span><span class="delimiter">&quot;</span></span>, partName = <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>)
  <span class="predefined-type">String</span> ping(<span class="annotation">@WebParam</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">pingRequest</span><span class="delimiter">&quot;</span></span>, targetNamespace = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/</span><span class="delimiter">&quot;</span></span>, partName = <span class="string"><span class="delimiter">&quot;</span><span class="content">ping</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> ping);
}</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="PingWebServicePortTypeEntryPoint.java"><a class="anchor" href="#PingWebServicePortTypeEntryPoint.java"></a>49.3. PingWebServicePortTypeEntryPoint.java</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Generated</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.scout.jaxws.apt.JaxWsAnnotationProcessor</span><span class="delimiter">&quot;</span></span>, date = <span class="string"><span class="delimiter">&quot;</span><span class="content">2016-01-25T14:22:58:583+0100</span><span class="delimiter">&quot;</span></span>, comments = <span class="string"><span class="delimiter">&quot;</span><span class="content">EntryPoint to run webservice requests on behalf of a RunContext</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@WebService</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">PingWebServicePortType</span><span class="delimiter">&quot;</span></span>, targetNamespace = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://scout.eclipse.org/docs/ws/PingWebService/</span><span class="delimiter">&quot;</span></span>, endpointInterface = <span class="string"><span class="delimiter">&quot;</span><span class="content">org.eclipse.scout.docs.ws.pingwebservice.PingWebServicePortType</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">PingWebServicePortTypeEntryPoint</span> <span class="directive">implements</span> org.eclipse.scout.docs.ws.pingwebservice.PingWebServicePortType {

  <span class="annotation">@Resource</span>
  <span class="directive">protected</span> WebServiceContext m_webServiceContext;

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> ping(<span class="directive">final</span> <span class="predefined-type">String</span> ping) {
    <span class="directive">final</span> RunContext servletRunContext = JaxWsServletRunContexts.copyCurrent().withWebServiceContext(m_webServiceContext);
    <span class="directive">final</span> RunContext requestRunContext = MessageContexts.getRunContext(m_webServiceContext.getMessageContext());
    <span class="keyword">try</span> {
      <span class="keyword">return</span> servletRunContext.call(<span class="keyword">new</span> <span class="predefined-type">Callable</span>&lt;<span class="predefined-type">String</span>&gt;() {

        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="directive">final</span> <span class="predefined-type">String</span> call() <span class="directive">throws</span> <span class="exception">Exception</span> {
          <span class="keyword">if</span> (requestRunContext == <span class="predefined-constant">null</span>) {
            <span class="keyword">return</span> BEANS.get(org.eclipse.scout.docs.ws.pingwebservice.PingWebServicePortType.class).ping(ping);
          }
          <span class="keyword">else</span> {
            <span class="keyword">return</span> requestRunContext.call(<span class="keyword">new</span> <span class="predefined-type">Callable</span>&lt;<span class="predefined-type">String</span>&gt;() {

              <span class="annotation">@Override</span>
              <span class="directive">public</span> <span class="directive">final</span> <span class="predefined-type">String</span> call() <span class="directive">throws</span> <span class="exception">Exception</span> {
                <span class="keyword">return</span> BEANS.get(org.eclipse.scout.docs.ws.pingwebservice.PingWebServicePortType.class).ping(ping);
              }
            }, DefaultExceptionTranslator.class);
          }
        }
      }, DefaultExceptionTranslator.class);
    }
    <span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
      <span class="keyword">throw</span> handleUndeclaredFault(e);
    }
  }

  <span class="directive">protected</span> <span class="exception">RuntimeException</span> handleUndeclaredFault(<span class="directive">final</span> <span class="exception">Exception</span> e) {
    <span class="keyword">if</span> (e <span class="keyword">instanceof</span> <span class="exception">RuntimeException</span>) {
      <span class="keyword">throw</span> (<span class="exception">RuntimeException</span>) e;
    }
    <span class="keyword">else</span> {
      <span class="keyword">throw</span> <span class="keyword">new</span> HTTPException(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
    }
  }
}</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="PingWebServicePortTypeBean.java"><a class="anchor" href="#PingWebServicePortTypeBean.java"></a>49.4. PingWebServicePortTypeBean.java</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">PingWebServicePortTypeBean</span> <span class="directive">implements</span> PingWebServicePortType {

  <span class="annotation">@Override</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> ping(<span class="predefined-type">String</span> ping) {
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">ping: </span><span class="delimiter">&quot;</span></span> + ping;
  }
}</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="settings_org.eclipse.jdt.core.prefs"><a class="anchor" href="#settings_org.eclipse.jdt.core.prefs"></a>49.5. .settings/org.eclipse.jdt.core.prefs file to enable APT in Eclipse IDE</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml">...
org.eclipse.jdt.core.compiler.processAnnotations=enabled
...</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="settings_org.eclipse.jdt.apt.core.prefs"><a class="anchor" href="#settings_org.eclipse.jdt.apt.core.prefs"></a>49.6. .settings/org.eclipse.jdt.apt.core.prefs file to enable APT in Eclipse IDE</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml">org.eclipse.jdt.apt.aptEnabled=true
org.eclipse.jdt.apt.genSrcDir=target/generated-sources/annotations
org.eclipse.jdt.apt.processorOptions/consoleLog=true
org.eclipse.jdt.apt.reconcileEnabled=true</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="factorypath"><a class="anchor" href="#factorypath"></a>49.7. .factorypath file to enable APT in Eclipse IDE</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Replace 'XXX-VERSION-XXX' by the respective Scout RT version --&gt;</span>
<span class="tag">&lt;factorypath&gt;</span>
    <span class="tag">&lt;factorypathentry</span> <span class="attribute-name">kind</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARJAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">M2_REPO/org/eclipse/scout/rt/org.eclipse.scout.jaxws.apt/XXX-VERSION-XXX/org.eclipse.scout.jaxws.apt-XXX-VERSION-XXX.jar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">runInBatchMode</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;factorypathentry</span> <span class="attribute-name">kind</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARJAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">M2_REPO/com/unquietcode/tools/jcodemodel/codemodel/1.0.2/codemodel-1.0.2.jar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">runInBatchMode</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;factorypathentry</span> <span class="attribute-name">kind</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARJAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">M2_REPO/org/eclipse/scout/rt/org.eclipse.scout.rt.platform/XXX-VERSION-XXX/org.eclipse.scout.rt.platform-XXX-VERSION-XXX.jar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">runInBatchMode</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;factorypathentry</span> <span class="attribute-name">kind</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARJAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">M2_REPO/org/eclipse/scout/rt/org.eclipse.scout.rt.server.jaxws/XXX-VERSION-XXX/org.eclipse.scout.rt.server.jaxws-XXX-VERSION-XXX.jar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">runInBatchMode</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;factorypathentry</span> <span class="attribute-name">kind</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARJAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">M2_REPO/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">runInBatchMode</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;factorypathentry</span> <span class="attribute-name">kind</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARJAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">M2_REPO/org/slf4j/slf4j-api/1.7.12/slf4j-api-1.7.12.jar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">runInBatchMode</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/factorypath&gt;</span></code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="IAuthenticationMethod"><a class="anchor" href="#IAuthenticationMethod"></a>49.8. Authentication Method</h3> 
      <div class="paragraph"> 
       <p>The authentication method specifies the protocol to challenge the webservice client to provide credentials.<br /> Scout provides an implementation for <em>BASIC</em> and <em>WSSE_UsernameToken</em>. You can implement your own authentication method by implementing <code>IAuthenticationMethod</code> interface.</p> 
      </div> 
      <div class="sect3"> 
       <h4 id="basicauthenticationmethod"><a class="anchor" href="#basicauthenticationmethod"></a>49.8.1. BasicAuthenticationMethod</h4> 
       <div class="paragraph"> 
        <p>Authentication method to apply <em>Basic Access</em> Authentication. This requires requests to provide a valid user name and password to access content. User&#x2019;s credentials are transported in HTTP headers. Basic authentication also works across firewalls and proxy servers.</p> 
       </div> 
       <div class="paragraph"> 
        <p>However, the disadvantage of Basic authentication is that it transmits unencrypted base64-encoded passwords across the network. Therefore, you only should use this authentication when you know that the connection between the client and the server is secure. The connection should be established either over a dedicated line or by using Secure Sockets Layer (SSL) encryption and Transport Layer Security (TLS).</p> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="wsseusernametokenmethod"><a class="anchor" href="#wsseusernametokenmethod"></a>49.8.2. WsseUsernameTokenMethod</h4> 
       <div class="paragraph"> 
        <p>Authentication method to apply <em>Message Level WS-Security with UsernameToken</em> Authentication. This requires requests to provide a valid user name and password to access content. User&#x2019;s credentials are included in SOAP message headers.</p> 
       </div> 
       <div class="paragraph"> 
        <p>However, the disadvantage of WSSE UsernameToken Authentication is that it transmits unencrypted passwords across the network. Therefore, you only should use this authentication when you know that the connection between the client and the server is secure. The connection should be established either over a dedicated line or by using Secure Sockets Layer (SSL) encryption and Transport Layer Security (TLS).</p> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="containerbasedauthenticationmethod"><a class="anchor" href="#containerbasedauthenticationmethod"></a>49.8.3. ContainerBasedAuthenticationMethod</h4> 
       <div class="paragraph"> 
        <p>Use this authentication method when using container based authentication, meaning that webservice requests are authenticated by the application server, or a Servlet filter.</p> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="ICredentialVerifier"><a class="anchor" href="#ICredentialVerifier"></a>49.9. Credential Verifier</h3> 
      <div class="paragraph"> 
       <p>Verifies user&#x2019;s credentials against a data source like <em>database</em>, <em>config.properties</em>, <em>Active Directory</em>, or others.<br /> Scout provides an implementation for verification against users in <em>config.properties</em>. You can implement your own verifier by implementing <code>ICredentialVerifier</code> interface.</p> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody>
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> If you require to run in a specific <code>RunContext</code> like a transaction for user&#x2019;s verification, annotate the verifier with <code>RunWithRunContext</code> annotation, and specify a <code>RunContextProducer</code> accordingly. </td> 
         </tr> 
        </tbody>
       </table> 
      </div> 
      <div class="sect3"> 
       <h4 id="configfilecredentialverifier"><a class="anchor" href="#configfilecredentialverifier"></a>49.9.1. ConfigFileCredentialVerifier</h4> 
       <div class="paragraph"> 
        <p>Credential verifier against credentials configured in <em>config.properties</em> file.</p> 
       </div> 
       <div class="paragraph"> 
        <p>By default, this verifier expects the passwords in 'config.properties' to be a hash produced with SHA-512 algorithm. To support you in password hash generation, <code>ConfigFileCredentialVerifier</code> provides a static Java main method.</p> 
       </div> 
       <div class="paragraph"> 
        <p>Credentials are loaded from property <code>scout.auth.credentials</code>. Multiple credentials are separated with the semicolon, username and password with the colon. If using hashed passwords (by default), the password&#x2019;s salt and hash are separated with the dot.</p> 
       </div> 
       <div class="paragraph"> 
        <p>To work with plaintext passwords, set the property <code>scout.auth.credentials.plaintext</code> to <em>true</em>.</p> 
       </div> 
       <div class="paragraph"> 
        <p>Example of hashed passwords: <code>scott:SALT.PASSWORD-HASH;jack:SALT.PASSWORD-HASH;john:SALT.PASSWORD-HASH</code> Example of plaintext passwords: <code>scott:XXXX;jack:XXXX;john:XXXX</code></p> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="apx-cclicence"><a class="anchor" href="#apx-cclicence"></a>Appendix A: Licence and Copyright</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>This appendix first provides a summary of the Creative Commons (CC-BY) licence used for this book. The licence is followed by the complete list of the contributing individuals, and the full licence text.</p> 
     </div> 
     <div class="sect2"> 
      <h3 id="licence-summary"><a class="anchor" href="#licence-summary"></a>A.1. Licence Summary</h3> 
      <div class="paragraph"> 
       <p>This work is licensed under the Creative Commons Attribution License. To view a copy of this license, visit <a href="https://creativecommons.org/licenses/by/3.0/" class="bare">https://creativecommons.org/licenses/by/3.0/</a> or send a letter to Creative Commons, 559 Nathan Abbott Way, Stanford, California 94305, USA.</p> 
      </div> 
      <div class="paragraph"> 
       <p>A summary of the license is given below, followed by the full legal text.</p> 
      </div> 
      <div class="paragraph"> 
       <p>You are free:</p> 
      </div> 
      <div class="ulist"> 
       <ul> 
        <li> <p><strong>to Share</strong> ---to copy, distribute and transmit the work</p> </li> 
        <li> <p><strong>to Remix</strong>---to adapt the work</p> </li> 
        <li> <p>to make commercial use of the work</p> </li> 
       </ul> 
      </div> 
      <div class="paragraph"> 
       <p>Under the following conditions:</p> 
      </div> 
      <div class="paragraph"> 
       <p><strong>Attribution</strong> ---You must attribute the work in the manner specified by the author or licensor (but not in any way that suggests that they endorse you or your use of the work).</p> 
      </div> 
      <div class="paragraph"> 
       <p>With the understanding that:</p> 
      </div> 
      <div class="paragraph"> 
       <p><strong>Waiver</strong> ---Any of the above conditions can be waived if you get permission from the copyright holder.</p> 
      </div> 
      <div class="paragraph"> 
       <p><strong>Public Domain</strong> ---Where the work or any of its elements is in the public domain under applicable law, that status is in no way affected by the license.</p> 
      </div> 
      <div class="paragraph"> 
       <p><strong>Other Rights</strong> ---In no way are any of the following rights affected by the license:</p> 
      </div> 
      <div class="ulist"> 
       <ul> 
        <li> <p>Your fair dealing or fair use rights, or other applicable copyright exceptions and limitations;</p> </li> 
        <li> <p>The author&#x2019;s moral rights;</p> </li> 
        <li> <p>Rights other persons may have either in the work itself or in how the work is used, such as publicity or privacy rights.</p> </li> 
       </ul> 
      </div> 
      <div class="paragraph"> 
       <p><strong>Notice</strong> ---For any reuse or distribution, you must make clear to others the license terms of this work. The best way to do this is with a link to <a href="https://creativecommons.org/licenses/by/3.0/" class="bare">https://creativecommons.org/licenses/by/3.0/</a>.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="sec-contributing_individuals"><a class="anchor" href="#sec-contributing_individuals"></a>A.2. Contributing Individuals</h3> 
      <div class="paragraph"> 
       <p>Copyright (c) 2012-2014.</p> 
      </div> 
      <div class="paragraph"> 
       <p>In the text below, all contributing individuals are listed in alphabetical order by name. For contributions in the form of GitHub pull requests, the name should match the one provided in the corresponding public profile.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Bresson Jeremie, Fihlon Marcus, Nick Matthias, Schroeder Alex, Zimmermann Matthias</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="full-licence-text"><a class="anchor" href="#full-licence-text"></a>A.3. Full Licence Text</h3> 
      <div class="paragraph"> 
       <p>The full licence text is available online at <a href="http://creativecommons.org/licenses/by/3.0/legalcode" class="bare">http://creativecommons.org/licenses/by/3.0/legalcode</a></p> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div id="footnotes"> 
   <hr /> 
   <div class="footnote" id="_footnote_1"> 
    <a href="#_footnoteref_1">1</a>. 
    <a href="https://github.com/wildfly/jandex" class="bare">https://github.com/wildfly/jandex</a> 
   </div> 
   <div class="footnote" id="_footnote_2"> 
    <a href="#_footnoteref_2">2</a>. 
    <a href="https://en.wikipedia.org/wiki/.properties" class="bare">https://en.wikipedia.org/wiki/.properties</a> 
   </div> 
  </div> 
  <div id="footer"> 
   <div id="footer-text">
     Version 5.2.0-SNAPSHOT
    <br /> Last updated 2016-03-03 01:18:40 CET 
   </div> 
  </div>  
 </body>
</html>